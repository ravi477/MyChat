(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const f of u.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();var yp={exports:{}},zl={};var Wv;function JS(){if(Wv)return zl;Wv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,u){var f=null;if(u!==void 0&&(f=""+u),o.key!==void 0&&(f=""+o.key),"key"in o){u={};for(var p in o)p!=="key"&&(u[p]=o[p])}else u=o;return o=u.ref,{$$typeof:r,type:s,key:f,ref:o!==void 0?o:null,props:u}}return zl.Fragment=e,zl.jsx=n,zl.jsxs=n,zl}var Jv;function ZS(){return Jv||(Jv=1,yp.exports=JS()),yp.exports}var T=ZS(),_p={exports:{}},we={};var Zv;function ew(){if(Zv)return we;Zv=1;var r=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),w=Symbol.iterator;function P(O){return O===null||typeof O!="object"?null:(O=w&&O[w]||O["@@iterator"],typeof O=="function"?O:null)}var K={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},J=Object.assign,Z={};function oe(O,G,te){this.props=O,this.context=G,this.refs=Z,this.updater=te||K}oe.prototype.isReactComponent={},oe.prototype.setState=function(O,G){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,G,"setState")},oe.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function le(){}le.prototype=oe.prototype;function se(O,G,te){this.props=O,this.context=G,this.refs=Z,this.updater=te||K}var pe=se.prototype=new le;pe.constructor=se,J(pe,oe.prototype),pe.isPureReactComponent=!0;var xe=Array.isArray;function me(){}var N={H:null,A:null,T:null,S:null},x=Object.prototype.hasOwnProperty;function R(O,G,te){var ae=te.ref;return{$$typeof:r,type:O,key:G,ref:ae!==void 0?ae:null,props:te}}function I(O,G){return R(O.type,G,O.props)}function D(O){return typeof O=="object"&&O!==null&&O.$$typeof===r}function M(O){var G={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(te){return G[te]})}var C=/\/+/g;function Be(O,G){return typeof O=="object"&&O!==null&&O.key!=null?M(""+O.key):G.toString(36)}function rt(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(me,me):(O.status="pending",O.then(function(G){O.status==="pending"&&(O.status="fulfilled",O.value=G)},function(G){O.status==="pending"&&(O.status="rejected",O.reason=G)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function B(O,G,te,ae,Ee){var Ne=typeof O;(Ne==="undefined"||Ne==="boolean")&&(O=null);var qe=!1;if(O===null)qe=!0;else switch(Ne){case"bigint":case"string":case"number":qe=!0;break;case"object":switch(O.$$typeof){case r:case e:qe=!0;break;case E:return qe=O._init,B(qe(O._payload),G,te,ae,Ee)}}if(qe)return Ee=Ee(O),qe=ae===""?"."+Be(O,0):ae,xe(Ee)?(te="",qe!=null&&(te=qe.replace(C,"$&/")+"/"),B(Ee,G,te,"",function(Es){return Es})):Ee!=null&&(D(Ee)&&(Ee=I(Ee,te+(Ee.key==null||O&&O.key===Ee.key?"":(""+Ee.key).replace(C,"$&/")+"/")+qe)),G.push(Ee)),1;qe=0;var Ut=ae===""?".":ae+":";if(xe(O))for(var ut=0;ut<O.length;ut++)ae=O[ut],Ne=Ut+Be(ae,ut),qe+=B(ae,G,te,Ne,Ee);else if(ut=P(O),typeof ut=="function")for(O=ut.call(O),ut=0;!(ae=O.next()).done;)ae=ae.value,Ne=Ut+Be(ae,ut++),qe+=B(ae,G,te,Ne,Ee);else if(Ne==="object"){if(typeof O.then=="function")return B(rt(O),G,te,ae,Ee);throw G=String(O),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return qe}function ee(O,G,te){if(O==null)return O;var ae=[],Ee=0;return B(O,ae,"","",function(Ne){return G.call(te,Ne,Ee++)}),ae}function ie(O){if(O._status===-1){var G=O._result;G=G(),G.then(function(te){(O._status===0||O._status===-1)&&(O._status=1,O._result=te)},function(te){(O._status===0||O._status===-1)&&(O._status=2,O._result=te)}),O._status===-1&&(O._status=0,O._result=G)}if(O._status===1)return O._result.default;throw O._result}var ge=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},ue={map:ee,forEach:function(O,G,te){ee(O,function(){G.apply(this,arguments)},te)},count:function(O){var G=0;return ee(O,function(){G++}),G},toArray:function(O){return ee(O,function(G){return G})||[]},only:function(O){if(!D(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return we.Activity=S,we.Children=ue,we.Component=oe,we.Fragment=n,we.Profiler=o,we.PureComponent=se,we.StrictMode=s,we.Suspense=g,we.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,we.__COMPILER_RUNTIME={__proto__:null,c:function(O){return N.H.useMemoCache(O)}},we.cache=function(O){return function(){return O.apply(null,arguments)}},we.cacheSignal=function(){return null},we.cloneElement=function(O,G,te){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ae=J({},O.props),Ee=O.key;if(G!=null)for(Ne in G.key!==void 0&&(Ee=""+G.key),G)!x.call(G,Ne)||Ne==="key"||Ne==="__self"||Ne==="__source"||Ne==="ref"&&G.ref===void 0||(ae[Ne]=G[Ne]);var Ne=arguments.length-2;if(Ne===1)ae.children=te;else if(1<Ne){for(var qe=Array(Ne),Ut=0;Ut<Ne;Ut++)qe[Ut]=arguments[Ut+2];ae.children=qe}return R(O.type,Ee,ae)},we.createContext=function(O){return O={$$typeof:f,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},we.createElement=function(O,G,te){var ae,Ee={},Ne=null;if(G!=null)for(ae in G.key!==void 0&&(Ne=""+G.key),G)x.call(G,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(Ee[ae]=G[ae]);var qe=arguments.length-2;if(qe===1)Ee.children=te;else if(1<qe){for(var Ut=Array(qe),ut=0;ut<qe;ut++)Ut[ut]=arguments[ut+2];Ee.children=Ut}if(O&&O.defaultProps)for(ae in qe=O.defaultProps,qe)Ee[ae]===void 0&&(Ee[ae]=qe[ae]);return R(O,Ne,Ee)},we.createRef=function(){return{current:null}},we.forwardRef=function(O){return{$$typeof:p,render:O}},we.isValidElement=D,we.lazy=function(O){return{$$typeof:E,_payload:{_status:-1,_result:O},_init:ie}},we.memo=function(O,G){return{$$typeof:y,type:O,compare:G===void 0?null:G}},we.startTransition=function(O){var G=N.T,te={};N.T=te;try{var ae=O(),Ee=N.S;Ee!==null&&Ee(te,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(me,ge)}catch(Ne){ge(Ne)}finally{G!==null&&te.types!==null&&(G.types=te.types),N.T=G}},we.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},we.use=function(O){return N.H.use(O)},we.useActionState=function(O,G,te){return N.H.useActionState(O,G,te)},we.useCallback=function(O,G){return N.H.useCallback(O,G)},we.useContext=function(O){return N.H.useContext(O)},we.useDebugValue=function(){},we.useDeferredValue=function(O,G){return N.H.useDeferredValue(O,G)},we.useEffect=function(O,G){return N.H.useEffect(O,G)},we.useEffectEvent=function(O){return N.H.useEffectEvent(O)},we.useId=function(){return N.H.useId()},we.useImperativeHandle=function(O,G,te){return N.H.useImperativeHandle(O,G,te)},we.useInsertionEffect=function(O,G){return N.H.useInsertionEffect(O,G)},we.useLayoutEffect=function(O,G){return N.H.useLayoutEffect(O,G)},we.useMemo=function(O,G){return N.H.useMemo(O,G)},we.useOptimistic=function(O,G){return N.H.useOptimistic(O,G)},we.useReducer=function(O,G,te){return N.H.useReducer(O,G,te)},we.useRef=function(O){return N.H.useRef(O)},we.useState=function(O){return N.H.useState(O)},we.useSyncExternalStore=function(O,G,te){return N.H.useSyncExternalStore(O,G,te)},we.useTransition=function(){return N.H.useTransition()},we.version="19.2.4",we}var e0;function Am(){return e0||(e0=1,_p.exports=ew()),_p.exports}var ne=Am(),vp={exports:{}},jl={},Ep={exports:{}},Tp={};var t0;function tw(){return t0||(t0=1,(function(r){function e(B,ee){var ie=B.length;B.push(ee);e:for(;0<ie;){var ge=ie-1>>>1,ue=B[ge];if(0<o(ue,ee))B[ge]=ee,B[ie]=ue,ie=ge;else break e}}function n(B){return B.length===0?null:B[0]}function s(B){if(B.length===0)return null;var ee=B[0],ie=B.pop();if(ie!==ee){B[0]=ie;e:for(var ge=0,ue=B.length,O=ue>>>1;ge<O;){var G=2*(ge+1)-1,te=B[G],ae=G+1,Ee=B[ae];if(0>o(te,ie))ae<ue&&0>o(Ee,te)?(B[ge]=Ee,B[ae]=ie,ge=ae):(B[ge]=te,B[G]=ie,ge=G);else if(ae<ue&&0>o(Ee,ie))B[ge]=Ee,B[ae]=ie,ge=ae;else break e}}return ee}function o(B,ee){var ie=B.sortIndex-ee.sortIndex;return ie!==0?ie:B.id-ee.id}if(r.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;r.unstable_now=function(){return u.now()}}else{var f=Date,p=f.now();r.unstable_now=function(){return f.now()-p}}var g=[],y=[],E=1,S=null,w=3,P=!1,K=!1,J=!1,Z=!1,oe=typeof setTimeout=="function"?setTimeout:null,le=typeof clearTimeout=="function"?clearTimeout:null,se=typeof setImmediate<"u"?setImmediate:null;function pe(B){for(var ee=n(y);ee!==null;){if(ee.callback===null)s(y);else if(ee.startTime<=B)s(y),ee.sortIndex=ee.expirationTime,e(g,ee);else break;ee=n(y)}}function xe(B){if(J=!1,pe(B),!K)if(n(g)!==null)K=!0,me||(me=!0,M());else{var ee=n(y);ee!==null&&rt(xe,ee.startTime-B)}}var me=!1,N=-1,x=5,R=-1;function I(){return Z?!0:!(r.unstable_now()-R<x)}function D(){if(Z=!1,me){var B=r.unstable_now();R=B;var ee=!0;try{e:{K=!1,J&&(J=!1,le(N),N=-1),P=!0;var ie=w;try{t:{for(pe(B),S=n(g);S!==null&&!(S.expirationTime>B&&I());){var ge=S.callback;if(typeof ge=="function"){S.callback=null,w=S.priorityLevel;var ue=ge(S.expirationTime<=B);if(B=r.unstable_now(),typeof ue=="function"){S.callback=ue,pe(B),ee=!0;break t}S===n(g)&&s(g),pe(B)}else s(g);S=n(g)}if(S!==null)ee=!0;else{var O=n(y);O!==null&&rt(xe,O.startTime-B),ee=!1}}break e}finally{S=null,w=ie,P=!1}ee=void 0}}finally{ee?M():me=!1}}}var M;if(typeof se=="function")M=function(){se(D)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,Be=C.port2;C.port1.onmessage=D,M=function(){Be.postMessage(null)}}else M=function(){oe(D,0)};function rt(B,ee){N=oe(function(){B(r.unstable_now())},ee)}r.unstable_IdlePriority=5,r.unstable_ImmediatePriority=1,r.unstable_LowPriority=4,r.unstable_NormalPriority=3,r.unstable_Profiling=null,r.unstable_UserBlockingPriority=2,r.unstable_cancelCallback=function(B){B.callback=null},r.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<B?Math.floor(1e3/B):5},r.unstable_getCurrentPriorityLevel=function(){return w},r.unstable_next=function(B){switch(w){case 1:case 2:case 3:var ee=3;break;default:ee=w}var ie=w;w=ee;try{return B()}finally{w=ie}},r.unstable_requestPaint=function(){Z=!0},r.unstable_runWithPriority=function(B,ee){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ie=w;w=B;try{return ee()}finally{w=ie}},r.unstable_scheduleCallback=function(B,ee,ie){var ge=r.unstable_now();switch(typeof ie=="object"&&ie!==null?(ie=ie.delay,ie=typeof ie=="number"&&0<ie?ge+ie:ge):ie=ge,B){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=ie+ue,B={id:E++,callback:ee,priorityLevel:B,startTime:ie,expirationTime:ue,sortIndex:-1},ie>ge?(B.sortIndex=ie,e(y,B),n(g)===null&&B===n(y)&&(J?(le(N),N=-1):J=!0,rt(xe,ie-ge))):(B.sortIndex=ue,e(g,B),K||P||(K=!0,me||(me=!0,M()))),B},r.unstable_shouldYield=I,r.unstable_wrapCallback=function(B){var ee=w;return function(){var ie=w;w=ee;try{return B.apply(this,arguments)}finally{w=ie}}}})(Tp)),Tp}var n0;function nw(){return n0||(n0=1,Ep.exports=tw()),Ep.exports}var bp={exports:{}},en={};var i0;function iw(){if(i0)return en;i0=1;var r=Am();function e(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)y+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,E){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:g,containerInfo:y,implementation:E}}var f=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return en.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,en.createPortal=function(g,y){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(e(299));return u(g,y,null,E)},en.flushSync=function(g){var y=f.T,E=s.p;try{if(f.T=null,s.p=2,g)return g()}finally{f.T=y,s.p=E,s.d.f()}},en.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,s.d.C(g,y))},en.prefetchDNS=function(g){typeof g=="string"&&s.d.D(g)},en.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var E=y.as,S=p(E,y.crossOrigin),w=typeof y.integrity=="string"?y.integrity:void 0,P=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;E==="style"?s.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:S,integrity:w,fetchPriority:P}):E==="script"&&s.d.X(g,{crossOrigin:S,integrity:w,fetchPriority:P,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},en.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var E=p(y.as,y.crossOrigin);s.d.M(g,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&s.d.M(g)},en.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var E=y.as,S=p(E,y.crossOrigin);s.d.L(g,E,{crossOrigin:S,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},en.preloadModule=function(g,y){if(typeof g=="string")if(y){var E=p(y.as,y.crossOrigin);s.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else s.d.m(g)},en.requestFormReset=function(g){s.d.r(g)},en.unstable_batchedUpdates=function(g,y){return g(y)},en.useFormState=function(g,y,E){return f.H.useFormState(g,y,E)},en.useFormStatus=function(){return f.H.useHostTransitionStatus()},en.version="19.2.4",en}var r0;function rw(){if(r0)return bp.exports;r0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),bp.exports=iw(),bp.exports}var s0;function sw(){if(s0)return jl;s0=1;var r=nw(),e=Am(),n=rw();function s(t){var i="https://react.dev/errors/"+t;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function u(t){var i=t,a=t;if(t.alternate)for(;i.return;)i=i.return;else{t=i;do i=t,(i.flags&4098)!==0&&(a=i.return),t=i.return;while(t)}return i.tag===3?a:null}function f(t){if(t.tag===13){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function p(t){if(t.tag===31){var i=t.memoizedState;if(i===null&&(t=t.alternate,t!==null&&(i=t.memoizedState)),i!==null)return i.dehydrated}return null}function g(t){if(u(t)!==t)throw Error(s(188))}function y(t){var i=t.alternate;if(!i){if(i=u(t),i===null)throw Error(s(188));return i!==t?null:t}for(var a=t,l=i;;){var h=a.return;if(h===null)break;var d=h.alternate;if(d===null){if(l=h.return,l!==null){a=l;continue}break}if(h.child===d.child){for(d=h.child;d;){if(d===a)return g(h),t;if(d===l)return g(h),i;d=d.sibling}throw Error(s(188))}if(a.return!==l.return)a=h,l=d;else{for(var _=!1,b=h.child;b;){if(b===a){_=!0,a=h,l=d;break}if(b===l){_=!0,l=h,a=d;break}b=b.sibling}if(!_){for(b=d.child;b;){if(b===a){_=!0,a=d,l=h;break}if(b===l){_=!0,l=d,a=h;break}b=b.sibling}if(!_)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:i}function E(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t;for(t=t.child;t!==null;){if(i=E(t),i!==null)return i;t=t.sibling}return null}var S=Object.assign,w=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),K=Symbol.for("react.portal"),J=Symbol.for("react.fragment"),Z=Symbol.for("react.strict_mode"),oe=Symbol.for("react.profiler"),le=Symbol.for("react.consumer"),se=Symbol.for("react.context"),pe=Symbol.for("react.forward_ref"),xe=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),x=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),D=Symbol.iterator;function M(t){return t===null||typeof t!="object"?null:(t=D&&t[D]||t["@@iterator"],typeof t=="function"?t:null)}var C=Symbol.for("react.client.reference");function Be(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===C?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case J:return"Fragment";case oe:return"Profiler";case Z:return"StrictMode";case xe:return"Suspense";case me:return"SuspenseList";case R:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case K:return"Portal";case se:return t.displayName||"Context";case le:return(t._context.displayName||"Context")+".Consumer";case pe:var i=t.render;return t=t.displayName,t||(t=i.displayName||i.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case N:return i=t.displayName||null,i!==null?i:Be(t.type)||"Memo";case x:i=t._payload,t=t._init;try{return Be(t(i))}catch{}}return null}var rt=Array.isArray,B=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ee=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ie={pending:!1,data:null,method:null,action:null},ge=[],ue=-1;function O(t){return{current:t}}function G(t){0>ue||(t.current=ge[ue],ge[ue]=null,ue--)}function te(t,i){ue++,ge[ue]=t.current,t.current=i}var ae=O(null),Ee=O(null),Ne=O(null),qe=O(null);function Ut(t,i){switch(te(Ne,i),te(Ee,t),te(ae,null),i.nodeType){case 9:case 11:t=(t=i.documentElement)&&(t=t.namespaceURI)?Ev(t):0;break;default:if(t=i.tagName,i=i.namespaceURI)i=Ev(i),t=Tv(i,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}G(ae),te(ae,t)}function ut(){G(ae),G(Ee),G(Ne)}function Es(t){t.memoizedState!==null&&te(qe,t);var i=ae.current,a=Tv(i,t.type);i!==a&&(te(Ee,t),te(ae,a))}function ya(t){Ee.current===t&&(G(ae),G(Ee)),qe.current===t&&(G(qe),Vl._currentValue=ie)}var _a,va;function hi(t){if(_a===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);_a=i&&i[1]||"",va=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+_a+t+va}var Vo=!1;function Ts(t,i){if(!t||Vo)return"";Vo=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var X=function(){throw Error()};if(Object.defineProperty(X.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(X,[])}catch(F){var q=F}Reflect.construct(t,[],X)}else{try{X.call()}catch(F){q=F}t.call(X.prototype)}}else{try{throw Error()}catch(F){q=F}(X=t())&&typeof X.catch=="function"&&X.catch(function(){})}}catch(F){if(F&&q&&typeof F.stack=="string")return[F.stack,q.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],b=d[1];if(_&&b){var k=_.split(`
`),j=b.split(`
`);for(h=l=0;l<k.length&&!k[l].includes("DetermineComponentFrameRoot");)l++;for(;h<j.length&&!j[h].includes("DetermineComponentFrameRoot");)h++;if(l===k.length||h===j.length)for(l=k.length-1,h=j.length-1;1<=l&&0<=h&&k[l]!==j[h];)h--;for(;1<=l&&0<=h;l--,h--)if(k[l]!==j[h]){if(l!==1||h!==1)do if(l--,h--,0>h||k[l]!==j[h]){var Y=`
`+k[l].replace(" at new "," at ");return t.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",t.displayName)),Y}while(1<=l&&0<=h);break}}}finally{Vo=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?hi(a):""}function Lo(t,i){switch(t.tag){case 26:case 27:case 5:return hi(t.type);case 16:return hi("Lazy");case 13:return t.child!==i&&i!==null?hi("Suspense Fallback"):hi("Suspense");case 19:return hi("SuspenseList");case 0:case 15:return Ts(t.type,!1);case 11:return Ts(t.type.render,!1);case 1:return Ts(t.type,!0);case 31:return hi("Activity");default:return""}}function Uo(t){try{var i="",a=null;do i+=Lo(t,a),a=t,t=t.return;while(t);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var St=Object.prototype.hasOwnProperty,Pt=r.unstable_scheduleCallback,_r=r.unstable_cancelCallback,vf=r.unstable_shouldYield,xu=r.unstable_requestPaint,an=r.unstable_now,bs=r.unstable_getCurrentPriorityLevel,Po=r.unstable_ImmediatePriority,zo=r.unstable_UserBlockingPriority,vr=r.unstable_NormalPriority,Ef=r.unstable_LowPriority,Cu=r.unstable_IdlePriority,Iu=r.log,Nu=r.unstable_setDisableYieldValue,Kn=null,Gt=null;function Dn(t){if(typeof Iu=="function"&&Nu(t),Gt&&typeof Gt.setStrictMode=="function")try{Gt.setStrictMode(Kn,t)}catch{}}var _t=Math.clz32?Math.clz32:ku,Du=Math.log,Ea=Math.LN2;function ku(t){return t>>>=0,t===0?32:31-(Du(t)/Ea|0)|0}var fi=256,As=262144,wt=4194304;function di(t){var i=t&42;if(i!==0)return i;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return t&261888;case 262144:case 524288:case 1048576:case 2097152:return t&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function pi(t,i,a){var l=t.pendingLanes;if(l===0)return 0;var h=0,d=t.suspendedLanes,_=t.pingedLanes;t=t.warmLanes;var b=l&134217727;return b!==0?(l=b&~d,l!==0?h=di(l):(_&=b,_!==0?h=di(_):a||(a=b&~t,a!==0&&(h=di(a))))):(b=l&~d,b!==0?h=di(b):_!==0?h=di(_):a||(a=l&~t,a!==0&&(h=di(a)))),h===0?0:i!==0&&i!==h&&(i&d)===0&&(d=h&-h,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:h}function Qn(t,i){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&i)===0}function Tf(t,i){switch(t){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ou(){var t=wt;return wt<<=1,(wt&62914560)===0&&(wt=4194304),t}function mi(t){for(var i=[],a=0;31>a;a++)i.push(t);return i}function Ss(t,i){t.pendingLanes|=i,i!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function bf(t,i,a,l,h,d){var _=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var b=t.entanglements,k=t.expirationTimes,j=t.hiddenUpdates;for(a=_&~a;0<a;){var Y=31-_t(a),X=1<<Y;b[Y]=0,k[Y]=-1;var q=j[Y];if(q!==null)for(j[Y]=null,Y=0;Y<q.length;Y++){var F=q[Y];F!==null&&(F.lane&=-536870913)}a&=~X}l!==0&&ws(t,l,0),d!==0&&h===0&&t.tag!==0&&(t.suspendedLanes|=d&~(_&~i))}function ws(t,i,a){t.pendingLanes|=i,t.suspendedLanes&=~i;var l=31-_t(i);t.entangledLanes|=i,t.entanglements[l]=t.entanglements[l]|1073741824|a&261930}function jo(t,i){var a=t.entangledLanes|=i;for(t=t.entanglements;a;){var l=31-_t(a),h=1<<l;h&i|t[l]&i&&(t[l]|=i),a&=~h}}function Bo(t,i){var a=i&-i;return a=(a&42)!==0?1:Rs(a),(a&(t.suspendedLanes|i))!==0?0:a}function Rs(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Gi(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function Mu(){var t=ee.p;return t!==0?t:(t=window.event,t===void 0?32:Fv(t.type))}function Xn(t,i){var a=ee.p;try{return ee.p=t,i()}finally{ee.p=a}}var $n=Math.random().toString(36).slice(2),Rt="__reactFiber$"+$n,Bt="__reactProps$"+$n,gi="__reactContainer$"+$n,Ta="__reactEvents$"+$n,Af="__reactListeners$"+$n,Vu="__reactHandles$"+$n,Lu="__reactResources$"+$n,yi="__reactMarker$"+$n;function ba(t){delete t[Rt],delete t[Bt],delete t[Ta],delete t[Af],delete t[Vu]}function _i(t){var i=t[Rt];if(i)return i;for(var a=t.parentNode;a;){if(i=a[gi]||a[Rt]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(t=Cv(t);t!==null;){if(a=t[Rt])return a;t=Cv(t)}return i}t=a,a=t.parentNode}return null}function kn(t){if(t=t[Rt]||t[gi]){var i=t.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return t}return null}function vn(t){var i=t.tag;if(i===5||i===26||i===27||i===6)return t.stateNode;throw Error(s(33))}function vi(t){var i=t[Lu];return i||(i=t[Lu]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function xt(t){t[yi]=!0}var qo=new Set,Ho={};function Ei(t,i){Ti(t,i),Ti(t+"Capture",i)}function Ti(t,i){for(Ho[t]=i,t=0;t<i.length;t++)qo.add(i[t])}var Fo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Go={},Yo={};function Uu(t){return St.call(Yo,t)?!0:St.call(Go,t)?!1:Fo.test(t)?Yo[t]=!0:(Go[t]=!0,!1)}function Aa(t,i,a){if(Uu(i))if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(i);return}}t.setAttribute(i,""+a)}}function En(t,i,a){if(a===null)t.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(i);return}t.setAttribute(i,""+a)}}function Ct(t,i,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(i,a,""+l)}}function qt(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Er(t){var i=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ko(t,i,a){var l=Object.getOwnPropertyDescriptor(t.constructor.prototype,i);if(!t.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var h=l.get,d=l.set;return Object.defineProperty(t,i,{configurable:!0,get:function(){return h.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(t,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){t._valueTracker=null,delete t[i]}}}}function Xe(t){if(!t._valueTracker){var i=Er(t)?"checked":"value";t._valueTracker=Ko(t,i,""+t[i])}}function xs(t){if(!t)return!1;var i=t._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return t&&(l=Er(t)?t.checked?"true":"false":t.value),t=l,t!==a?(i.setValue(t),!0):!1}function bi(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var Cs=/[\n"\\]/g;function cn(t){return t.replace(Cs,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Sa(t,i,a,l,h,d,_,b){t.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?t.type=_:t.removeAttribute("type"),i!=null?_==="number"?(i===0&&t.value===""||t.value!=i)&&(t.value=""+qt(i)):t.value!==""+qt(i)&&(t.value=""+qt(i)):_!=="submit"&&_!=="reset"||t.removeAttribute("value"),i!=null?Qo(t,_,qt(i)):a!=null?Qo(t,_,qt(a)):l!=null&&t.removeAttribute("value"),h==null&&d!=null&&(t.defaultChecked=!!d),h!=null&&(t.checked=h&&typeof h!="function"&&typeof h!="symbol"),b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?t.name=""+qt(b):t.removeAttribute("name")}function Pu(t,i,a,l,h,d,_,b){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(t.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){Xe(t);return}a=a!=null?""+qt(a):"",i=i!=null?""+qt(i):a,b||i===t.value||(t.value=i),t.defaultValue=i}l=l??h,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=b?t.checked:!!l,t.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(t.name=_),Xe(t)}function Qo(t,i,a){i==="number"&&bi(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Tr(t,i,a,l){if(t=t.options,i){i={};for(var h=0;h<a.length;h++)i["$"+a[h]]=!0;for(a=0;a<t.length;a++)h=i.hasOwnProperty("$"+t[a].value),t[a].selected!==h&&(t[a].selected=h),h&&l&&(t[a].defaultSelected=!0)}else{for(a=""+qt(a),i=null,h=0;h<t.length;h++){if(t[h].value===a){t[h].selected=!0,l&&(t[h].defaultSelected=!0);return}i!==null||t[h].disabled||(i=t[h])}i!==null&&(i.selected=!0)}}function zu(t,i,a){if(i!=null&&(i=""+qt(i),i!==t.value&&(t.value=i),a==null)){t.defaultValue!==i&&(t.defaultValue=i);return}t.defaultValue=a!=null?""+qt(a):""}function br(t,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(s(92));if(rt(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=qt(i),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l),Xe(t)}function hn(t,i){if(i){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=i;return}}t.textContent=i}var ju=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Xo(t,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(i,""):i==="float"?t.cssFloat="":t[i]="":l?t.setProperty(i,a):typeof a!="number"||a===0||ju.has(i)?i==="float"?t.cssFloat=a:t[i]=(""+a).trim():t[i]=a+"px"}function $o(t,i,a){if(i!=null&&typeof i!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var h in i)l=i[h],i.hasOwnProperty(h)&&a[h]!==l&&Xo(t,h,l)}else for(var d in i)i.hasOwnProperty(d)&&Xo(t,d,i[d])}function wa(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bu=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ar=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ra(t){return Ar.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}function Wn(){}var Wo=null;function On(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sr=null,Ai=null;function Is(t){var i=kn(t);if(i&&(t=i.stateNode)){var a=t[Bt]||null;e:switch(t=i.stateNode,i.type){case"input":if(Sa(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+cn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==t&&l.form===t.form){var h=l[Bt]||null;if(!h)throw Error(s(90));Sa(l,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===t.form&&xs(l)}break e;case"textarea":zu(t,a.value,a.defaultValue);break e;case"select":i=a.value,i!=null&&Tr(t,!!a.multiple,i,!1)}}}var xa=!1;function wr(t,i,a){if(xa)return t(i,a);xa=!0;try{var l=t(i);return l}finally{if(xa=!1,(Sr!==null||Ai!==null)&&(Mc(),Sr&&(i=Sr,t=Ai,Ai=Sr=null,Is(i),t)))for(i=0;i<t.length;i++)Is(t[i])}}function Jn(t,i){var a=t.stateNode;if(a===null)return null;var l=a[Bt]||null;if(l===null)return null;a=l[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,i,typeof a));return a}var Mn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ns=!1;if(Mn)try{var Je={};Object.defineProperty(Je,"passive",{get:function(){Ns=!0}}),window.addEventListener("test",Je,Je),window.removeEventListener("test",Je,Je)}catch{Ns=!1}var Si=null,Jo=null,Ds=null;function Zo(){if(Ds)return Ds;var t,i=Jo,a=i.length,l,h="value"in Si?Si.value:Si.textContent,d=h.length;for(t=0;t<a&&i[t]===h[t];t++);var _=a-t;for(l=1;l<=_&&i[a-l]===h[d-l];l++);return Ds=h.slice(t,1<l?1-l:void 0)}function ks(t){var i=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&i===13&&(t=13)):t=i,t===10&&(t=13),32<=t||t===13?t:0}function Yi(){return!0}function Zn(){return!1}function Yt(t){function i(a,l,h,d,_){this._reactName=a,this._targetInst=h,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var b in t)t.hasOwnProperty(b)&&(a=t[b],this[b]=a?a(d):d[b]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Yi:Zn,this.isPropagationStopped=Zn,this}return S(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),i}var Ki={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wi=Yt(Ki),Rr=S({},Ki,{view:0,detail:0}),el=Yt(Rr),xr,Ca,Ri,Ia=S({},Rr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cr,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ri&&(Ri&&t.type==="mousemove"?(xr=t.screenX-Ri.screenX,Ca=t.screenY-Ri.screenY):Ca=xr=0,Ri=t),xr)},movementY:function(t){return"movementY"in t?t.movementY:Ca}}),tl=Yt(Ia),Os=S({},Ia,{dataTransfer:0}),qu=Yt(Os),Hu=S({},Rr,{relatedTarget:0}),Ms=Yt(Hu),nl=S({},Ki,{animationName:0,elapsedTime:0,pseudoElement:0}),Fu=Yt(nl),Na=S({},Ki,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Gu=Yt(Na),Yu=S({},Ki,{data:0}),xi=Yt(Yu),Ku={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Qu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $u(t){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(t):(t=Xu[t])?!!i[t]:!1}function Cr(){return $u}var on=S({},Rr,{key:function(t){if(t.key){var i=Ku[t.key]||t.key;if(i!=="Unidentified")return i}return t.type==="keypress"?(t=ks(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Qu[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cr,charCode:function(t){return t.type==="keypress"?ks(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ks(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Wu=Yt(on),Ju=S({},Ia,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Qi=Yt(Ju),c=S({},Rr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cr}),m=Yt(c),v=S({},Ki,{propertyName:0,elapsedTime:0,pseudoElement:0}),A=Yt(v),U=S({},Ia,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),H=Yt(U),re=S({},Ki,{newState:0,oldState:0}),Ce=Yt(re),vt=[9,13,27,32],Ye=Mn&&"CompositionEvent"in window,ct=null;Mn&&"documentMode"in document&&(ct=document.documentMode);var Vn=Mn&&"TextEvent"in window&&!ct,Ci=Mn&&(!Ye||ct&&8<ct&&11>=ct),ei=" ",ti=!1;function Vs(t,i){switch(t){case"keyup":return vt.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Da(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ka=!1;function bA(t,i){switch(t){case"compositionend":return Da(i);case"keypress":return i.which!==32?null:(ti=!0,ei);case"textInput":return t=i.data,t===ei&&ti?null:t;default:return null}}function AA(t,i){if(ka)return t==="compositionend"||!Ye&&Vs(t,i)?(t=Zo(),Ds=Jo=Si=null,ka=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ci&&i.locale!=="ko"?null:i.data;default:return null}}var SA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dg(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i==="input"?!!SA[t.type]:i==="textarea"}function kg(t,i,a,l){Sr?Ai?Ai.push(l):Ai=[l]:Sr=l,i=Bc(i,"onChange"),0<i.length&&(a=new wi("onChange","change",null,a,l),t.push({event:a,listeners:i}))}var il=null,rl=null;function wA(t){pv(t,0)}function Zu(t){var i=vn(t);if(xs(i))return t}function Og(t,i){if(t==="change")return i}var Mg=!1;if(Mn){var Sf;if(Mn){var wf="oninput"in document;if(!wf){var Vg=document.createElement("div");Vg.setAttribute("oninput","return;"),wf=typeof Vg.oninput=="function"}Sf=wf}else Sf=!1;Mg=Sf&&(!document.documentMode||9<document.documentMode)}function Lg(){il&&(il.detachEvent("onpropertychange",Ug),rl=il=null)}function Ug(t){if(t.propertyName==="value"&&Zu(rl)){var i=[];kg(i,rl,t,On(t)),wr(wA,i)}}function RA(t,i,a){t==="focusin"?(Lg(),il=i,rl=a,il.attachEvent("onpropertychange",Ug)):t==="focusout"&&Lg()}function xA(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Zu(rl)}function CA(t,i){if(t==="click")return Zu(i)}function IA(t,i){if(t==="input"||t==="change")return Zu(i)}function NA(t,i){return t===i&&(t!==0||1/t===1/i)||t!==t&&i!==i}var Tn=typeof Object.is=="function"?Object.is:NA;function sl(t,i){if(Tn(t,i))return!0;if(typeof t!="object"||t===null||typeof i!="object"||i===null)return!1;var a=Object.keys(t),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var h=a[l];if(!St.call(i,h)||!Tn(t[h],i[h]))return!1}return!0}function Pg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function zg(t,i){var a=Pg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=i&&l>=i)return{node:a,offset:i-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Pg(a)}}function jg(t,i){return t&&i?t===i?!0:t&&t.nodeType===3?!1:i&&i.nodeType===3?jg(t,i.parentNode):"contains"in t?t.contains(i):t.compareDocumentPosition?!!(t.compareDocumentPosition(i)&16):!1:!1}function Bg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var i=bi(t.document);i instanceof t.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)t=i.contentWindow;else break;i=bi(t.document)}return i}function Rf(t){var i=t&&t.nodeName&&t.nodeName.toLowerCase();return i&&(i==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||i==="textarea"||t.contentEditable==="true")}var DA=Mn&&"documentMode"in document&&11>=document.documentMode,Oa=null,xf=null,al=null,Cf=!1;function qg(t,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Cf||Oa==null||Oa!==bi(l)||(l=Oa,"selectionStart"in l&&Rf(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),al&&sl(al,l)||(al=l,l=Bc(xf,"onSelect"),0<l.length&&(i=new wi("onSelect","select",null,i,a),t.push({event:i,listeners:l}),i.target=Oa)))}function Ls(t,i){var a={};return a[t.toLowerCase()]=i.toLowerCase(),a["Webkit"+t]="webkit"+i,a["Moz"+t]="moz"+i,a}var Ma={animationend:Ls("Animation","AnimationEnd"),animationiteration:Ls("Animation","AnimationIteration"),animationstart:Ls("Animation","AnimationStart"),transitionrun:Ls("Transition","TransitionRun"),transitionstart:Ls("Transition","TransitionStart"),transitioncancel:Ls("Transition","TransitionCancel"),transitionend:Ls("Transition","TransitionEnd")},If={},Hg={};Mn&&(Hg=document.createElement("div").style,"AnimationEvent"in window||(delete Ma.animationend.animation,delete Ma.animationiteration.animation,delete Ma.animationstart.animation),"TransitionEvent"in window||delete Ma.transitionend.transition);function Us(t){if(If[t])return If[t];if(!Ma[t])return t;var i=Ma[t],a;for(a in i)if(i.hasOwnProperty(a)&&a in Hg)return If[t]=i[a];return t}var Fg=Us("animationend"),Gg=Us("animationiteration"),Yg=Us("animationstart"),kA=Us("transitionrun"),OA=Us("transitionstart"),MA=Us("transitioncancel"),Kg=Us("transitionend"),Qg=new Map,Nf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Nf.push("scrollEnd");function ni(t,i){Qg.set(t,i),Ei(i,[t])}var ec=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)},Ln=[],Va=0,Df=0;function tc(){for(var t=Va,i=Df=Va=0;i<t;){var a=Ln[i];Ln[i++]=null;var l=Ln[i];Ln[i++]=null;var h=Ln[i];Ln[i++]=null;var d=Ln[i];if(Ln[i++]=null,l!==null&&h!==null){var _=l.pending;_===null?h.next=h:(h.next=_.next,_.next=h),l.pending=h}d!==0&&Xg(a,h,d)}}function nc(t,i,a,l){Ln[Va++]=t,Ln[Va++]=i,Ln[Va++]=a,Ln[Va++]=l,Df|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function kf(t,i,a,l){return nc(t,i,a,l),ic(t)}function Ps(t,i){return nc(t,null,null,i),ic(t)}function Xg(t,i,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var h=!1,d=t.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(t=d.stateNode,t===null||t._visibility&1||(h=!0)),t=d,d=d.return;return t.tag===3?(d=t.stateNode,h&&i!==null&&(h=31-_t(a),t=d.hiddenUpdates,l=t[h],l===null?t[h]=[i]:l.push(i),i.lane=a|536870912),d):null}function ic(t){if(50<Cl)throw Cl=0,Bd=null,Error(s(185));for(var i=t.return;i!==null;)t=i,i=t.return;return t.tag===3?t.stateNode:null}var La={};function VA(t,i,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(t,i,a,l){return new VA(t,i,a,l)}function Of(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Xi(t,i){var a=t.alternate;return a===null?(a=bn(t.tag,i,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=i,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,i=t.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function $g(t,i){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=i,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,i=a.dependencies,t.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t}function rc(t,i,a,l,h,d){var _=0;if(l=t,typeof t=="function")Of(t)&&(_=1);else if(typeof t=="string")_=jS(t,a,ae.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case R:return t=bn(31,a,i,h),t.elementType=R,t.lanes=d,t;case J:return zs(a.children,h,d,i);case Z:_=8,h|=24;break;case oe:return t=bn(12,a,i,h|2),t.elementType=oe,t.lanes=d,t;case xe:return t=bn(13,a,i,h),t.elementType=xe,t.lanes=d,t;case me:return t=bn(19,a,i,h),t.elementType=me,t.lanes=d,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case se:_=10;break e;case le:_=9;break e;case pe:_=11;break e;case N:_=14;break e;case x:_=16,l=null;break e}_=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return i=bn(_,a,i,h),i.elementType=t,i.type=l,i.lanes=d,i}function zs(t,i,a,l){return t=bn(7,t,l,i),t.lanes=a,t}function Mf(t,i,a){return t=bn(6,t,null,i),t.lanes=a,t}function Wg(t){var i=bn(18,null,null,0);return i.stateNode=t,i}function Vf(t,i,a){return i=bn(4,t.children!==null?t.children:[],t.key,i),i.lanes=a,i.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},i}var Jg=new WeakMap;function Un(t,i){if(typeof t=="object"&&t!==null){var a=Jg.get(t);return a!==void 0?a:(i={value:t,source:i,stack:Uo(i)},Jg.set(t,i),i)}return{value:t,source:i,stack:Uo(i)}}var Ua=[],Pa=0,sc=null,ol=0,Pn=[],zn=0,Ir=null,Ii=1,Ni="";function $i(t,i){Ua[Pa++]=ol,Ua[Pa++]=sc,sc=t,ol=i}function Zg(t,i,a){Pn[zn++]=Ii,Pn[zn++]=Ni,Pn[zn++]=Ir,Ir=t;var l=Ii;t=Ni;var h=32-_t(l)-1;l&=~(1<<h),a+=1;var d=32-_t(i)+h;if(30<d){var _=h-h%5;d=(l&(1<<_)-1).toString(32),l>>=_,h-=_,Ii=1<<32-_t(i)+h|a<<h|l,Ni=d+t}else Ii=1<<d|a<<h|l,Ni=t}function Lf(t){t.return!==null&&($i(t,1),Zg(t,1,0))}function Uf(t){for(;t===sc;)sc=Ua[--Pa],Ua[Pa]=null,ol=Ua[--Pa],Ua[Pa]=null;for(;t===Ir;)Ir=Pn[--zn],Pn[zn]=null,Ni=Pn[--zn],Pn[zn]=null,Ii=Pn[--zn],Pn[zn]=null}function ey(t,i){Pn[zn++]=Ii,Pn[zn++]=Ni,Pn[zn++]=Ir,Ii=i.id,Ni=i.overflow,Ir=t}var Kt=null,st=null,ze=!1,Nr=null,jn=!1,Pf=Error(s(519));function Dr(t){var i=Error(s(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ll(Un(i,t)),Pf}function ty(t){var i=t.stateNode,a=t.type,l=t.memoizedProps;switch(i[Rt]=t,i[Bt]=l,a){case"dialog":Oe("cancel",i),Oe("close",i);break;case"iframe":case"object":case"embed":Oe("load",i);break;case"video":case"audio":for(a=0;a<Nl.length;a++)Oe(Nl[a],i);break;case"source":Oe("error",i);break;case"img":case"image":case"link":Oe("error",i),Oe("load",i);break;case"details":Oe("toggle",i);break;case"input":Oe("invalid",i),Pu(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":Oe("invalid",i);break;case"textarea":Oe("invalid",i),br(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||_v(i.textContent,a)?(l.popover!=null&&(Oe("beforetoggle",i),Oe("toggle",i)),l.onScroll!=null&&Oe("scroll",i),l.onScrollEnd!=null&&Oe("scrollend",i),l.onClick!=null&&(i.onclick=Wn),i=!0):i=!1,i||Dr(t,!0)}function ny(t){for(Kt=t.return;Kt;)switch(Kt.tag){case 5:case 31:case 13:jn=!1;return;case 27:case 3:jn=!0;return;default:Kt=Kt.return}}function za(t){if(t!==Kt)return!1;if(!ze)return ny(t),ze=!0,!1;var i=t.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||np(t.type,t.memoizedProps)),a=!a),a&&st&&Dr(t),ny(t),i===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));st=xv(t)}else if(i===31){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));st=xv(t)}else i===27?(i=st,Gr(t.type)?(t=op,op=null,st=t):st=i):st=Kt?qn(t.stateNode.nextSibling):null;return!0}function js(){st=Kt=null,ze=!1}function zf(){var t=Nr;return t!==null&&(mn===null?mn=t:mn.push.apply(mn,t),Nr=null),t}function ll(t){Nr===null?Nr=[t]:Nr.push(t)}var jf=O(null),Bs=null,Wi=null;function kr(t,i,a){te(jf,i._currentValue),i._currentValue=a}function Ji(t){t._currentValue=jf.current,G(jf)}function Bf(t,i,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&i)!==i?(t.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),t===a)break;t=t.return}}function qf(t,i,a,l){var h=t.child;for(h!==null&&(h.return=t);h!==null;){var d=h.dependencies;if(d!==null){var _=h.child;d=d.firstContext;e:for(;d!==null;){var b=d;d=h;for(var k=0;k<i.length;k++)if(b.context===i[k]){d.lanes|=a,b=d.alternate,b!==null&&(b.lanes|=a),Bf(d.return,a,t),l||(_=null);break e}d=b.next}}else if(h.tag===18){if(_=h.return,_===null)throw Error(s(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),Bf(_,a,t),_=null}else _=h.child;if(_!==null)_.return=h;else for(_=h;_!==null;){if(_===t){_=null;break}if(h=_.sibling,h!==null){h.return=_.return,_=h;break}_=_.return}h=_}}function ja(t,i,a,l){t=null;for(var h=i,d=!1;h!==null;){if(!d){if((h.flags&524288)!==0)d=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var _=h.alternate;if(_===null)throw Error(s(387));if(_=_.memoizedProps,_!==null){var b=h.type;Tn(h.pendingProps.value,_.value)||(t!==null?t.push(b):t=[b])}}else if(h===qe.current){if(_=h.alternate,_===null)throw Error(s(387));_.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(t!==null?t.push(Vl):t=[Vl])}h=h.return}t!==null&&qf(i,t,a,l),i.flags|=262144}function ac(t){for(t=t.firstContext;t!==null;){if(!Tn(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function qs(t){Bs=t,Wi=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Qt(t){return iy(Bs,t)}function oc(t,i){return Bs===null&&qs(t),iy(t,i)}function iy(t,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Wi===null){if(t===null)throw Error(s(308));Wi=i,t.dependencies={lanes:0,firstContext:i},t.flags|=524288}else Wi=Wi.next=i;return a}var LA=typeof AbortController<"u"?AbortController:function(){var t=[],i=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){i.aborted=!0,t.forEach(function(a){return a()})}},UA=r.unstable_scheduleCallback,PA=r.unstable_NormalPriority,It={$$typeof:se,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Hf(){return{controller:new LA,data:new Map,refCount:0}}function ul(t){t.refCount--,t.refCount===0&&UA(PA,function(){t.controller.abort()})}var cl=null,Ff=0,Ba=0,qa=null;function zA(t,i){if(cl===null){var a=cl=[];Ff=0,Ba=Kd(),qa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Ff++,i.then(ry,ry),i}function ry(){if(--Ff===0&&cl!==null){qa!==null&&(qa.status="fulfilled");var t=cl;cl=null,Ba=0,qa=null;for(var i=0;i<t.length;i++)(0,t[i])()}}function jA(t,i){var a=[],l={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return t.then(function(){l.status="fulfilled",l.value=i;for(var h=0;h<a.length;h++)(0,a[h])(i)},function(h){for(l.status="rejected",l.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),l}var sy=B.S;B.S=function(t,i){q_=an(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&zA(t,i),sy!==null&&sy(t,i)};var Hs=O(null);function Gf(){var t=Hs.current;return t!==null?t:nt.pooledCache}function lc(t,i){i===null?te(Hs,Hs.current):te(Hs,i.pool)}function ay(){var t=Gf();return t===null?null:{parent:It._currentValue,pool:t}}var Ha=Error(s(460)),Yf=Error(s(474)),uc=Error(s(542)),cc={then:function(){}};function oy(t){return t=t.status,t==="fulfilled"||t==="rejected"}function ly(t,i,a){switch(a=t[a],a===void 0?t.push(i):a!==i&&(i.then(Wn,Wn),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,cy(t),t;default:if(typeof i.status=="string")i.then(Wn,Wn);else{if(t=nt,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=i,t.status="pending",t.then(function(l){if(i.status==="pending"){var h=i;h.status="fulfilled",h.value=l}},function(l){if(i.status==="pending"){var h=i;h.status="rejected",h.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw t=i.reason,cy(t),t}throw Gs=i,Ha}}function Fs(t){try{var i=t._init;return i(t._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Gs=a,Ha):a}}var Gs=null;function uy(){if(Gs===null)throw Error(s(459));var t=Gs;return Gs=null,t}function cy(t){if(t===Ha||t===uc)throw Error(s(483))}var Fa=null,hl=0;function hc(t){var i=hl;return hl+=1,Fa===null&&(Fa=[]),ly(Fa,t,i)}function fl(t,i){i=i.props.ref,t.ref=i!==void 0?i:null}function fc(t,i){throw i.$$typeof===w?Error(s(525)):(t=Object.prototype.toString.call(i),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":t)))}function hy(t){function i(L,V){if(t){var z=L.deletions;z===null?(L.deletions=[V],L.flags|=16):z.push(V)}}function a(L,V){if(!t)return null;for(;V!==null;)i(L,V),V=V.sibling;return null}function l(L){for(var V=new Map;L!==null;)L.key!==null?V.set(L.key,L):V.set(L.index,L),L=L.sibling;return V}function h(L,V){return L=Xi(L,V),L.index=0,L.sibling=null,L}function d(L,V,z){return L.index=z,t?(z=L.alternate,z!==null?(z=z.index,z<V?(L.flags|=67108866,V):z):(L.flags|=67108866,V)):(L.flags|=1048576,V)}function _(L){return t&&L.alternate===null&&(L.flags|=67108866),L}function b(L,V,z,Q){return V===null||V.tag!==6?(V=Mf(z,L.mode,Q),V.return=L,V):(V=h(V,z),V.return=L,V)}function k(L,V,z,Q){var ye=z.type;return ye===J?Y(L,V,z.props.children,Q,z.key):V!==null&&(V.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===x&&Fs(ye)===V.type)?(V=h(V,z.props),fl(V,z),V.return=L,V):(V=rc(z.type,z.key,z.props,null,L.mode,Q),fl(V,z),V.return=L,V)}function j(L,V,z,Q){return V===null||V.tag!==4||V.stateNode.containerInfo!==z.containerInfo||V.stateNode.implementation!==z.implementation?(V=Vf(z,L.mode,Q),V.return=L,V):(V=h(V,z.children||[]),V.return=L,V)}function Y(L,V,z,Q,ye){return V===null||V.tag!==7?(V=zs(z,L.mode,Q,ye),V.return=L,V):(V=h(V,z),V.return=L,V)}function X(L,V,z){if(typeof V=="string"&&V!==""||typeof V=="number"||typeof V=="bigint")return V=Mf(""+V,L.mode,z),V.return=L,V;if(typeof V=="object"&&V!==null){switch(V.$$typeof){case P:return z=rc(V.type,V.key,V.props,null,L.mode,z),fl(z,V),z.return=L,z;case K:return V=Vf(V,L.mode,z),V.return=L,V;case x:return V=Fs(V),X(L,V,z)}if(rt(V)||M(V))return V=zs(V,L.mode,z,null),V.return=L,V;if(typeof V.then=="function")return X(L,hc(V),z);if(V.$$typeof===se)return X(L,oc(L,V),z);fc(L,V)}return null}function q(L,V,z,Q){var ye=V!==null?V.key:null;if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return ye!==null?null:b(L,V,""+z,Q);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case P:return z.key===ye?k(L,V,z,Q):null;case K:return z.key===ye?j(L,V,z,Q):null;case x:return z=Fs(z),q(L,V,z,Q)}if(rt(z)||M(z))return ye!==null?null:Y(L,V,z,Q,null);if(typeof z.then=="function")return q(L,V,hc(z),Q);if(z.$$typeof===se)return q(L,V,oc(L,z),Q);fc(L,z)}return null}function F(L,V,z,Q,ye){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return L=L.get(z)||null,b(V,L,""+Q,ye);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case P:return L=L.get(Q.key===null?z:Q.key)||null,k(V,L,Q,ye);case K:return L=L.get(Q.key===null?z:Q.key)||null,j(V,L,Q,ye);case x:return Q=Fs(Q),F(L,V,z,Q,ye)}if(rt(Q)||M(Q))return L=L.get(z)||null,Y(V,L,Q,ye,null);if(typeof Q.then=="function")return F(L,V,z,hc(Q),ye);if(Q.$$typeof===se)return F(L,V,z,oc(V,Q),ye);fc(V,Q)}return null}function fe(L,V,z,Q){for(var ye=null,Fe=null,de=V,De=V=0,Ve=null;de!==null&&De<z.length;De++){de.index>De?(Ve=de,de=null):Ve=de.sibling;var Ge=q(L,de,z[De],Q);if(Ge===null){de===null&&(de=Ve);break}t&&de&&Ge.alternate===null&&i(L,de),V=d(Ge,V,De),Fe===null?ye=Ge:Fe.sibling=Ge,Fe=Ge,de=Ve}if(De===z.length)return a(L,de),ze&&$i(L,De),ye;if(de===null){for(;De<z.length;De++)de=X(L,z[De],Q),de!==null&&(V=d(de,V,De),Fe===null?ye=de:Fe.sibling=de,Fe=de);return ze&&$i(L,De),ye}for(de=l(de);De<z.length;De++)Ve=F(de,L,De,z[De],Q),Ve!==null&&(t&&Ve.alternate!==null&&de.delete(Ve.key===null?De:Ve.key),V=d(Ve,V,De),Fe===null?ye=Ve:Fe.sibling=Ve,Fe=Ve);return t&&de.forEach(function($r){return i(L,$r)}),ze&&$i(L,De),ye}function ve(L,V,z,Q){if(z==null)throw Error(s(151));for(var ye=null,Fe=null,de=V,De=V=0,Ve=null,Ge=z.next();de!==null&&!Ge.done;De++,Ge=z.next()){de.index>De?(Ve=de,de=null):Ve=de.sibling;var $r=q(L,de,Ge.value,Q);if($r===null){de===null&&(de=Ve);break}t&&de&&$r.alternate===null&&i(L,de),V=d($r,V,De),Fe===null?ye=$r:Fe.sibling=$r,Fe=$r,de=Ve}if(Ge.done)return a(L,de),ze&&$i(L,De),ye;if(de===null){for(;!Ge.done;De++,Ge=z.next())Ge=X(L,Ge.value,Q),Ge!==null&&(V=d(Ge,V,De),Fe===null?ye=Ge:Fe.sibling=Ge,Fe=Ge);return ze&&$i(L,De),ye}for(de=l(de);!Ge.done;De++,Ge=z.next())Ge=F(de,L,De,Ge.value,Q),Ge!==null&&(t&&Ge.alternate!==null&&de.delete(Ge.key===null?De:Ge.key),V=d(Ge,V,De),Fe===null?ye=Ge:Fe.sibling=Ge,Fe=Ge);return t&&de.forEach(function(WS){return i(L,WS)}),ze&&$i(L,De),ye}function tt(L,V,z,Q){if(typeof z=="object"&&z!==null&&z.type===J&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case P:e:{for(var ye=z.key;V!==null;){if(V.key===ye){if(ye=z.type,ye===J){if(V.tag===7){a(L,V.sibling),Q=h(V,z.props.children),Q.return=L,L=Q;break e}}else if(V.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===x&&Fs(ye)===V.type){a(L,V.sibling),Q=h(V,z.props),fl(Q,z),Q.return=L,L=Q;break e}a(L,V);break}else i(L,V);V=V.sibling}z.type===J?(Q=zs(z.props.children,L.mode,Q,z.key),Q.return=L,L=Q):(Q=rc(z.type,z.key,z.props,null,L.mode,Q),fl(Q,z),Q.return=L,L=Q)}return _(L);case K:e:{for(ye=z.key;V!==null;){if(V.key===ye)if(V.tag===4&&V.stateNode.containerInfo===z.containerInfo&&V.stateNode.implementation===z.implementation){a(L,V.sibling),Q=h(V,z.children||[]),Q.return=L,L=Q;break e}else{a(L,V);break}else i(L,V);V=V.sibling}Q=Vf(z,L.mode,Q),Q.return=L,L=Q}return _(L);case x:return z=Fs(z),tt(L,V,z,Q)}if(rt(z))return fe(L,V,z,Q);if(M(z)){if(ye=M(z),typeof ye!="function")throw Error(s(150));return z=ye.call(z),ve(L,V,z,Q)}if(typeof z.then=="function")return tt(L,V,hc(z),Q);if(z.$$typeof===se)return tt(L,V,oc(L,z),Q);fc(L,z)}return typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint"?(z=""+z,V!==null&&V.tag===6?(a(L,V.sibling),Q=h(V,z),Q.return=L,L=Q):(a(L,V),Q=Mf(z,L.mode,Q),Q.return=L,L=Q),_(L)):a(L,V)}return function(L,V,z,Q){try{hl=0;var ye=tt(L,V,z,Q);return Fa=null,ye}catch(de){if(de===Ha||de===uc)throw de;var Fe=bn(29,de,null,L.mode);return Fe.lanes=Q,Fe.return=L,Fe}}}var Ys=hy(!0),fy=hy(!1),Or=!1;function Kf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Qf(t,i){t=t.updateQueue,i.updateQueue===t&&(i.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Mr(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Vr(t,i,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(Ke&2)!==0){var h=l.pending;return h===null?i.next=i:(i.next=h.next,h.next=i),l.pending=i,i=ic(t),Xg(t,null,a),i}return nc(t,l,i,a),ic(t)}function dl(t,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,jo(t,a)}}function Xf(t,i){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var h=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?h=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?h=d=i:d=d.next=i}else h=d=i;a={baseState:l.baseState,firstBaseUpdate:h,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=i:t.next=i,a.lastBaseUpdate=i}var $f=!1;function pl(){if($f){var t=qa;if(t!==null)throw t}}function ml(t,i,a,l){$f=!1;var h=t.updateQueue;Or=!1;var d=h.firstBaseUpdate,_=h.lastBaseUpdate,b=h.shared.pending;if(b!==null){h.shared.pending=null;var k=b,j=k.next;k.next=null,_===null?d=j:_.next=j,_=k;var Y=t.alternate;Y!==null&&(Y=Y.updateQueue,b=Y.lastBaseUpdate,b!==_&&(b===null?Y.firstBaseUpdate=j:b.next=j,Y.lastBaseUpdate=k))}if(d!==null){var X=h.baseState;_=0,Y=j=k=null,b=d;do{var q=b.lane&-536870913,F=q!==b.lane;if(F?(Me&q)===q:(l&q)===q){q!==0&&q===Ba&&($f=!0),Y!==null&&(Y=Y.next={lane:0,tag:b.tag,payload:b.payload,callback:null,next:null});e:{var fe=t,ve=b;q=i;var tt=a;switch(ve.tag){case 1:if(fe=ve.payload,typeof fe=="function"){X=fe.call(tt,X,q);break e}X=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=ve.payload,q=typeof fe=="function"?fe.call(tt,X,q):fe,q==null)break e;X=S({},X,q);break e;case 2:Or=!0}}q=b.callback,q!==null&&(t.flags|=64,F&&(t.flags|=8192),F=h.callbacks,F===null?h.callbacks=[q]:F.push(q))}else F={lane:q,tag:b.tag,payload:b.payload,callback:b.callback,next:null},Y===null?(j=Y=F,k=X):Y=Y.next=F,_|=q;if(b=b.next,b===null){if(b=h.shared.pending,b===null)break;F=b,b=F.next,F.next=null,h.lastBaseUpdate=F,h.shared.pending=null}}while(!0);Y===null&&(k=X),h.baseState=k,h.firstBaseUpdate=j,h.lastBaseUpdate=Y,d===null&&(h.shared.lanes=0),jr|=_,t.lanes=_,t.memoizedState=X}}function dy(t,i){if(typeof t!="function")throw Error(s(191,t));t.call(i)}function py(t,i){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)dy(a[t],i)}var Ga=O(null),dc=O(0);function my(t,i){t=or,te(dc,t),te(Ga,i),or=t|i.baseLanes}function Wf(){te(dc,or),te(Ga,Ga.current)}function Jf(){or=dc.current,G(Ga),G(dc)}var An=O(null),Bn=null;function Lr(t){var i=t.alternate;te(Et,Et.current&1),te(An,t),Bn===null&&(i===null||Ga.current!==null||i.memoizedState!==null)&&(Bn=t)}function Zf(t){te(Et,Et.current),te(An,t),Bn===null&&(Bn=t)}function gy(t){t.tag===22?(te(Et,Et.current),te(An,t),Bn===null&&(Bn=t)):Ur()}function Ur(){te(Et,Et.current),te(An,An.current)}function Sn(t){G(An),Bn===t&&(Bn=null),G(Et)}var Et=O(0);function pc(t){for(var i=t;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||sp(a)||ap(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Zi=0,Ie=null,Ze=null,Nt=null,mc=!1,Ya=!1,Ks=!1,gc=0,gl=0,Ka=null,BA=0;function pt(){throw Error(s(321))}function ed(t,i){if(i===null)return!1;for(var a=0;a<i.length&&a<t.length;a++)if(!Tn(t[a],i[a]))return!1;return!0}function td(t,i,a,l,h,d){return Zi=d,Ie=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,B.H=t===null||t.memoizedState===null?Zy:gd,Ks=!1,d=a(l,h),Ks=!1,Ya&&(d=_y(i,a,l,h)),yy(t),d}function yy(t){B.H=vl;var i=Ze!==null&&Ze.next!==null;if(Zi=0,Nt=Ze=Ie=null,mc=!1,gl=0,Ka=null,i)throw Error(s(300));t===null||Dt||(t=t.dependencies,t!==null&&ac(t)&&(Dt=!0))}function _y(t,i,a,l){Ie=t;var h=0;do{if(Ya&&(Ka=null),gl=0,Ya=!1,25<=h)throw Error(s(301));if(h+=1,Nt=Ze=null,t.updateQueue!=null){var d=t.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}B.H=e_,d=i(a,l)}while(Ya);return d}function qA(){var t=B.H,i=t.useState()[0];return i=typeof i.then=="function"?yl(i):i,t=t.useState()[0],(Ze!==null?Ze.memoizedState:null)!==t&&(Ie.flags|=1024),i}function nd(){var t=gc!==0;return gc=0,t}function id(t,i,a){i.updateQueue=t.updateQueue,i.flags&=-2053,t.lanes&=~a}function rd(t){if(mc){for(t=t.memoizedState;t!==null;){var i=t.queue;i!==null&&(i.pending=null),t=t.next}mc=!1}Zi=0,Nt=Ze=Ie=null,Ya=!1,gl=gc=0,Ka=null}function ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nt===null?Ie.memoizedState=Nt=t:Nt=Nt.next=t,Nt}function Tt(){if(Ze===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Ze.next;var i=Nt===null?Ie.memoizedState:Nt.next;if(i!==null)Nt=i,Ze=t;else{if(t===null)throw Ie.alternate===null?Error(s(467)):Error(s(310));Ze=t,t={memoizedState:Ze.memoizedState,baseState:Ze.baseState,baseQueue:Ze.baseQueue,queue:Ze.queue,next:null},Nt===null?Ie.memoizedState=Nt=t:Nt=Nt.next=t}return Nt}function yc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function yl(t){var i=gl;return gl+=1,Ka===null&&(Ka=[]),t=ly(Ka,t,i),i=Ie,(Nt===null?i.memoizedState:Nt.next)===null&&(i=i.alternate,B.H=i===null||i.memoizedState===null?Zy:gd),t}function _c(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return yl(t);if(t.$$typeof===se)return Qt(t)}throw Error(s(438,String(t)))}function sd(t){var i=null,a=Ie.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Ie.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(h){return h.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=yc(),Ie.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(t),l=0;l<t;l++)a[l]=I;return i.index++,a}function er(t,i){return typeof i=="function"?i(t):i}function vc(t){var i=Tt();return ad(i,Ze,t)}function ad(t,i,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var h=t.baseQueue,d=l.pending;if(d!==null){if(h!==null){var _=h.next;h.next=d.next,d.next=_}i.baseQueue=h=d,l.pending=null}if(d=t.baseState,h===null)t.memoizedState=d;else{i=h.next;var b=_=null,k=null,j=i,Y=!1;do{var X=j.lane&-536870913;if(X!==j.lane?(Me&X)===X:(Zi&X)===X){var q=j.revertLane;if(q===0)k!==null&&(k=k.next={lane:0,revertLane:0,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),X===Ba&&(Y=!0);else if((Zi&q)===q){j=j.next,q===Ba&&(Y=!0);continue}else X={lane:0,revertLane:j.revertLane,gesture:null,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},k===null?(b=k=X,_=d):k=k.next=X,Ie.lanes|=q,jr|=q;X=j.action,Ks&&a(d,X),d=j.hasEagerState?j.eagerState:a(d,X)}else q={lane:X,revertLane:j.revertLane,gesture:j.gesture,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null},k===null?(b=k=q,_=d):k=k.next=q,Ie.lanes|=X,jr|=X;j=j.next}while(j!==null&&j!==i);if(k===null?_=d:k.next=b,!Tn(d,t.memoizedState)&&(Dt=!0,Y&&(a=qa,a!==null)))throw a;t.memoizedState=d,t.baseState=_,t.baseQueue=k,l.lastRenderedState=d}return h===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function od(t){var i=Tt(),a=i.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,h=a.pending,d=i.memoizedState;if(h!==null){a.pending=null;var _=h=h.next;do d=t(d,_.action),_=_.next;while(_!==h);Tn(d,i.memoizedState)||(Dt=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function vy(t,i,a){var l=Ie,h=Tt(),d=ze;if(d){if(a===void 0)throw Error(s(407));a=a()}else a=i();var _=!Tn((Ze||h).memoizedState,a);if(_&&(h.memoizedState=a,Dt=!0),h=h.queue,cd(by.bind(null,l,h,t),[t]),h.getSnapshot!==i||_||Nt!==null&&Nt.memoizedState.tag&1){if(l.flags|=2048,Qa(9,{destroy:void 0},Ty.bind(null,l,h,a,i),null),nt===null)throw Error(s(349));d||(Zi&127)!==0||Ey(l,i,a)}return a}function Ey(t,i,a){t.flags|=16384,t={getSnapshot:i,value:a},i=Ie.updateQueue,i===null?(i=yc(),Ie.updateQueue=i,i.stores=[t]):(a=i.stores,a===null?i.stores=[t]:a.push(t))}function Ty(t,i,a,l){i.value=a,i.getSnapshot=l,Ay(i)&&Sy(t)}function by(t,i,a){return a(function(){Ay(i)&&Sy(t)})}function Ay(t){var i=t.getSnapshot;t=t.value;try{var a=i();return!Tn(t,a)}catch{return!0}}function Sy(t){var i=Ps(t,2);i!==null&&gn(i,t,2)}function ld(t){var i=ln();if(typeof t=="function"){var a=t;if(t=a(),Ks){Dn(!0);try{a()}finally{Dn(!1)}}}return i.memoizedState=i.baseState=t,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:t},i}function wy(t,i,a,l){return t.baseState=a,ad(t,Ze,typeof l=="function"?l:er)}function HA(t,i,a,l,h){if(bc(t))throw Error(s(485));if(t=i.action,t!==null){var d={payload:h,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};B.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,Ry(i,d)):(d.next=a.next,i.pending=a.next=d)}}function Ry(t,i){var a=i.action,l=i.payload,h=t.state;if(i.isTransition){var d=B.T,_={};B.T=_;try{var b=a(h,l),k=B.S;k!==null&&k(_,b),xy(t,i,b)}catch(j){ud(t,i,j)}finally{d!==null&&_.types!==null&&(d.types=_.types),B.T=d}}else try{d=a(h,l),xy(t,i,d)}catch(j){ud(t,i,j)}}function xy(t,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Cy(t,i,l)},function(l){return ud(t,i,l)}):Cy(t,i,a)}function Cy(t,i,a){i.status="fulfilled",i.value=a,Iy(i),t.state=a,i=t.pending,i!==null&&(a=i.next,a===i?t.pending=null:(a=a.next,i.next=a,Ry(t,a)))}function ud(t,i,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,Iy(i),i=i.next;while(i!==l)}t.action=null}function Iy(t){t=t.listeners;for(var i=0;i<t.length;i++)(0,t[i])()}function Ny(t,i){return i}function Dy(t,i){if(ze){var a=nt.formState;if(a!==null){e:{var l=Ie;if(ze){if(st){t:{for(var h=st,d=jn;h.nodeType!==8;){if(!d){h=null;break t}if(h=qn(h.nextSibling),h===null){h=null;break t}}d=h.data,h=d==="F!"||d==="F"?h:null}if(h){st=qn(h.nextSibling),l=h.data==="F!";break e}}Dr(l)}l=!1}l&&(i=a[0])}}return a=ln(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ny,lastRenderedState:i},a.queue=l,a=$y.bind(null,Ie,l),l.dispatch=a,l=ld(!1),d=md.bind(null,Ie,!1,l.queue),l=ln(),h={state:i,dispatch:null,action:t,pending:null},l.queue=h,a=HA.bind(null,Ie,h,d,a),h.dispatch=a,l.memoizedState=t,[i,a,!1]}function ky(t){var i=Tt();return Oy(i,Ze,t)}function Oy(t,i,a){if(i=ad(t,i,Ny)[0],t=vc(er)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=yl(i)}catch(_){throw _===Ha?uc:_}else l=i;i=Tt();var h=i.queue,d=h.dispatch;return a!==i.memoizedState&&(Ie.flags|=2048,Qa(9,{destroy:void 0},FA.bind(null,h,a),null)),[l,d,t]}function FA(t,i){t.action=i}function My(t){var i=Tt(),a=Ze;if(a!==null)return Oy(i,a,t);Tt(),i=i.memoizedState,a=Tt();var l=a.queue.dispatch;return a.memoizedState=t,[i,l,!1]}function Qa(t,i,a,l){return t={tag:t,create:a,deps:l,inst:i,next:null},i=Ie.updateQueue,i===null&&(i=yc(),Ie.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,i.lastEffect=t),t}function Vy(){return Tt().memoizedState}function Ec(t,i,a,l){var h=ln();Ie.flags|=t,h.memoizedState=Qa(1|i,{destroy:void 0},a,l===void 0?null:l)}function Tc(t,i,a,l){var h=Tt();l=l===void 0?null:l;var d=h.memoizedState.inst;Ze!==null&&l!==null&&ed(l,Ze.memoizedState.deps)?h.memoizedState=Qa(i,d,a,l):(Ie.flags|=t,h.memoizedState=Qa(1|i,d,a,l))}function Ly(t,i){Ec(8390656,8,t,i)}function cd(t,i){Tc(2048,8,t,i)}function GA(t){Ie.flags|=4;var i=Ie.updateQueue;if(i===null)i=yc(),Ie.updateQueue=i,i.events=[t];else{var a=i.events;a===null?i.events=[t]:a.push(t)}}function Uy(t){var i=Tt().memoizedState;return GA({ref:i,nextImpl:t}),function(){if((Ke&2)!==0)throw Error(s(440));return i.impl.apply(void 0,arguments)}}function Py(t,i){return Tc(4,2,t,i)}function zy(t,i){return Tc(4,4,t,i)}function jy(t,i){if(typeof i=="function"){t=t();var a=i(t);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return t=t(),i.current=t,function(){i.current=null}}function By(t,i,a){a=a!=null?a.concat([t]):null,Tc(4,4,jy.bind(null,i,t),a)}function hd(){}function qy(t,i){var a=Tt();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&ed(i,l[1])?l[0]:(a.memoizedState=[t,i],t)}function Hy(t,i){var a=Tt();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&ed(i,l[1]))return l[0];if(l=t(),Ks){Dn(!0);try{t()}finally{Dn(!1)}}return a.memoizedState=[l,i],l}function fd(t,i,a){return a===void 0||(Zi&1073741824)!==0&&(Me&261930)===0?t.memoizedState=i:(t.memoizedState=a,t=F_(),Ie.lanes|=t,jr|=t,a)}function Fy(t,i,a,l){return Tn(a,i)?a:Ga.current!==null?(t=fd(t,a,l),Tn(t,i)||(Dt=!0),t):(Zi&42)===0||(Zi&1073741824)!==0&&(Me&261930)===0?(Dt=!0,t.memoizedState=a):(t=F_(),Ie.lanes|=t,jr|=t,i)}function Gy(t,i,a,l,h){var d=ee.p;ee.p=d!==0&&8>d?d:8;var _=B.T,b={};B.T=b,md(t,!1,i,a);try{var k=h(),j=B.S;if(j!==null&&j(b,k),k!==null&&typeof k=="object"&&typeof k.then=="function"){var Y=jA(k,l);_l(t,i,Y,xn(t))}else _l(t,i,l,xn(t))}catch(X){_l(t,i,{then:function(){},status:"rejected",reason:X},xn())}finally{ee.p=d,_!==null&&b.types!==null&&(_.types=b.types),B.T=_}}function YA(){}function dd(t,i,a,l){if(t.tag!==5)throw Error(s(476));var h=Yy(t).queue;Gy(t,h,i,ie,a===null?YA:function(){return Ky(t),a(l)})}function Yy(t){var i=t.memoizedState;if(i!==null)return i;i={memoizedState:ie,baseState:ie,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:ie},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:er,lastRenderedState:a},next:null},t.memoizedState=i,t=t.alternate,t!==null&&(t.memoizedState=i),i}function Ky(t){var i=Yy(t);i.next===null&&(i=t.alternate.memoizedState),_l(t,i.next.queue,{},xn())}function pd(){return Qt(Vl)}function Qy(){return Tt().memoizedState}function Xy(){return Tt().memoizedState}function KA(t){for(var i=t.return;i!==null;){switch(i.tag){case 24:case 3:var a=xn();t=Mr(a);var l=Vr(i,t,a);l!==null&&(gn(l,i,a),dl(l,i,a)),i={cache:Hf()},t.payload=i;return}i=i.return}}function QA(t,i,a){var l=xn();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},bc(t)?Wy(i,a):(a=kf(t,i,a,l),a!==null&&(gn(a,t,l),Jy(a,i,l)))}function $y(t,i,a){var l=xn();_l(t,i,a,l)}function _l(t,i,a,l){var h={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(bc(t))Wy(i,h);else{var d=t.alternate;if(t.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,b=d(_,a);if(h.hasEagerState=!0,h.eagerState=b,Tn(b,_))return nc(t,i,h,0),nt===null&&tc(),!1}catch{}if(a=kf(t,i,h,l),a!==null)return gn(a,t,l),Jy(a,i,l),!0}return!1}function md(t,i,a,l){if(l={lane:2,revertLane:Kd(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},bc(t)){if(i)throw Error(s(479))}else i=kf(t,a,l,2),i!==null&&gn(i,t,2)}function bc(t){var i=t.alternate;return t===Ie||i!==null&&i===Ie}function Wy(t,i){Ya=mc=!0;var a=t.pending;a===null?i.next=i:(i.next=a.next,a.next=i),t.pending=i}function Jy(t,i,a){if((a&4194048)!==0){var l=i.lanes;l&=t.pendingLanes,a|=l,i.lanes=a,jo(t,a)}}var vl={readContext:Qt,use:_c,useCallback:pt,useContext:pt,useEffect:pt,useImperativeHandle:pt,useLayoutEffect:pt,useInsertionEffect:pt,useMemo:pt,useReducer:pt,useRef:pt,useState:pt,useDebugValue:pt,useDeferredValue:pt,useTransition:pt,useSyncExternalStore:pt,useId:pt,useHostTransitionStatus:pt,useFormState:pt,useActionState:pt,useOptimistic:pt,useMemoCache:pt,useCacheRefresh:pt};vl.useEffectEvent=pt;var Zy={readContext:Qt,use:_c,useCallback:function(t,i){return ln().memoizedState=[t,i===void 0?null:i],t},useContext:Qt,useEffect:Ly,useImperativeHandle:function(t,i,a){a=a!=null?a.concat([t]):null,Ec(4194308,4,jy.bind(null,i,t),a)},useLayoutEffect:function(t,i){return Ec(4194308,4,t,i)},useInsertionEffect:function(t,i){Ec(4,2,t,i)},useMemo:function(t,i){var a=ln();i=i===void 0?null:i;var l=t();if(Ks){Dn(!0);try{t()}finally{Dn(!1)}}return a.memoizedState=[l,i],l},useReducer:function(t,i,a){var l=ln();if(a!==void 0){var h=a(i);if(Ks){Dn(!0);try{a(i)}finally{Dn(!1)}}}else h=i;return l.memoizedState=l.baseState=h,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:h},l.queue=t,t=t.dispatch=QA.bind(null,Ie,t),[l.memoizedState,t]},useRef:function(t){var i=ln();return t={current:t},i.memoizedState=t},useState:function(t){t=ld(t);var i=t.queue,a=$y.bind(null,Ie,i);return i.dispatch=a,[t.memoizedState,a]},useDebugValue:hd,useDeferredValue:function(t,i){var a=ln();return fd(a,t,i)},useTransition:function(){var t=ld(!1);return t=Gy.bind(null,Ie,t.queue,!0,!1),ln().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,i,a){var l=Ie,h=ln();if(ze){if(a===void 0)throw Error(s(407));a=a()}else{if(a=i(),nt===null)throw Error(s(349));(Me&127)!==0||Ey(l,i,a)}h.memoizedState=a;var d={value:a,getSnapshot:i};return h.queue=d,Ly(by.bind(null,l,d,t),[t]),l.flags|=2048,Qa(9,{destroy:void 0},Ty.bind(null,l,d,a,i),null),a},useId:function(){var t=ln(),i=nt.identifierPrefix;if(ze){var a=Ni,l=Ii;a=(l&~(1<<32-_t(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=gc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=BA++,i="_"+i+"r_"+a.toString(32)+"_";return t.memoizedState=i},useHostTransitionStatus:pd,useFormState:Dy,useActionState:Dy,useOptimistic:function(t){var i=ln();i.memoizedState=i.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=md.bind(null,Ie,!0,a),a.dispatch=i,[t,i]},useMemoCache:sd,useCacheRefresh:function(){return ln().memoizedState=KA.bind(null,Ie)},useEffectEvent:function(t){var i=ln(),a={impl:t};return i.memoizedState=a,function(){if((Ke&2)!==0)throw Error(s(440));return a.impl.apply(void 0,arguments)}}},gd={readContext:Qt,use:_c,useCallback:qy,useContext:Qt,useEffect:cd,useImperativeHandle:By,useInsertionEffect:Py,useLayoutEffect:zy,useMemo:Hy,useReducer:vc,useRef:Vy,useState:function(){return vc(er)},useDebugValue:hd,useDeferredValue:function(t,i){var a=Tt();return Fy(a,Ze.memoizedState,t,i)},useTransition:function(){var t=vc(er)[0],i=Tt().memoizedState;return[typeof t=="boolean"?t:yl(t),i]},useSyncExternalStore:vy,useId:Qy,useHostTransitionStatus:pd,useFormState:ky,useActionState:ky,useOptimistic:function(t,i){var a=Tt();return wy(a,Ze,t,i)},useMemoCache:sd,useCacheRefresh:Xy};gd.useEffectEvent=Uy;var e_={readContext:Qt,use:_c,useCallback:qy,useContext:Qt,useEffect:cd,useImperativeHandle:By,useInsertionEffect:Py,useLayoutEffect:zy,useMemo:Hy,useReducer:od,useRef:Vy,useState:function(){return od(er)},useDebugValue:hd,useDeferredValue:function(t,i){var a=Tt();return Ze===null?fd(a,t,i):Fy(a,Ze.memoizedState,t,i)},useTransition:function(){var t=od(er)[0],i=Tt().memoizedState;return[typeof t=="boolean"?t:yl(t),i]},useSyncExternalStore:vy,useId:Qy,useHostTransitionStatus:pd,useFormState:My,useActionState:My,useOptimistic:function(t,i){var a=Tt();return Ze!==null?wy(a,Ze,t,i):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:sd,useCacheRefresh:Xy};e_.useEffectEvent=Uy;function yd(t,i,a,l){i=t.memoizedState,a=a(l,i),a=a==null?i:S({},i,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var _d={enqueueSetState:function(t,i,a){t=t._reactInternals;var l=xn(),h=Mr(l);h.payload=i,a!=null&&(h.callback=a),i=Vr(t,h,l),i!==null&&(gn(i,t,l),dl(i,t,l))},enqueueReplaceState:function(t,i,a){t=t._reactInternals;var l=xn(),h=Mr(l);h.tag=1,h.payload=i,a!=null&&(h.callback=a),i=Vr(t,h,l),i!==null&&(gn(i,t,l),dl(i,t,l))},enqueueForceUpdate:function(t,i){t=t._reactInternals;var a=xn(),l=Mr(a);l.tag=2,i!=null&&(l.callback=i),i=Vr(t,l,a),i!==null&&(gn(i,t,a),dl(i,t,a))}};function t_(t,i,a,l,h,d,_){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!sl(a,l)||!sl(h,d):!0}function n_(t,i,a,l){t=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==t&&_d.enqueueReplaceState(i,i.state,null)}function Qs(t,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(t=t.defaultProps){a===i&&(a=S({},a));for(var h in t)a[h]===void 0&&(a[h]=t[h])}return a}function i_(t){ec(t)}function r_(t){console.error(t)}function s_(t){ec(t)}function Ac(t,i){try{var a=t.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function a_(t,i,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function vd(t,i,a){return a=Mr(a),a.tag=3,a.payload={element:null},a.callback=function(){Ac(t,i)},a}function o_(t){return t=Mr(t),t.tag=3,t}function l_(t,i,a,l){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var d=l.value;t.payload=function(){return h(d)},t.callback=function(){a_(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(t.callback=function(){a_(i,a,l),typeof h!="function"&&(Br===null?Br=new Set([this]):Br.add(this));var b=l.stack;this.componentDidCatch(l.value,{componentStack:b!==null?b:""})})}function XA(t,i,a,l,h){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&ja(i,a,h,!0),a=An.current,a!==null){switch(a.tag){case 31:case 13:return Bn===null?Vc():a.alternate===null&&mt===0&&(mt=3),a.flags&=-257,a.flags|=65536,a.lanes=h,l===cc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),Fd(t,l,h)),!1;case 22:return a.flags|=65536,l===cc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),Fd(t,l,h)),!1}throw Error(s(435,a.tag))}return Fd(t,l,h),Vc(),!1}if(ze)return i=An.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=h,l!==Pf&&(t=Error(s(422),{cause:l}),ll(Un(t,a)))):(l!==Pf&&(i=Error(s(423),{cause:l}),ll(Un(i,a))),t=t.current.alternate,t.flags|=65536,h&=-h,t.lanes|=h,l=Un(l,a),h=vd(t.stateNode,l,h),Xf(t,h),mt!==4&&(mt=2)),!1;var d=Error(s(520),{cause:l});if(d=Un(d,a),xl===null?xl=[d]:xl.push(d),mt!==4&&(mt=2),i===null)return!0;l=Un(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,t=h&-h,a.lanes|=t,t=vd(a.stateNode,l,t),Xf(a,t),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Br===null||!Br.has(d))))return a.flags|=65536,h&=-h,a.lanes|=h,h=o_(h),l_(h,t,a,l),Xf(a,h),!1}a=a.return}while(a!==null);return!1}var Ed=Error(s(461)),Dt=!1;function Xt(t,i,a,l){i.child=t===null?fy(i,null,a,l):Ys(i,t.child,a,l)}function u_(t,i,a,l,h){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var b in l)b!=="ref"&&(_[b]=l[b])}else _=l;return qs(i),l=td(t,i,a,_,d,h),b=nd(),t!==null&&!Dt?(id(t,i,h),tr(t,i,h)):(ze&&b&&Lf(i),i.flags|=1,Xt(t,i,l,h),i.child)}function c_(t,i,a,l,h){if(t===null){var d=a.type;return typeof d=="function"&&!Of(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,h_(t,i,d,l,h)):(t=rc(a.type,null,l,i,i.mode,h),t.ref=i.ref,t.return=i,i.child=t)}if(d=t.child,!Cd(t,h)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:sl,a(_,l)&&t.ref===i.ref)return tr(t,i,h)}return i.flags|=1,t=Xi(d,l),t.ref=i.ref,t.return=i,i.child=t}function h_(t,i,a,l,h){if(t!==null){var d=t.memoizedProps;if(sl(d,l)&&t.ref===i.ref)if(Dt=!1,i.pendingProps=l=d,Cd(t,h))(t.flags&131072)!==0&&(Dt=!0);else return i.lanes=t.lanes,tr(t,i,h)}return Td(t,i,a,l,h)}function f_(t,i,a,l){var h=l.children,d=t!==null?t.memoizedState:null;if(t===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,t!==null){for(l=i.child=t.child,h=0;l!==null;)h=h|l.lanes|l.childLanes,l=l.sibling;l=h&~d}else l=0,i.child=null;return d_(t,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},t!==null&&lc(i,d!==null?d.cachePool:null),d!==null?my(i,d):Wf(),gy(i);else return l=i.lanes=536870912,d_(t,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(lc(i,d.cachePool),my(i,d),Ur(),i.memoizedState=null):(t!==null&&lc(i,null),Wf(),Ur());return Xt(t,i,h,a),i.child}function El(t,i){return t!==null&&t.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function d_(t,i,a,l,h){var d=Gf();return d=d===null?null:{parent:It._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},t!==null&&lc(i,null),Wf(),gy(i),t!==null&&ja(t,i,l,!0),i.childLanes=h,null}function Sc(t,i){return i=Rc({mode:i.mode,children:i.children},t.mode),i.ref=t.ref,t.child=i,i.return=t,i}function p_(t,i,a){return Ys(i,t.child,null,a),t=Sc(i,i.pendingProps),t.flags|=2,Sn(i),i.memoizedState=null,t}function $A(t,i,a){var l=i.pendingProps,h=(i.flags&128)!==0;if(i.flags&=-129,t===null){if(ze){if(l.mode==="hidden")return t=Sc(i,l),i.lanes=536870912,El(null,t);if(Zf(i),(t=st)?(t=Rv(t,jn),t=t!==null&&t.data==="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ir!==null?{id:Ii,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},a=Wg(t),a.return=i,i.child=a,Kt=i,st=null)):t=null,t===null)throw Dr(i);return i.lanes=536870912,null}return Sc(i,l)}var d=t.memoizedState;if(d!==null){var _=d.dehydrated;if(Zf(i),h)if(i.flags&256)i.flags&=-257,i=p_(t,i,a);else if(i.memoizedState!==null)i.child=t.child,i.flags|=128,i=null;else throw Error(s(558));else if(Dt||ja(t,i,a,!1),h=(a&t.childLanes)!==0,Dt||h){if(l=nt,l!==null&&(_=Bo(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Ps(t,_),gn(l,t,_),Ed;Vc(),i=p_(t,i,a)}else t=d.treeContext,st=qn(_.nextSibling),Kt=i,ze=!0,Nr=null,jn=!1,t!==null&&ey(i,t),i=Sc(i,l),i.flags|=4096;return i}return t=Xi(t.child,{mode:l.mode,children:l.children}),t.ref=i.ref,i.child=t,t.return=i,t}function wc(t,i){var a=i.ref;if(a===null)t!==null&&t.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(i.flags|=4194816)}}function Td(t,i,a,l,h){return qs(i),a=td(t,i,a,l,void 0,h),l=nd(),t!==null&&!Dt?(id(t,i,h),tr(t,i,h)):(ze&&l&&Lf(i),i.flags|=1,Xt(t,i,a,h),i.child)}function m_(t,i,a,l,h,d){return qs(i),i.updateQueue=null,a=_y(i,l,a,h),yy(t),l=nd(),t!==null&&!Dt?(id(t,i,d),tr(t,i,d)):(ze&&l&&Lf(i),i.flags|=1,Xt(t,i,a,d),i.child)}function g_(t,i,a,l,h){if(qs(i),i.stateNode===null){var d=La,_=a.contextType;typeof _=="object"&&_!==null&&(d=Qt(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=_d,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},Kf(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?Qt(_):La,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(yd(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&_d.enqueueReplaceState(d,d.state,null),ml(i,l,d,h),pl(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(t===null){d=i.stateNode;var b=i.memoizedProps,k=Qs(a,b);d.props=k;var j=d.context,Y=a.contextType;_=La,typeof Y=="object"&&Y!==null&&(_=Qt(Y));var X=a.getDerivedStateFromProps;Y=typeof X=="function"||typeof d.getSnapshotBeforeUpdate=="function",b=i.pendingProps!==b,Y||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(b||j!==_)&&n_(i,d,l,_),Or=!1;var q=i.memoizedState;d.state=q,ml(i,l,d,h),pl(),j=i.memoizedState,b||q!==j||Or?(typeof X=="function"&&(yd(i,a,X,l),j=i.memoizedState),(k=Or||t_(i,a,k,l,q,j,_))?(Y||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=j),d.props=l,d.state=j,d.context=_,l=k):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,Qf(t,i),_=i.memoizedProps,Y=Qs(a,_),d.props=Y,X=i.pendingProps,q=d.context,j=a.contextType,k=La,typeof j=="object"&&j!==null&&(k=Qt(j)),b=a.getDerivedStateFromProps,(j=typeof b=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==X||q!==k)&&n_(i,d,l,k),Or=!1,q=i.memoizedState,d.state=q,ml(i,l,d,h),pl();var F=i.memoizedState;_!==X||q!==F||Or||t!==null&&t.dependencies!==null&&ac(t.dependencies)?(typeof b=="function"&&(yd(i,a,b,l),F=i.memoizedState),(Y=Or||t_(i,a,Y,l,q,F,k)||t!==null&&t.dependencies!==null&&ac(t.dependencies))?(j||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,F,k),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,F,k)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=F),d.props=l,d.state=F,d.context=k,l=Y):(typeof d.componentDidUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===t.memoizedProps&&q===t.memoizedState||(i.flags|=1024),l=!1)}return d=l,wc(t,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,t!==null&&l?(i.child=Ys(i,t.child,null,h),i.child=Ys(i,null,a,h)):Xt(t,i,a,h),i.memoizedState=d.state,t=i.child):t=tr(t,i,h),t}function y_(t,i,a,l){return js(),i.flags|=256,Xt(t,i,a,l),i.child}var bd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ad(t){return{baseLanes:t,cachePool:ay()}}function Sd(t,i,a){return t=t!==null?t.childLanes&~a:0,i&&(t|=Rn),t}function __(t,i,a){var l=i.pendingProps,h=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=t!==null&&t.memoizedState===null?!1:(Et.current&2)!==0),_&&(h=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,t===null){if(ze){if(h?Lr(i):Ur(),(t=st)?(t=Rv(t,jn),t=t!==null&&t.data!=="&"?t:null,t!==null&&(i.memoizedState={dehydrated:t,treeContext:Ir!==null?{id:Ii,overflow:Ni}:null,retryLane:536870912,hydrationErrors:null},a=Wg(t),a.return=i,i.child=a,Kt=i,st=null)):t=null,t===null)throw Dr(i);return ap(t)?i.lanes=32:i.lanes=536870912,null}var b=l.children;return l=l.fallback,h?(Ur(),h=i.mode,b=Rc({mode:"hidden",children:b},h),l=zs(l,h,a,null),b.return=i,l.return=i,b.sibling=l,i.child=b,l=i.child,l.memoizedState=Ad(a),l.childLanes=Sd(t,_,a),i.memoizedState=bd,El(null,l)):(Lr(i),wd(i,b))}var k=t.memoizedState;if(k!==null&&(b=k.dehydrated,b!==null)){if(d)i.flags&256?(Lr(i),i.flags&=-257,i=Rd(t,i,a)):i.memoizedState!==null?(Ur(),i.child=t.child,i.flags|=128,i=null):(Ur(),b=l.fallback,h=i.mode,l=Rc({mode:"visible",children:l.children},h),b=zs(b,h,a,null),b.flags|=2,l.return=i,b.return=i,l.sibling=b,i.child=l,Ys(i,t.child,null,a),l=i.child,l.memoizedState=Ad(a),l.childLanes=Sd(t,_,a),i.memoizedState=bd,i=El(null,l));else if(Lr(i),ap(b)){if(_=b.nextSibling&&b.nextSibling.dataset,_)var j=_.dgst;_=j,l=Error(s(419)),l.stack="",l.digest=_,ll({value:l,source:null,stack:null}),i=Rd(t,i,a)}else if(Dt||ja(t,i,a,!1),_=(a&t.childLanes)!==0,Dt||_){if(_=nt,_!==null&&(l=Bo(_,a),l!==0&&l!==k.retryLane))throw k.retryLane=l,Ps(t,l),gn(_,t,l),Ed;sp(b)||Vc(),i=Rd(t,i,a)}else sp(b)?(i.flags|=192,i.child=t.child,i=null):(t=k.treeContext,st=qn(b.nextSibling),Kt=i,ze=!0,Nr=null,jn=!1,t!==null&&ey(i,t),i=wd(i,l.children),i.flags|=4096);return i}return h?(Ur(),b=l.fallback,h=i.mode,k=t.child,j=k.sibling,l=Xi(k,{mode:"hidden",children:l.children}),l.subtreeFlags=k.subtreeFlags&65011712,j!==null?b=Xi(j,b):(b=zs(b,h,a,null),b.flags|=2),b.return=i,l.return=i,l.sibling=b,i.child=l,El(null,l),l=i.child,b=t.child.memoizedState,b===null?b=Ad(a):(h=b.cachePool,h!==null?(k=It._currentValue,h=h.parent!==k?{parent:k,pool:k}:h):h=ay(),b={baseLanes:b.baseLanes|a,cachePool:h}),l.memoizedState=b,l.childLanes=Sd(t,_,a),i.memoizedState=bd,El(t.child,l)):(Lr(i),a=t.child,t=a.sibling,a=Xi(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,t!==null&&(_=i.deletions,_===null?(i.deletions=[t],i.flags|=16):_.push(t)),i.child=a,i.memoizedState=null,a)}function wd(t,i){return i=Rc({mode:"visible",children:i},t.mode),i.return=t,t.child=i}function Rc(t,i){return t=bn(22,t,null,i),t.lanes=0,t}function Rd(t,i,a){return Ys(i,t.child,null,a),t=wd(i,i.pendingProps.children),t.flags|=2,i.memoizedState=null,t}function v_(t,i,a){t.lanes|=i;var l=t.alternate;l!==null&&(l.lanes|=i),Bf(t.return,i,a)}function xd(t,i,a,l,h,d){var _=t.memoizedState;_===null?t.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:h,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=h,_.treeForkCount=d)}function E_(t,i,a){var l=i.pendingProps,h=l.revealOrder,d=l.tail;l=l.children;var _=Et.current,b=(_&2)!==0;if(b?(_=_&1|2,i.flags|=128):_&=1,te(Et,_),Xt(t,i,l,a),l=ze?ol:0,!b&&t!==null&&(t.flags&128)!==0)e:for(t=i.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&v_(t,a,i);else if(t.tag===19)v_(t,a,i);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===i)break e;for(;t.sibling===null;){if(t.return===null||t.return===i)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}switch(h){case"forwards":for(a=i.child,h=null;a!==null;)t=a.alternate,t!==null&&pc(t)===null&&(h=a),a=a.sibling;a=h,a===null?(h=i.child,i.child=null):(h=a.sibling,a.sibling=null),xd(i,!1,h,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=i.child,i.child=null;h!==null;){if(t=h.alternate,t!==null&&pc(t)===null){i.child=h;break}t=h.sibling,h.sibling=a,a=h,h=t}xd(i,!0,a,null,d,l);break;case"together":xd(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function tr(t,i,a){if(t!==null&&(i.dependencies=t.dependencies),jr|=i.lanes,(a&i.childLanes)===0)if(t!==null){if(ja(t,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(t!==null&&i.child!==t.child)throw Error(s(153));if(i.child!==null){for(t=i.child,a=Xi(t,t.pendingProps),i.child=a,a.return=i;t.sibling!==null;)t=t.sibling,a=a.sibling=Xi(t,t.pendingProps),a.return=i;a.sibling=null}return i.child}function Cd(t,i){return(t.lanes&i)!==0?!0:(t=t.dependencies,!!(t!==null&&ac(t)))}function WA(t,i,a){switch(i.tag){case 3:Ut(i,i.stateNode.containerInfo),kr(i,It,t.memoizedState.cache),js();break;case 27:case 5:Es(i);break;case 4:Ut(i,i.stateNode.containerInfo);break;case 10:kr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,Zf(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Lr(i),i.flags|=128,null):(a&i.child.childLanes)!==0?__(t,i,a):(Lr(i),t=tr(t,i,a),t!==null?t.sibling:null);Lr(i);break;case 19:var h=(t.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(ja(t,i,a,!1),l=(a&i.childLanes)!==0),h){if(l)return E_(t,i,a);i.flags|=128}if(h=i.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),te(Et,Et.current),l)break;return null;case 22:return i.lanes=0,f_(t,i,a,i.pendingProps);case 24:kr(i,It,t.memoizedState.cache)}return tr(t,i,a)}function T_(t,i,a){if(t!==null)if(t.memoizedProps!==i.pendingProps)Dt=!0;else{if(!Cd(t,a)&&(i.flags&128)===0)return Dt=!1,WA(t,i,a);Dt=(t.flags&131072)!==0}else Dt=!1,ze&&(i.flags&1048576)!==0&&Zg(i,ol,i.index);switch(i.lanes=0,i.tag){case 16:e:{var l=i.pendingProps;if(t=Fs(i.elementType),i.type=t,typeof t=="function")Of(t)?(l=Qs(t,l),i.tag=1,i=g_(null,i,t,l,a)):(i.tag=0,i=Td(null,i,t,l,a));else{if(t!=null){var h=t.$$typeof;if(h===pe){i.tag=11,i=u_(null,i,t,l,a);break e}else if(h===N){i.tag=14,i=c_(null,i,t,l,a);break e}}throw i=Be(t)||t,Error(s(306,i,""))}}return i;case 0:return Td(t,i,i.type,i.pendingProps,a);case 1:return l=i.type,h=Qs(l,i.pendingProps),g_(t,i,l,h,a);case 3:e:{if(Ut(i,i.stateNode.containerInfo),t===null)throw Error(s(387));l=i.pendingProps;var d=i.memoizedState;h=d.element,Qf(t,i),ml(i,l,null,a);var _=i.memoizedState;if(l=_.cache,kr(i,It,l),l!==d.cache&&qf(i,[It],a,!0),pl(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=y_(t,i,l,a);break e}else if(l!==h){h=Un(Error(s(424)),i),ll(h),i=y_(t,i,l,a);break e}else for(t=i.stateNode.containerInfo,t.nodeType===9?t=t.body:t=t.nodeName==="HTML"?t.ownerDocument.body:t,st=qn(t.firstChild),Kt=i,ze=!0,Nr=null,jn=!0,a=fy(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(js(),l===h){i=tr(t,i,a);break e}Xt(t,i,l,a)}i=i.child}return i;case 26:return wc(t,i),t===null?(a=kv(i.type,null,i.pendingProps,null))?i.memoizedState=a:ze||(a=i.type,t=i.pendingProps,l=qc(Ne.current).createElement(a),l[Rt]=i,l[Bt]=t,$t(l,a,t),xt(l),i.stateNode=l):i.memoizedState=kv(i.type,t.memoizedProps,i.pendingProps,t.memoizedState),null;case 27:return Es(i),t===null&&ze&&(l=i.stateNode=Iv(i.type,i.pendingProps,Ne.current),Kt=i,jn=!0,h=st,Gr(i.type)?(op=h,st=qn(l.firstChild)):st=h),Xt(t,i,i.pendingProps.children,a),wc(t,i),t===null&&(i.flags|=4194304),i.child;case 5:return t===null&&ze&&((h=l=st)&&(l=xS(l,i.type,i.pendingProps,jn),l!==null?(i.stateNode=l,Kt=i,st=qn(l.firstChild),jn=!1,h=!0):h=!1),h||Dr(i)),Es(i),h=i.type,d=i.pendingProps,_=t!==null?t.memoizedProps:null,l=d.children,np(h,d)?l=null:_!==null&&np(h,_)&&(i.flags|=32),i.memoizedState!==null&&(h=td(t,i,qA,null,null,a),Vl._currentValue=h),wc(t,i),Xt(t,i,l,a),i.child;case 6:return t===null&&ze&&((t=a=st)&&(a=CS(a,i.pendingProps,jn),a!==null?(i.stateNode=a,Kt=i,st=null,t=!0):t=!1),t||Dr(i)),null;case 13:return __(t,i,a);case 4:return Ut(i,i.stateNode.containerInfo),l=i.pendingProps,t===null?i.child=Ys(i,null,l,a):Xt(t,i,l,a),i.child;case 11:return u_(t,i,i.type,i.pendingProps,a);case 7:return Xt(t,i,i.pendingProps,a),i.child;case 8:return Xt(t,i,i.pendingProps.children,a),i.child;case 12:return Xt(t,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,kr(i,i.type,l.value),Xt(t,i,l.children,a),i.child;case 9:return h=i.type._context,l=i.pendingProps.children,qs(i),h=Qt(h),l=l(h),i.flags|=1,Xt(t,i,l,a),i.child;case 14:return c_(t,i,i.type,i.pendingProps,a);case 15:return h_(t,i,i.type,i.pendingProps,a);case 19:return E_(t,i,a);case 31:return $A(t,i,a);case 22:return f_(t,i,a,i.pendingProps);case 24:return qs(i),l=Qt(It),t===null?(h=Gf(),h===null&&(h=nt,d=Hf(),h.pooledCache=d,d.refCount++,d!==null&&(h.pooledCacheLanes|=a),h=d),i.memoizedState={parent:l,cache:h},Kf(i),kr(i,It,h)):((t.lanes&a)!==0&&(Qf(t,i),ml(i,null,null,a),pl()),h=t.memoizedState,d=i.memoizedState,h.parent!==l?(h={parent:l,cache:l},i.memoizedState=h,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=h),kr(i,It,l)):(l=d.cache,kr(i,It,l),l!==h.cache&&qf(i,[It],a,!0))),Xt(t,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(s(156,i.tag))}function nr(t){t.flags|=4}function Id(t,i,a,l,h){if((i=(t.mode&32)!==0)&&(i=!1),i){if(t.flags|=16777216,(h&335544128)===h)if(t.stateNode.complete)t.flags|=8192;else if(Q_())t.flags|=8192;else throw Gs=cc,Yf}else t.flags&=-16777217}function b_(t,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Uv(i))if(Q_())t.flags|=8192;else throw Gs=cc,Yf}function xc(t,i){i!==null&&(t.flags|=4),t.flags&16384&&(i=t.tag!==22?Ou():536870912,t.lanes|=i,Ja|=i)}function Tl(t,i){if(!ze)switch(t.tailMode){case"hidden":i=t.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function at(t){var i=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(i)for(var h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags&65011712,l|=h.flags&65011712,h.return=t,h=h.sibling;else for(h=t.child;h!==null;)a|=h.lanes|h.childLanes,l|=h.subtreeFlags,l|=h.flags,h.return=t,h=h.sibling;return t.subtreeFlags|=l,t.childLanes=a,i}function JA(t,i,a){var l=i.pendingProps;switch(Uf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(i),null;case 1:return at(i),null;case 3:return a=i.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),Ji(It),ut(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(za(i)?nr(i):t===null||t.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,zf())),at(i),null;case 26:var h=i.type,d=i.memoizedState;return t===null?(nr(i),d!==null?(at(i),b_(i,d)):(at(i),Id(i,h,null,l,a))):d?d!==t.memoizedState?(nr(i),at(i),b_(i,d)):(at(i),i.flags&=-16777217):(t=t.memoizedProps,t!==l&&nr(i),at(i),Id(i,h,t,l,a)),null;case 27:if(ya(i),a=Ne.current,h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&nr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return at(i),null}t=ae.current,za(i)?ty(i):(t=Iv(h,l,a),i.stateNode=t,nr(i))}return at(i),null;case 5:if(ya(i),h=i.type,t!==null&&i.stateNode!=null)t.memoizedProps!==l&&nr(i);else{if(!l){if(i.stateNode===null)throw Error(s(166));return at(i),null}if(d=ae.current,za(i))ty(i);else{var _=qc(Ne.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(h,{is:l.is}):_.createElement(h)}}d[Rt]=i,d[Bt]=l;e:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break e;for(;_.sibling===null;){if(_.return===null||_.return===i)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;e:switch($t(d,h,l),h){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break e;case"img":l=!0;break e;default:l=!1}l&&nr(i)}}return at(i),Id(i,i.type,t===null?null:t.memoizedProps,i.pendingProps,a),null;case 6:if(t&&i.stateNode!=null)t.memoizedProps!==l&&nr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(s(166));if(t=Ne.current,za(i)){if(t=i.stateNode,a=i.memoizedProps,l=null,h=Kt,h!==null)switch(h.tag){case 27:case 5:l=h.memoizedProps}t[Rt]=i,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||_v(t.nodeValue,a)),t||Dr(i,!0)}else t=qc(t).createTextNode(l),t[Rt]=i,i.stateNode=t}return at(i),null;case 31:if(a=i.memoizedState,t===null||t.memoizedState!==null){if(l=za(i),a!==null){if(t===null){if(!l)throw Error(s(318));if(t=i.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(557));t[Rt]=i}else js(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;at(i),t=!1}else a=zf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=a),t=!0;if(!t)return i.flags&256?(Sn(i),i):(Sn(i),null);if((i.flags&128)!==0)throw Error(s(558))}return at(i),null;case 13:if(l=i.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(h=za(i),l!==null&&l.dehydrated!==null){if(t===null){if(!h)throw Error(s(318));if(h=i.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(s(317));h[Rt]=i}else js(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;at(i),h=!1}else h=zf(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=h),h=!0;if(!h)return i.flags&256?(Sn(i),i):(Sn(i),null)}return Sn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,t=t!==null&&t.memoizedState!==null,a&&(l=i.child,h=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(h=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==h&&(l.flags|=2048)),a!==t&&a&&(i.child.flags|=8192),xc(i,i.updateQueue),at(i),null);case 4:return ut(),t===null&&Wd(i.stateNode.containerInfo),at(i),null;case 10:return Ji(i.type),at(i),null;case 19:if(G(Et),l=i.memoizedState,l===null)return at(i),null;if(h=(i.flags&128)!==0,d=l.rendering,d===null)if(h)Tl(l,!1);else{if(mt!==0||t!==null&&(t.flags&128)!==0)for(t=i.child;t!==null;){if(d=pc(t),d!==null){for(i.flags|=128,Tl(l,!1),t=d.updateQueue,i.updateQueue=t,xc(i,t),i.subtreeFlags=0,t=a,a=i.child;a!==null;)$g(a,t),a=a.sibling;return te(Et,Et.current&1|2),ze&&$i(i,l.treeForkCount),i.child}t=t.sibling}l.tail!==null&&an()>kc&&(i.flags|=128,h=!0,Tl(l,!1),i.lanes=4194304)}else{if(!h)if(t=pc(d),t!==null){if(i.flags|=128,h=!0,t=t.updateQueue,i.updateQueue=t,xc(i,t),Tl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!ze)return at(i),null}else 2*an()-l.renderingStartTime>kc&&a!==536870912&&(i.flags|=128,h=!0,Tl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(t=l.last,t!==null?t.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=an(),t.sibling=null,a=Et.current,te(Et,h?a&1|2:a&1),ze&&$i(i,l.treeForkCount),t):(at(i),null);case 22:case 23:return Sn(i),Jf(),l=i.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(at(i),i.subtreeFlags&6&&(i.flags|=8192)):at(i),a=i.updateQueue,a!==null&&xc(i,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),t!==null&&G(Hs),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),Ji(It),at(i),null;case 25:return null;case 30:return null}throw Error(s(156,i.tag))}function ZA(t,i){switch(Uf(i),i.tag){case 1:return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 3:return Ji(It),ut(),t=i.flags,(t&65536)!==0&&(t&128)===0?(i.flags=t&-65537|128,i):null;case 26:case 27:case 5:return ya(i),null;case 31:if(i.memoizedState!==null){if(Sn(i),i.alternate===null)throw Error(s(340));js()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 13:if(Sn(i),t=i.memoizedState,t!==null&&t.dehydrated!==null){if(i.alternate===null)throw Error(s(340));js()}return t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 19:return G(Et),null;case 4:return ut(),null;case 10:return Ji(i.type),null;case 22:case 23:return Sn(i),Jf(),t!==null&&G(Hs),t=i.flags,t&65536?(i.flags=t&-65537|128,i):null;case 24:return Ji(It),null;case 25:return null;default:return null}}function A_(t,i){switch(Uf(i),i.tag){case 3:Ji(It),ut();break;case 26:case 27:case 5:ya(i);break;case 4:ut();break;case 31:i.memoizedState!==null&&Sn(i);break;case 13:Sn(i);break;case 19:G(Et);break;case 10:Ji(i.type);break;case 22:case 23:Sn(i),Jf(),t!==null&&G(Hs);break;case 24:Ji(It)}}function bl(t,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var h=l.next;a=h;do{if((a.tag&t)===t){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==h)}}catch(b){We(i,i.return,b)}}function Pr(t,i,a){try{var l=i.updateQueue,h=l!==null?l.lastEffect:null;if(h!==null){var d=h.next;l=d;do{if((l.tag&t)===t){var _=l.inst,b=_.destroy;if(b!==void 0){_.destroy=void 0,h=i;var k=a,j=b;try{j()}catch(Y){We(h,k,Y)}}}l=l.next}while(l!==d)}}catch(Y){We(i,i.return,Y)}}function S_(t){var i=t.updateQueue;if(i!==null){var a=t.stateNode;try{py(i,a)}catch(l){We(t,t.return,l)}}}function w_(t,i,a){a.props=Qs(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){We(t,i,l)}}function Al(t,i){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(h){We(t,i,h)}}function Di(t,i){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(h){We(t,i,h)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){We(t,i,h)}else a.current=null}function R_(t){var i=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(h){We(t,t.return,h)}}function Nd(t,i,a){try{var l=t.stateNode;TS(l,t.type,a,i),l[Bt]=i}catch(h){We(t,t.return,h)}}function x_(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&Gr(t.type)||t.tag===4}function Dd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||x_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&Gr(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kd(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(t),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Wn));else if(l!==4&&(l===27&&Gr(t.type)&&(a=t.stateNode,i=null),t=t.child,t!==null))for(kd(t,i,a),t=t.sibling;t!==null;)kd(t,i,a),t=t.sibling}function Cc(t,i,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,i?a.insertBefore(t,i):a.appendChild(t);else if(l!==4&&(l===27&&Gr(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Cc(t,i,a),t=t.sibling;t!==null;)Cc(t,i,a),t=t.sibling}function C_(t){var i=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,h=i.attributes;h.length;)i.removeAttributeNode(h[0]);$t(i,l,a),i[Rt]=t,i[Bt]=a}catch(d){We(t,t.return,d)}}var ir=!1,kt=!1,Od=!1,I_=typeof WeakSet=="function"?WeakSet:Set,Ht=null;function eS(t,i){if(t=t.containerInfo,ep=Xc,t=Bg(t),Rf(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var h=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break e}var _=0,b=-1,k=-1,j=0,Y=0,X=t,q=null;t:for(;;){for(var F;X!==a||h!==0&&X.nodeType!==3||(b=_+h),X!==d||l!==0&&X.nodeType!==3||(k=_+l),X.nodeType===3&&(_+=X.nodeValue.length),(F=X.firstChild)!==null;)q=X,X=F;for(;;){if(X===t)break t;if(q===a&&++j===h&&(b=_),q===d&&++Y===l&&(k=_),(F=X.nextSibling)!==null)break;X=q,q=X.parentNode}X=F}a=b===-1||k===-1?null:{start:b,end:k}}else a=null}a=a||{start:0,end:0}}else a=null;for(tp={focusedElem:t,selectionRange:a},Xc=!1,Ht=i;Ht!==null;)if(i=Ht,t=i.child,(i.subtreeFlags&1028)!==0&&t!==null)t.return=i,Ht=t;else for(;Ht!==null;){switch(i=Ht,d=i.alternate,t=i.flags,i.tag){case 0:if((t&4)!==0&&(t=i.updateQueue,t=t!==null?t.events:null,t!==null))for(a=0;a<t.length;a++)h=t[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((t&1024)!==0&&d!==null){t=void 0,a=i,h=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var fe=Qs(a.type,h);t=l.getSnapshotBeforeUpdate(fe,d),l.__reactInternalSnapshotBeforeUpdate=t}catch(ve){We(a,a.return,ve)}}break;case 3:if((t&1024)!==0){if(t=i.stateNode.containerInfo,a=t.nodeType,a===9)rp(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":rp(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=i.sibling,t!==null){t.return=i.return,Ht=t;break}Ht=i.return}}function N_(t,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:sr(t,a),l&4&&bl(5,a);break;case 1:if(sr(t,a),l&4)if(t=a.stateNode,i===null)try{t.componentDidMount()}catch(_){We(a,a.return,_)}else{var h=Qs(a.type,i.memoizedProps);i=i.memoizedState;try{t.componentDidUpdate(h,i,t.__reactInternalSnapshotBeforeUpdate)}catch(_){We(a,a.return,_)}}l&64&&S_(a),l&512&&Al(a,a.return);break;case 3:if(sr(t,a),l&64&&(t=a.updateQueue,t!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{py(t,i)}catch(_){We(a,a.return,_)}}break;case 27:i===null&&l&4&&C_(a);case 26:case 5:sr(t,a),i===null&&l&4&&R_(a),l&512&&Al(a,a.return);break;case 12:sr(t,a);break;case 31:sr(t,a),l&4&&O_(t,a);break;case 13:sr(t,a),l&4&&M_(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=uS.bind(null,a),IS(t,a))));break;case 22:if(l=a.memoizedState!==null||ir,!l){i=i!==null&&i.memoizedState!==null||kt,h=ir;var d=kt;ir=l,(kt=i)&&!d?ar(t,a,(a.subtreeFlags&8772)!==0):sr(t,a),ir=h,kt=d}break;case 30:break;default:sr(t,a)}}function D_(t){var i=t.alternate;i!==null&&(t.alternate=null,D_(i)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(i=t.stateNode,i!==null&&ba(i)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var ht=null,fn=!1;function rr(t,i,a){for(a=a.child;a!==null;)k_(t,i,a),a=a.sibling}function k_(t,i,a){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(Kn,a)}catch{}switch(a.tag){case 26:kt||Di(a,i),rr(t,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:kt||Di(a,i);var l=ht,h=fn;Gr(a.type)&&(ht=a.stateNode,fn=!1),rr(t,i,a),kl(a.stateNode),ht=l,fn=h;break;case 5:kt||Di(a,i);case 6:if(l=ht,h=fn,ht=null,rr(t,i,a),ht=l,fn=h,ht!==null)if(fn)try{(ht.nodeType===9?ht.body:ht.nodeName==="HTML"?ht.ownerDocument.body:ht).removeChild(a.stateNode)}catch(d){We(a,i,d)}else try{ht.removeChild(a.stateNode)}catch(d){We(a,i,d)}break;case 18:ht!==null&&(fn?(t=ht,Sv(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),ao(t)):Sv(ht,a.stateNode));break;case 4:l=ht,h=fn,ht=a.stateNode.containerInfo,fn=!0,rr(t,i,a),ht=l,fn=h;break;case 0:case 11:case 14:case 15:Pr(2,a,i),kt||Pr(4,a,i),rr(t,i,a);break;case 1:kt||(Di(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&w_(a,i,l)),rr(t,i,a);break;case 21:rr(t,i,a);break;case 22:kt=(l=kt)||a.memoizedState!==null,rr(t,i,a),kt=l;break;default:rr(t,i,a)}}function O_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null))){t=t.dehydrated;try{ao(t)}catch(a){We(i,i.return,a)}}}function M_(t,i){if(i.memoizedState===null&&(t=i.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{ao(t)}catch(a){We(i,i.return,a)}}function tS(t){switch(t.tag){case 31:case 13:case 19:var i=t.stateNode;return i===null&&(i=t.stateNode=new I_),i;case 22:return t=t.stateNode,i=t._retryCache,i===null&&(i=t._retryCache=new I_),i;default:throw Error(s(435,t.tag))}}function Ic(t,i){var a=tS(t);i.forEach(function(l){if(!a.has(l)){a.add(l);var h=cS.bind(null,t,l);l.then(h,h)}})}function dn(t,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var h=a[l],d=t,_=i,b=_;e:for(;b!==null;){switch(b.tag){case 27:if(Gr(b.type)){ht=b.stateNode,fn=!1;break e}break;case 5:ht=b.stateNode,fn=!1;break e;case 3:case 4:ht=b.stateNode.containerInfo,fn=!0;break e}b=b.return}if(ht===null)throw Error(s(160));k_(d,_,h),ht=null,fn=!1,d=h.alternate,d!==null&&(d.return=null),h.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)V_(i,t),i=i.sibling}var ii=null;function V_(t,i){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:dn(i,t),pn(t),l&4&&(Pr(3,t,t.return),bl(3,t),Pr(5,t,t.return));break;case 1:dn(i,t),pn(t),l&512&&(kt||a===null||Di(a,a.return)),l&64&&ir&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var h=ii;if(dn(i,t),pn(t),l&512&&(kt||a===null||Di(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,h=h.ownerDocument||h;t:switch(l){case"title":d=h.getElementsByTagName("title")[0],(!d||d[yi]||d[Rt]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=h.createElement(l),h.head.insertBefore(d,h.querySelector("head > title"))),$t(d,l,a),d[Rt]=t,xt(d),l=d;break e;case"link":var _=Vv("link","href",h).get(l+(a.href||""));if(_){for(var b=0;b<_.length;b++)if(d=_[b],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(b,1);break t}}d=h.createElement(l),$t(d,l,a),h.head.appendChild(d);break;case"meta":if(_=Vv("meta","content",h).get(l+(a.content||""))){for(b=0;b<_.length;b++)if(d=_[b],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(b,1);break t}}d=h.createElement(l),$t(d,l,a),h.head.appendChild(d);break;default:throw Error(s(468,l))}d[Rt]=t,xt(d),l=d}t.stateNode=l}else Lv(h,t.type,t.stateNode);else t.stateNode=Mv(h,l,t.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?Lv(h,t.type,t.stateNode):Mv(h,l,t.memoizedProps)):l===null&&t.stateNode!==null&&Nd(t,t.memoizedProps,a.memoizedProps)}break;case 27:dn(i,t),pn(t),l&512&&(kt||a===null||Di(a,a.return)),a!==null&&l&4&&Nd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(dn(i,t),pn(t),l&512&&(kt||a===null||Di(a,a.return)),t.flags&32){h=t.stateNode;try{hn(h,"")}catch(fe){We(t,t.return,fe)}}l&4&&t.stateNode!=null&&(h=t.memoizedProps,Nd(t,h,a!==null?a.memoizedProps:h)),l&1024&&(Od=!0);break;case 6:if(dn(i,t),pn(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(fe){We(t,t.return,fe)}}break;case 3:if(Gc=null,h=ii,ii=Hc(i.containerInfo),dn(i,t),ii=h,pn(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ao(i.containerInfo)}catch(fe){We(t,t.return,fe)}Od&&(Od=!1,L_(t));break;case 4:l=ii,ii=Hc(t.stateNode.containerInfo),dn(i,t),pn(t),ii=l;break;case 12:dn(i,t),pn(t);break;case 31:dn(i,t),pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ic(t,l)));break;case 13:dn(i,t),pn(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Dc=an()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ic(t,l)));break;case 22:h=t.memoizedState!==null;var k=a!==null&&a.memoizedState!==null,j=ir,Y=kt;if(ir=j||h,kt=Y||k,dn(i,t),kt=Y,ir=j,pn(t),l&8192)e:for(i=t.stateNode,i._visibility=h?i._visibility&-2:i._visibility|1,h&&(a===null||k||ir||kt||Xs(t)),a=null,i=t;;){if(i.tag===5||i.tag===26){if(a===null){k=a=i;try{if(d=k.stateNode,h)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{b=k.stateNode;var X=k.memoizedProps.style,q=X!=null&&X.hasOwnProperty("display")?X.display:null;b.style.display=q==null||typeof q=="boolean"?"":(""+q).trim()}}catch(fe){We(k,k.return,fe)}}}else if(i.tag===6){if(a===null){k=i;try{k.stateNode.nodeValue=h?"":k.memoizedProps}catch(fe){We(k,k.return,fe)}}}else if(i.tag===18){if(a===null){k=i;try{var F=k.stateNode;h?wv(F,!0):wv(k.stateNode,!1)}catch(fe){We(k,k.return,fe)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===t)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break e;for(;i.sibling===null;){if(i.return===null||i.return===t)break e;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Ic(t,a))));break;case 19:dn(i,t),pn(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Ic(t,l)));break;case 30:break;case 21:break;default:dn(i,t),pn(t)}}function pn(t){var i=t.flags;if(i&2){try{for(var a,l=t.return;l!==null;){if(x_(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var h=a.stateNode,d=Dd(t);Cc(t,d,h);break;case 5:var _=a.stateNode;a.flags&32&&(hn(_,""),a.flags&=-33);var b=Dd(t);Cc(t,b,_);break;case 3:case 4:var k=a.stateNode.containerInfo,j=Dd(t);kd(t,j,k);break;default:throw Error(s(161))}}catch(Y){We(t,t.return,Y)}t.flags&=-3}i&4096&&(t.flags&=-4097)}function L_(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var i=t;L_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),t=t.sibling}}function sr(t,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)N_(t,i.alternate,i),i=i.sibling}function Xs(t){for(t=t.child;t!==null;){var i=t;switch(i.tag){case 0:case 11:case 14:case 15:Pr(4,i,i.return),Xs(i);break;case 1:Di(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&w_(i,i.return,a),Xs(i);break;case 27:kl(i.stateNode);case 26:case 5:Di(i,i.return),Xs(i);break;case 22:i.memoizedState===null&&Xs(i);break;case 30:Xs(i);break;default:Xs(i)}t=t.sibling}}function ar(t,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,h=t,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:ar(h,d,a),bl(4,d);break;case 1:if(ar(h,d,a),l=d,h=l.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(j){We(l,l.return,j)}if(l=d,h=l.updateQueue,h!==null){var b=l.stateNode;try{var k=h.shared.hiddenCallbacks;if(k!==null)for(h.shared.hiddenCallbacks=null,h=0;h<k.length;h++)dy(k[h],b)}catch(j){We(l,l.return,j)}}a&&_&64&&S_(d),Al(d,d.return);break;case 27:C_(d);case 26:case 5:ar(h,d,a),a&&l===null&&_&4&&R_(d),Al(d,d.return);break;case 12:ar(h,d,a);break;case 31:ar(h,d,a),a&&_&4&&O_(h,d);break;case 13:ar(h,d,a),a&&_&4&&M_(h,d);break;case 22:d.memoizedState===null&&ar(h,d,a),Al(d,d.return);break;case 30:break;default:ar(h,d,a)}i=i.sibling}}function Md(t,i){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(t=i.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&ul(a))}function Vd(t,i){t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&ul(t))}function ri(t,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)U_(t,i,a,l),i=i.sibling}function U_(t,i,a,l){var h=i.flags;switch(i.tag){case 0:case 11:case 15:ri(t,i,a,l),h&2048&&bl(9,i);break;case 1:ri(t,i,a,l);break;case 3:ri(t,i,a,l),h&2048&&(t=null,i.alternate!==null&&(t=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==t&&(i.refCount++,t!=null&&ul(t)));break;case 12:if(h&2048){ri(t,i,a,l),t=i.stateNode;try{var d=i.memoizedProps,_=d.id,b=d.onPostCommit;typeof b=="function"&&b(_,i.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(k){We(i,i.return,k)}}else ri(t,i,a,l);break;case 31:ri(t,i,a,l);break;case 13:ri(t,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?ri(t,i,a,l):Sl(t,i):d._visibility&2?ri(t,i,a,l):(d._visibility|=2,Xa(t,i,a,l,(i.subtreeFlags&10256)!==0||!1)),h&2048&&Md(_,i);break;case 24:ri(t,i,a,l),h&2048&&Vd(i.alternate,i);break;default:ri(t,i,a,l)}}function Xa(t,i,a,l,h){for(h=h&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=t,_=i,b=a,k=l,j=_.flags;switch(_.tag){case 0:case 11:case 15:Xa(d,_,b,k,h),bl(8,_);break;case 23:break;case 22:var Y=_.stateNode;_.memoizedState!==null?Y._visibility&2?Xa(d,_,b,k,h):Sl(d,_):(Y._visibility|=2,Xa(d,_,b,k,h)),h&&j&2048&&Md(_.alternate,_);break;case 24:Xa(d,_,b,k,h),h&&j&2048&&Vd(_.alternate,_);break;default:Xa(d,_,b,k,h)}i=i.sibling}}function Sl(t,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=t,l=i,h=l.flags;switch(l.tag){case 22:Sl(a,l),h&2048&&Md(l.alternate,l);break;case 24:Sl(a,l),h&2048&&Vd(l.alternate,l);break;default:Sl(a,l)}i=i.sibling}}var wl=8192;function $a(t,i,a){if(t.subtreeFlags&wl)for(t=t.child;t!==null;)P_(t,i,a),t=t.sibling}function P_(t,i,a){switch(t.tag){case 26:$a(t,i,a),t.flags&wl&&t.memoizedState!==null&&BS(a,ii,t.memoizedState,t.memoizedProps);break;case 5:$a(t,i,a);break;case 3:case 4:var l=ii;ii=Hc(t.stateNode.containerInfo),$a(t,i,a),ii=l;break;case 22:t.memoizedState===null&&(l=t.alternate,l!==null&&l.memoizedState!==null?(l=wl,wl=16777216,$a(t,i,a),wl=l):$a(t,i,a));break;default:$a(t,i,a)}}function z_(t){var i=t.alternate;if(i!==null&&(t=i.child,t!==null)){i.child=null;do i=t.sibling,t.sibling=null,t=i;while(t!==null)}}function Rl(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ht=l,B_(l,t)}z_(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)j_(t),t=t.sibling}function j_(t){switch(t.tag){case 0:case 11:case 15:Rl(t),t.flags&2048&&Pr(9,t,t.return);break;case 3:Rl(t);break;case 12:Rl(t);break;case 22:var i=t.stateNode;t.memoizedState!==null&&i._visibility&2&&(t.return===null||t.return.tag!==13)?(i._visibility&=-3,Nc(t)):Rl(t);break;default:Rl(t)}}function Nc(t){var i=t.deletions;if((t.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Ht=l,B_(l,t)}z_(t)}for(t=t.child;t!==null;){switch(i=t,i.tag){case 0:case 11:case 15:Pr(8,i,i.return),Nc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Nc(i));break;default:Nc(i)}t=t.sibling}}function B_(t,i){for(;Ht!==null;){var a=Ht;switch(a.tag){case 0:case 11:case 15:Pr(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:ul(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Ht=l;else e:for(a=t;Ht!==null;){l=Ht;var h=l.sibling,d=l.return;if(D_(l),l===a){Ht=null;break e}if(h!==null){h.return=d,Ht=h;break e}Ht=d}}}var nS={getCacheForType:function(t){var i=Qt(It),a=i.data.get(t);return a===void 0&&(a=t(),i.data.set(t,a)),a},cacheSignal:function(){return Qt(It).controller.signal}},iS=typeof WeakMap=="function"?WeakMap:Map,Ke=0,nt=null,ke=null,Me=0,$e=0,wn=null,zr=!1,Wa=!1,Ld=!1,or=0,mt=0,jr=0,$s=0,Ud=0,Rn=0,Ja=0,xl=null,mn=null,Pd=!1,Dc=0,q_=0,kc=1/0,Oc=null,Br=null,zt=0,qr=null,Za=null,lr=0,zd=0,jd=null,H_=null,Cl=0,Bd=null;function xn(){return(Ke&2)!==0&&Me!==0?Me&-Me:B.T!==null?Kd():Mu()}function F_(){if(Rn===0)if((Me&536870912)===0||ze){var t=As;As<<=1,(As&3932160)===0&&(As=262144),Rn=t}else Rn=536870912;return t=An.current,t!==null&&(t.flags|=32),Rn}function gn(t,i,a){(t===nt&&($e===2||$e===9)||t.cancelPendingCommit!==null)&&(eo(t,0),Hr(t,Me,Rn,!1)),Ss(t,a),((Ke&2)===0||t!==nt)&&(t===nt&&((Ke&2)===0&&($s|=a),mt===4&&Hr(t,Me,Rn,!1)),ki(t))}function G_(t,i,a){if((Ke&6)!==0)throw Error(s(327));var l=!a&&(i&127)===0&&(i&t.expiredLanes)===0||Qn(t,i),h=l?aS(t,i):Hd(t,i,!0),d=l;do{if(h===0){Wa&&!l&&Hr(t,i,0,!1);break}else{if(a=t.current.alternate,d&&!rS(a)){h=Hd(t,i,!1),d=!1;continue}if(h===2){if(d=i,t.errorRecoveryDisabledLanes&d)var _=0;else _=t.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;e:{var b=t;h=xl;var k=b.current.memoizedState.isDehydrated;if(k&&(eo(b,_).flags|=256),_=Hd(b,_,!1),_!==2){if(Ld&&!k){b.errorRecoveryDisabledLanes|=d,$s|=d,h=4;break e}d=mn,mn=h,d!==null&&(mn===null?mn=d:mn.push.apply(mn,d))}h=_}if(d=!1,h!==2)continue}}if(h===1){eo(t,0),Hr(t,i,0,!0);break}e:{switch(l=t,d=h,d){case 0:case 1:throw Error(s(345));case 4:if((i&4194048)!==i)break;case 6:Hr(l,i,Rn,!zr);break e;case 2:mn=null;break;case 3:case 5:break;default:throw Error(s(329))}if((i&62914560)===i&&(h=Dc+300-an(),10<h)){if(Hr(l,i,Rn,!zr),pi(l,0,!0)!==0)break e;lr=i,l.timeoutHandle=bv(Y_.bind(null,l,a,mn,Oc,Pd,i,Rn,$s,Ja,zr,d,"Throttled",-0,0),h);break e}Y_(l,a,mn,Oc,Pd,i,Rn,$s,Ja,zr,d,null,-0,0)}}break}while(!0);ki(t)}function Y_(t,i,a,l,h,d,_,b,k,j,Y,X,q,F){if(t.timeoutHandle=-1,X=i.subtreeFlags,X&8192||(X&16785408)===16785408){X={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Wn},P_(i,d,X);var fe=(d&62914560)===d?Dc-an():(d&4194048)===d?q_-an():0;if(fe=qS(X,fe),fe!==null){lr=d,t.cancelPendingCommit=fe(ev.bind(null,t,i,d,a,l,h,_,b,k,Y,X,null,q,F)),Hr(t,d,_,!j);return}}ev(t,i,d,a,l,h,_,b,k)}function rS(t){for(var i=t;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var h=a[l],d=h.getSnapshot;h=h.value;try{if(!Tn(d(),h))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Hr(t,i,a,l){i&=~Ud,i&=~$s,t.suspendedLanes|=i,t.pingedLanes&=~i,l&&(t.warmLanes|=i),l=t.expirationTimes;for(var h=i;0<h;){var d=31-_t(h),_=1<<d;l[d]=-1,h&=~_}a!==0&&ws(t,a,i)}function Mc(){return(Ke&6)===0?(Il(0),!1):!0}function qd(){if(ke!==null){if($e===0)var t=ke.return;else t=ke,Wi=Bs=null,rd(t),Fa=null,hl=0,t=ke;for(;t!==null;)A_(t.alternate,t),t=t.return;ke=null}}function eo(t,i){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,SS(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),lr=0,qd(),nt=t,ke=a=Xi(t.current,null),Me=i,$e=0,wn=null,zr=!1,Wa=Qn(t,i),Ld=!1,Ja=Rn=Ud=$s=jr=mt=0,mn=xl=null,Pd=!1,(i&8)!==0&&(i|=i&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=i;0<l;){var h=31-_t(l),d=1<<h;i|=t[h],l&=~d}return or=i,tc(),a}function K_(t,i){Ie=null,B.H=vl,i===Ha||i===uc?(i=uy(),$e=3):i===Yf?(i=uy(),$e=4):$e=i===Ed?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,wn=i,ke===null&&(mt=1,Ac(t,Un(i,t.current)))}function Q_(){var t=An.current;return t===null?!0:(Me&4194048)===Me?Bn===null:(Me&62914560)===Me||(Me&536870912)!==0?t===Bn:!1}function X_(){var t=B.H;return B.H=vl,t===null?vl:t}function $_(){var t=B.A;return B.A=nS,t}function Vc(){mt=4,zr||(Me&4194048)!==Me&&An.current!==null||(Wa=!0),(jr&134217727)===0&&($s&134217727)===0||nt===null||Hr(nt,Me,Rn,!1)}function Hd(t,i,a){var l=Ke;Ke|=2;var h=X_(),d=$_();(nt!==t||Me!==i)&&(Oc=null,eo(t,i)),i=!1;var _=mt;e:do try{if($e!==0&&ke!==null){var b=ke,k=wn;switch($e){case 8:qd(),_=6;break e;case 3:case 2:case 9:case 6:An.current===null&&(i=!0);var j=$e;if($e=0,wn=null,to(t,b,k,j),a&&Wa){_=0;break e}break;default:j=$e,$e=0,wn=null,to(t,b,k,j)}}sS(),_=mt;break}catch(Y){K_(t,Y)}while(!0);return i&&t.shellSuspendCounter++,Wi=Bs=null,Ke=l,B.H=h,B.A=d,ke===null&&(nt=null,Me=0,tc()),_}function sS(){for(;ke!==null;)W_(ke)}function aS(t,i){var a=Ke;Ke|=2;var l=X_(),h=$_();nt!==t||Me!==i?(Oc=null,kc=an()+500,eo(t,i)):Wa=Qn(t,i);e:do try{if($e!==0&&ke!==null){i=ke;var d=wn;t:switch($e){case 1:$e=0,wn=null,to(t,i,d,1);break;case 2:case 9:if(oy(d)){$e=0,wn=null,J_(i);break}i=function(){$e!==2&&$e!==9||nt!==t||($e=7),ki(t)},d.then(i,i);break e;case 3:$e=7;break e;case 4:$e=5;break e;case 7:oy(d)?($e=0,wn=null,J_(i)):($e=0,wn=null,to(t,i,d,7));break;case 5:var _=null;switch(ke.tag){case 26:_=ke.memoizedState;case 5:case 27:var b=ke;if(_?Uv(_):b.stateNode.complete){$e=0,wn=null;var k=b.sibling;if(k!==null)ke=k;else{var j=b.return;j!==null?(ke=j,Lc(j)):ke=null}break t}}$e=0,wn=null,to(t,i,d,5);break;case 6:$e=0,wn=null,to(t,i,d,6);break;case 8:qd(),mt=6;break e;default:throw Error(s(462))}}oS();break}catch(Y){K_(t,Y)}while(!0);return Wi=Bs=null,B.H=l,B.A=h,Ke=a,ke!==null?0:(nt=null,Me=0,tc(),mt)}function oS(){for(;ke!==null&&!vf();)W_(ke)}function W_(t){var i=T_(t.alternate,t,or);t.memoizedProps=t.pendingProps,i===null?Lc(t):ke=i}function J_(t){var i=t,a=i.alternate;switch(i.tag){case 15:case 0:i=m_(a,i,i.pendingProps,i.type,void 0,Me);break;case 11:i=m_(a,i,i.pendingProps,i.type.render,i.ref,Me);break;case 5:rd(i);default:A_(a,i),i=ke=$g(i,or),i=T_(a,i,or)}t.memoizedProps=t.pendingProps,i===null?Lc(t):ke=i}function to(t,i,a,l){Wi=Bs=null,rd(i),Fa=null,hl=0;var h=i.return;try{if(XA(t,h,i,a,Me)){mt=1,Ac(t,Un(a,t.current)),ke=null;return}}catch(d){if(h!==null)throw ke=h,d;mt=1,Ac(t,Un(a,t.current)),ke=null;return}i.flags&32768?(ze||l===1?t=!0:Wa||(Me&536870912)!==0?t=!1:(zr=t=!0,(l===2||l===9||l===3||l===6)&&(l=An.current,l!==null&&l.tag===13&&(l.flags|=16384))),Z_(i,t)):Lc(i)}function Lc(t){var i=t;do{if((i.flags&32768)!==0){Z_(i,zr);return}t=i.return;var a=JA(i.alternate,i,or);if(a!==null){ke=a;return}if(i=i.sibling,i!==null){ke=i;return}ke=i=t}while(i!==null);mt===0&&(mt=5)}function Z_(t,i){do{var a=ZA(t.alternate,t);if(a!==null){a.flags&=32767,ke=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(t=t.sibling,t!==null)){ke=t;return}ke=t=a}while(t!==null);mt=6,ke=null}function ev(t,i,a,l,h,d,_,b,k){t.cancelPendingCommit=null;do Uc();while(zt!==0);if((Ke&6)!==0)throw Error(s(327));if(i!==null){if(i===t.current)throw Error(s(177));if(d=i.lanes|i.childLanes,d|=Df,bf(t,a,d,_,b,k),t===nt&&(ke=nt=null,Me=0),Za=i,qr=t,lr=a,zd=d,jd=h,H_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,hS(vr,function(){return sv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=B.T,B.T=null,h=ee.p,ee.p=2,_=Ke,Ke|=4;try{eS(t,i,a)}finally{Ke=_,ee.p=h,B.T=l}}zt=1,tv(),nv(),iv()}}function tv(){if(zt===1){zt=0;var t=qr,i=Za,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=B.T,B.T=null;var l=ee.p;ee.p=2;var h=Ke;Ke|=4;try{V_(i,t);var d=tp,_=Bg(t.containerInfo),b=d.focusedElem,k=d.selectionRange;if(_!==b&&b&&b.ownerDocument&&jg(b.ownerDocument.documentElement,b)){if(k!==null&&Rf(b)){var j=k.start,Y=k.end;if(Y===void 0&&(Y=j),"selectionStart"in b)b.selectionStart=j,b.selectionEnd=Math.min(Y,b.value.length);else{var X=b.ownerDocument||document,q=X&&X.defaultView||window;if(q.getSelection){var F=q.getSelection(),fe=b.textContent.length,ve=Math.min(k.start,fe),tt=k.end===void 0?ve:Math.min(k.end,fe);!F.extend&&ve>tt&&(_=tt,tt=ve,ve=_);var L=zg(b,ve),V=zg(b,tt);if(L&&V&&(F.rangeCount!==1||F.anchorNode!==L.node||F.anchorOffset!==L.offset||F.focusNode!==V.node||F.focusOffset!==V.offset)){var z=X.createRange();z.setStart(L.node,L.offset),F.removeAllRanges(),ve>tt?(F.addRange(z),F.extend(V.node,V.offset)):(z.setEnd(V.node,V.offset),F.addRange(z))}}}}for(X=[],F=b;F=F.parentNode;)F.nodeType===1&&X.push({element:F,left:F.scrollLeft,top:F.scrollTop});for(typeof b.focus=="function"&&b.focus(),b=0;b<X.length;b++){var Q=X[b];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}Xc=!!ep,tp=ep=null}finally{Ke=h,ee.p=l,B.T=a}}t.current=i,zt=2}}function nv(){if(zt===2){zt=0;var t=qr,i=Za,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=B.T,B.T=null;var l=ee.p;ee.p=2;var h=Ke;Ke|=4;try{N_(t,i.alternate,i)}finally{Ke=h,ee.p=l,B.T=a}}zt=3}}function iv(){if(zt===4||zt===3){zt=0,xu();var t=qr,i=Za,a=lr,l=H_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?zt=5:(zt=0,Za=qr=null,rv(t,t.pendingLanes));var h=t.pendingLanes;if(h===0&&(Br=null),Gi(a),i=i.stateNode,Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(Kn,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=B.T,h=ee.p,ee.p=2,B.T=null;try{for(var d=t.onRecoverableError,_=0;_<l.length;_++){var b=l[_];d(b.value,{componentStack:b.stack})}}finally{B.T=i,ee.p=h}}(lr&3)!==0&&Uc(),ki(t),h=t.pendingLanes,(a&261930)!==0&&(h&42)!==0?t===Bd?Cl++:(Cl=0,Bd=t):Cl=0,Il(0)}}function rv(t,i){(t.pooledCacheLanes&=i)===0&&(i=t.pooledCache,i!=null&&(t.pooledCache=null,ul(i)))}function Uc(){return tv(),nv(),iv(),sv()}function sv(){if(zt!==5)return!1;var t=qr,i=zd;zd=0;var a=Gi(lr),l=B.T,h=ee.p;try{ee.p=32>a?32:a,B.T=null,a=jd,jd=null;var d=qr,_=lr;if(zt=0,Za=qr=null,lr=0,(Ke&6)!==0)throw Error(s(331));var b=Ke;if(Ke|=4,j_(d.current),U_(d,d.current,_,a),Ke=b,Il(0,!1),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(Kn,d)}catch{}return!0}finally{ee.p=h,B.T=l,rv(t,i)}}function av(t,i,a){i=Un(a,i),i=vd(t.stateNode,i,2),t=Vr(t,i,2),t!==null&&(Ss(t,2),ki(t))}function We(t,i,a){if(t.tag===3)av(t,t,a);else for(;i!==null;){if(i.tag===3){av(i,t,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Br===null||!Br.has(l))){t=Un(a,t),a=o_(2),l=Vr(i,a,2),l!==null&&(l_(a,l,i,t),Ss(l,2),ki(l));break}}i=i.return}}function Fd(t,i,a){var l=t.pingCache;if(l===null){l=t.pingCache=new iS;var h=new Set;l.set(i,h)}else h=l.get(i),h===void 0&&(h=new Set,l.set(i,h));h.has(a)||(Ld=!0,h.add(a),t=lS.bind(null,t,i,a),i.then(t,t))}function lS(t,i,a){var l=t.pingCache;l!==null&&l.delete(i),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,nt===t&&(Me&a)===a&&(mt===4||mt===3&&(Me&62914560)===Me&&300>an()-Dc?(Ke&2)===0&&eo(t,0):Ud|=a,Ja===Me&&(Ja=0)),ki(t)}function ov(t,i){i===0&&(i=Ou()),t=Ps(t,i),t!==null&&(Ss(t,i),ki(t))}function uS(t){var i=t.memoizedState,a=0;i!==null&&(a=i.retryLane),ov(t,a)}function cS(t,i){var a=0;switch(t.tag){case 31:case 13:var l=t.stateNode,h=t.memoizedState;h!==null&&(a=h.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(i),ov(t,a)}function hS(t,i){return Pt(t,i)}var Pc=null,no=null,Gd=!1,zc=!1,Yd=!1,Fr=0;function ki(t){t!==no&&t.next===null&&(no===null?Pc=no=t:no=no.next=t),zc=!0,Gd||(Gd=!0,dS())}function Il(t,i){if(!Yd&&zc){Yd=!0;do for(var a=!1,l=Pc;l!==null;){if(t!==0){var h=l.pendingLanes;if(h===0)var d=0;else{var _=l.suspendedLanes,b=l.pingedLanes;d=(1<<31-_t(42|t)+1)-1,d&=h&~(_&~b),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,hv(l,d))}else d=Me,d=pi(l,l===nt?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||Qn(l,d)||(a=!0,hv(l,d));l=l.next}while(a);Yd=!1}}function fS(){lv()}function lv(){zc=Gd=!1;var t=0;Fr!==0&&AS()&&(t=Fr);for(var i=an(),a=null,l=Pc;l!==null;){var h=l.next,d=uv(l,i);d===0?(l.next=null,a===null?Pc=h:a.next=h,h===null&&(no=a)):(a=l,(t!==0||(d&3)!==0)&&(zc=!0)),l=h}zt!==0&&zt!==5||Il(t),Fr!==0&&(Fr=0)}function uv(t,i){for(var a=t.suspendedLanes,l=t.pingedLanes,h=t.expirationTimes,d=t.pendingLanes&-62914561;0<d;){var _=31-_t(d),b=1<<_,k=h[_];k===-1?((b&a)===0||(b&l)!==0)&&(h[_]=Tf(b,i)):k<=i&&(t.expiredLanes|=b),d&=~b}if(i=nt,a=Me,a=pi(t,t===i?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===i&&($e===2||$e===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&_r(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||Qn(t,a)){if(i=a&-a,i===t.callbackPriority)return i;switch(l!==null&&_r(l),Gi(a)){case 2:case 8:a=zo;break;case 32:a=vr;break;case 268435456:a=Cu;break;default:a=vr}return l=cv.bind(null,t),a=Pt(a,l),t.callbackPriority=i,t.callbackNode=a,i}return l!==null&&l!==null&&_r(l),t.callbackPriority=2,t.callbackNode=null,2}function cv(t,i){if(zt!==0&&zt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Uc()&&t.callbackNode!==a)return null;var l=Me;return l=pi(t,t===nt?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(G_(t,l,i),uv(t,an()),t.callbackNode!=null&&t.callbackNode===a?cv.bind(null,t):null)}function hv(t,i){if(Uc())return null;G_(t,i,!0)}function dS(){wS(function(){(Ke&6)!==0?Pt(Po,fS):lv()})}function Kd(){if(Fr===0){var t=Ba;t===0&&(t=fi,fi<<=1,(fi&261888)===0&&(fi=256)),Fr=t}return Fr}function fv(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Ra(""+t)}function dv(t,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,t.id&&a.setAttribute("form",t.id),i.parentNode.insertBefore(a,i),t=new FormData(t),a.parentNode.removeChild(a),t}function pS(t,i,a,l,h){if(i==="submit"&&a&&a.stateNode===h){var d=fv((h[Bt]||null).action),_=l.submitter;_&&(i=(i=_[Bt]||null)?fv(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var b=new wi("action","action",null,l,h);t.push({event:b,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Fr!==0){var k=_?dv(h,_):new FormData(h);dd(a,{pending:!0,data:k,method:h.method,action:d},null,k)}}else typeof d=="function"&&(b.preventDefault(),k=_?dv(h,_):new FormData(h),dd(a,{pending:!0,data:k,method:h.method,action:d},d,k))},currentTarget:h}]})}}for(var Qd=0;Qd<Nf.length;Qd++){var Xd=Nf[Qd],mS=Xd.toLowerCase(),gS=Xd[0].toUpperCase()+Xd.slice(1);ni(mS,"on"+gS)}ni(Fg,"onAnimationEnd"),ni(Gg,"onAnimationIteration"),ni(Yg,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(kA,"onTransitionRun"),ni(OA,"onTransitionStart"),ni(MA,"onTransitionCancel"),ni(Kg,"onTransitionEnd"),Ti("onMouseEnter",["mouseout","mouseover"]),Ti("onMouseLeave",["mouseout","mouseover"]),Ti("onPointerEnter",["pointerout","pointerover"]),Ti("onPointerLeave",["pointerout","pointerover"]),Ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Nl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),yS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Nl));function pv(t,i){i=(i&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],h=l.event;l=l.listeners;e:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var b=l[_],k=b.instance,j=b.currentTarget;if(b=b.listener,k!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=j;try{d(h)}catch(Y){ec(Y)}h.currentTarget=null,d=k}else for(_=0;_<l.length;_++){if(b=l[_],k=b.instance,j=b.currentTarget,b=b.listener,k!==d&&h.isPropagationStopped())break e;d=b,h.currentTarget=j;try{d(h)}catch(Y){ec(Y)}h.currentTarget=null,d=k}}}}function Oe(t,i){var a=i[Ta];a===void 0&&(a=i[Ta]=new Set);var l=t+"__bubble";a.has(l)||(mv(i,t,2,!1),a.add(l))}function $d(t,i,a){var l=0;i&&(l|=4),mv(a,t,l,i)}var jc="_reactListening"+Math.random().toString(36).slice(2);function Wd(t){if(!t[jc]){t[jc]=!0,qo.forEach(function(a){a!=="selectionchange"&&(yS.has(a)||$d(a,!1,t),$d(a,!0,t))});var i=t.nodeType===9?t:t.ownerDocument;i===null||i[jc]||(i[jc]=!0,$d("selectionchange",!1,i))}}function mv(t,i,a,l){switch(Fv(i)){case 2:var h=GS;break;case 8:h=YS;break;default:h=fp}a=h.bind(null,i,a,t),h=void 0,!Ns||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(h=!0),l?h!==void 0?t.addEventListener(i,a,{capture:!0,passive:h}):t.addEventListener(i,a,!0):h!==void 0?t.addEventListener(i,a,{passive:h}):t.addEventListener(i,a,!1)}function Jd(t,i,a,l,h){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)e:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var b=l.stateNode.containerInfo;if(b===h)break;if(_===4)for(_=l.return;_!==null;){var k=_.tag;if((k===3||k===4)&&_.stateNode.containerInfo===h)return;_=_.return}for(;b!==null;){if(_=_i(b),_===null)return;if(k=_.tag,k===5||k===6||k===26||k===27){l=d=_;continue e}b=b.parentNode}}l=l.return}wr(function(){var j=d,Y=On(a),X=[];e:{var q=Qg.get(t);if(q!==void 0){var F=wi,fe=t;switch(t){case"keypress":if(ks(a)===0)break e;case"keydown":case"keyup":F=Wu;break;case"focusin":fe="focus",F=Ms;break;case"focusout":fe="blur",F=Ms;break;case"beforeblur":case"afterblur":F=Ms;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":F=tl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":F=qu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":F=m;break;case Fg:case Gg:case Yg:F=Fu;break;case Kg:F=A;break;case"scroll":case"scrollend":F=el;break;case"wheel":F=H;break;case"copy":case"cut":case"paste":F=Gu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":F=Qi;break;case"toggle":case"beforetoggle":F=Ce}var ve=(i&4)!==0,tt=!ve&&(t==="scroll"||t==="scrollend"),L=ve?q!==null?q+"Capture":null:q;ve=[];for(var V=j,z;V!==null;){var Q=V;if(z=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||z===null||L===null||(Q=Jn(V,L),Q!=null&&ve.push(Dl(V,Q,z))),tt)break;V=V.return}0<ve.length&&(q=new F(q,fe,null,a,Y),X.push({event:q,listeners:ve}))}}if((i&7)===0){e:{if(q=t==="mouseover"||t==="pointerover",F=t==="mouseout"||t==="pointerout",q&&a!==Wo&&(fe=a.relatedTarget||a.fromElement)&&(_i(fe)||fe[gi]))break e;if((F||q)&&(q=Y.window===Y?Y:(q=Y.ownerDocument)?q.defaultView||q.parentWindow:window,F?(fe=a.relatedTarget||a.toElement,F=j,fe=fe?_i(fe):null,fe!==null&&(tt=u(fe),ve=fe.tag,fe!==tt||ve!==5&&ve!==27&&ve!==6)&&(fe=null)):(F=null,fe=j),F!==fe)){if(ve=tl,Q="onMouseLeave",L="onMouseEnter",V="mouse",(t==="pointerout"||t==="pointerover")&&(ve=Qi,Q="onPointerLeave",L="onPointerEnter",V="pointer"),tt=F==null?q:vn(F),z=fe==null?q:vn(fe),q=new ve(Q,V+"leave",F,a,Y),q.target=tt,q.relatedTarget=z,Q=null,_i(Y)===j&&(ve=new ve(L,V+"enter",fe,a,Y),ve.target=z,ve.relatedTarget=tt,Q=ve),tt=Q,F&&fe)t:{for(ve=_S,L=F,V=fe,z=0,Q=L;Q;Q=ve(Q))z++;Q=0;for(var ye=V;ye;ye=ve(ye))Q++;for(;0<z-Q;)L=ve(L),z--;for(;0<Q-z;)V=ve(V),Q--;for(;z--;){if(L===V||V!==null&&L===V.alternate){ve=L;break t}L=ve(L),V=ve(V)}ve=null}else ve=null;F!==null&&gv(X,q,F,ve,!1),fe!==null&&tt!==null&&gv(X,tt,fe,ve,!0)}}e:{if(q=j?vn(j):window,F=q.nodeName&&q.nodeName.toLowerCase(),F==="select"||F==="input"&&q.type==="file")var Fe=Og;else if(Dg(q))if(Mg)Fe=IA;else{Fe=xA;var de=RA}else F=q.nodeName,!F||F.toLowerCase()!=="input"||q.type!=="checkbox"&&q.type!=="radio"?j&&wa(j.elementType)&&(Fe=Og):Fe=CA;if(Fe&&(Fe=Fe(t,j))){kg(X,Fe,a,Y);break e}de&&de(t,q,j),t==="focusout"&&j&&q.type==="number"&&j.memoizedProps.value!=null&&Qo(q,"number",q.value)}switch(de=j?vn(j):window,t){case"focusin":(Dg(de)||de.contentEditable==="true")&&(Oa=de,xf=j,al=null);break;case"focusout":al=xf=Oa=null;break;case"mousedown":Cf=!0;break;case"contextmenu":case"mouseup":case"dragend":Cf=!1,qg(X,a,Y);break;case"selectionchange":if(DA)break;case"keydown":case"keyup":qg(X,a,Y)}var De;if(Ye)e:{switch(t){case"compositionstart":var Ve="onCompositionStart";break e;case"compositionend":Ve="onCompositionEnd";break e;case"compositionupdate":Ve="onCompositionUpdate";break e}Ve=void 0}else ka?Vs(t,a)&&(Ve="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(Ve="onCompositionStart");Ve&&(Ci&&a.locale!=="ko"&&(ka||Ve!=="onCompositionStart"?Ve==="onCompositionEnd"&&ka&&(De=Zo()):(Si=Y,Jo="value"in Si?Si.value:Si.textContent,ka=!0)),de=Bc(j,Ve),0<de.length&&(Ve=new xi(Ve,t,null,a,Y),X.push({event:Ve,listeners:de}),De?Ve.data=De:(De=Da(a),De!==null&&(Ve.data=De)))),(De=Vn?bA(t,a):AA(t,a))&&(Ve=Bc(j,"onBeforeInput"),0<Ve.length&&(de=new xi("onBeforeInput","beforeinput",null,a,Y),X.push({event:de,listeners:Ve}),de.data=De)),pS(X,t,j,a,Y)}pv(X,i)})}function Dl(t,i,a){return{instance:t,listener:i,currentTarget:a}}function Bc(t,i){for(var a=i+"Capture",l=[];t!==null;){var h=t,d=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||d===null||(h=Jn(t,a),h!=null&&l.unshift(Dl(t,h,d)),h=Jn(t,i),h!=null&&l.push(Dl(t,h,d))),t.tag===3)return l;t=t.return}return[]}function _S(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function gv(t,i,a,l,h){for(var d=i._reactName,_=[];a!==null&&a!==l;){var b=a,k=b.alternate,j=b.stateNode;if(b=b.tag,k!==null&&k===l)break;b!==5&&b!==26&&b!==27||j===null||(k=j,h?(j=Jn(a,d),j!=null&&_.unshift(Dl(a,j,k))):h||(j=Jn(a,d),j!=null&&_.push(Dl(a,j,k)))),a=a.return}_.length!==0&&t.push({event:i,listeners:_})}var vS=/\r\n?/g,ES=/\u0000|\uFFFD/g;function yv(t){return(typeof t=="string"?t:""+t).replace(vS,`
`).replace(ES,"")}function _v(t,i){return i=yv(i),yv(t)===i}function et(t,i,a,l,h,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||hn(t,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&hn(t,""+l);break;case"className":En(t,"class",l);break;case"tabIndex":En(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":En(t,a,l);break;case"style":$o(t,l,d);break;case"data":if(i!=="object"){En(t,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ra(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&et(t,i,"name",h.name,h,null),et(t,i,"formEncType",h.formEncType,h,null),et(t,i,"formMethod",h.formMethod,h,null),et(t,i,"formTarget",h.formTarget,h,null)):(et(t,i,"encType",h.encType,h,null),et(t,i,"method",h.method,h,null),et(t,i,"target",h.target,h,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Ra(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=Wn);break;case"onScroll":l!=null&&Oe("scroll",t);break;case"onScrollEnd":l!=null&&Oe("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Ra(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Oe("beforetoggle",t),Oe("toggle",t),Aa(t,"popover",l);break;case"xlinkActuate":Ct(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Ct(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Ct(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Ct(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Ct(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Ct(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Ct(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Ct(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Ct(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Aa(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Bu.get(a)||a,Aa(t,a,l))}}function Zd(t,i,a,l,h,d){switch(a){case"style":$o(t,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(h.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?hn(t,l):(typeof l=="number"||typeof l=="bigint")&&hn(t,""+l);break;case"onScroll":l!=null&&Oe("scroll",t);break;case"onScrollEnd":l!=null&&Oe("scrollend",t);break;case"onClick":l!=null&&(t.onclick=Wn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ho.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),i=a.slice(2,h?a.length-7:void 0),d=t[Bt]||null,d=d!=null?d[a]:null,typeof d=="function"&&t.removeEventListener(i,d,h),typeof l=="function")){typeof d!="function"&&d!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(i,l,h);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Aa(t,a,l)}}}function $t(t,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Oe("error",t),Oe("load",t);var l=!1,h=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:et(t,i,d,_,a,null)}}h&&et(t,i,"srcSet",a.srcSet,a,null),l&&et(t,i,"src",a.src,a,null);return;case"input":Oe("invalid",t);var b=d=_=h=null,k=null,j=null;for(l in a)if(a.hasOwnProperty(l)){var Y=a[l];if(Y!=null)switch(l){case"name":h=Y;break;case"type":_=Y;break;case"checked":k=Y;break;case"defaultChecked":j=Y;break;case"value":d=Y;break;case"defaultValue":b=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(s(137,i));break;default:et(t,i,l,Y,a,null)}}Pu(t,d,b,k,j,_,h,!1);return;case"select":Oe("invalid",t),l=_=d=null;for(h in a)if(a.hasOwnProperty(h)&&(b=a[h],b!=null))switch(h){case"value":d=b;break;case"defaultValue":_=b;break;case"multiple":l=b;default:et(t,i,h,b,a,null)}i=d,a=_,t.multiple=!!l,i!=null?Tr(t,!!l,i,!1):a!=null&&Tr(t,!!l,a,!0);return;case"textarea":Oe("invalid",t),d=h=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(b=a[_],b!=null))switch(_){case"value":l=b;break;case"defaultValue":h=b;break;case"children":d=b;break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(s(91));break;default:et(t,i,_,b,a,null)}br(t,l,h,d);return;case"option":for(k in a)a.hasOwnProperty(k)&&(l=a[k],l!=null)&&(k==="selected"?t.selected=l&&typeof l!="function"&&typeof l!="symbol":et(t,i,k,l,a,null));return;case"dialog":Oe("beforetoggle",t),Oe("toggle",t),Oe("cancel",t),Oe("close",t);break;case"iframe":case"object":Oe("load",t);break;case"video":case"audio":for(l=0;l<Nl.length;l++)Oe(Nl[l],t);break;case"image":Oe("error",t),Oe("load",t);break;case"details":Oe("toggle",t);break;case"embed":case"source":case"link":Oe("error",t),Oe("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(j in a)if(a.hasOwnProperty(j)&&(l=a[j],l!=null))switch(j){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,i));default:et(t,i,j,l,a,null)}return;default:if(wa(i)){for(Y in a)a.hasOwnProperty(Y)&&(l=a[Y],l!==void 0&&Zd(t,i,Y,l,a,void 0));return}}for(b in a)a.hasOwnProperty(b)&&(l=a[b],l!=null&&et(t,i,b,l,a,null))}function TS(t,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,d=null,_=null,b=null,k=null,j=null,Y=null;for(F in a){var X=a[F];if(a.hasOwnProperty(F)&&X!=null)switch(F){case"checked":break;case"value":break;case"defaultValue":k=X;default:l.hasOwnProperty(F)||et(t,i,F,null,l,X)}}for(var q in l){var F=l[q];if(X=a[q],l.hasOwnProperty(q)&&(F!=null||X!=null))switch(q){case"type":d=F;break;case"name":h=F;break;case"checked":j=F;break;case"defaultChecked":Y=F;break;case"value":_=F;break;case"defaultValue":b=F;break;case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(s(137,i));break;default:F!==X&&et(t,i,q,F,l,X)}}Sa(t,_,b,k,j,Y,d,h);return;case"select":F=_=b=q=null;for(d in a)if(k=a[d],a.hasOwnProperty(d)&&k!=null)switch(d){case"value":break;case"multiple":F=k;default:l.hasOwnProperty(d)||et(t,i,d,null,l,k)}for(h in l)if(d=l[h],k=a[h],l.hasOwnProperty(h)&&(d!=null||k!=null))switch(h){case"value":q=d;break;case"defaultValue":b=d;break;case"multiple":_=d;default:d!==k&&et(t,i,h,d,l,k)}i=b,a=_,l=F,q!=null?Tr(t,!!a,q,!1):!!l!=!!a&&(i!=null?Tr(t,!!a,i,!0):Tr(t,!!a,a?[]:"",!1));return;case"textarea":F=q=null;for(b in a)if(h=a[b],a.hasOwnProperty(b)&&h!=null&&!l.hasOwnProperty(b))switch(b){case"value":break;case"children":break;default:et(t,i,b,null,l,h)}for(_ in l)if(h=l[_],d=a[_],l.hasOwnProperty(_)&&(h!=null||d!=null))switch(_){case"value":q=h;break;case"defaultValue":F=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(s(91));break;default:h!==d&&et(t,i,_,h,l,d)}zu(t,q,F);return;case"option":for(var fe in a)q=a[fe],a.hasOwnProperty(fe)&&q!=null&&!l.hasOwnProperty(fe)&&(fe==="selected"?t.selected=!1:et(t,i,fe,null,l,q));for(k in l)q=l[k],F=a[k],l.hasOwnProperty(k)&&q!==F&&(q!=null||F!=null)&&(k==="selected"?t.selected=q&&typeof q!="function"&&typeof q!="symbol":et(t,i,k,q,l,F));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ve in a)q=a[ve],a.hasOwnProperty(ve)&&q!=null&&!l.hasOwnProperty(ve)&&et(t,i,ve,null,l,q);for(j in l)if(q=l[j],F=a[j],l.hasOwnProperty(j)&&q!==F&&(q!=null||F!=null))switch(j){case"children":case"dangerouslySetInnerHTML":if(q!=null)throw Error(s(137,i));break;default:et(t,i,j,q,l,F)}return;default:if(wa(i)){for(var tt in a)q=a[tt],a.hasOwnProperty(tt)&&q!==void 0&&!l.hasOwnProperty(tt)&&Zd(t,i,tt,void 0,l,q);for(Y in l)q=l[Y],F=a[Y],!l.hasOwnProperty(Y)||q===F||q===void 0&&F===void 0||Zd(t,i,Y,q,l,F);return}}for(var L in a)q=a[L],a.hasOwnProperty(L)&&q!=null&&!l.hasOwnProperty(L)&&et(t,i,L,null,l,q);for(X in l)q=l[X],F=a[X],!l.hasOwnProperty(X)||q===F||q==null&&F==null||et(t,i,X,q,l,F)}function vv(t){switch(t){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function bS(){if(typeof performance.getEntriesByType=="function"){for(var t=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var h=a[l],d=h.transferSize,_=h.initiatorType,b=h.duration;if(d&&b&&vv(_)){for(_=0,b=h.responseEnd,l+=1;l<a.length;l++){var k=a[l],j=k.startTime;if(j>b)break;var Y=k.transferSize,X=k.initiatorType;Y&&vv(X)&&(k=k.responseEnd,_+=Y*(k<b?1:(b-j)/(k-j)))}if(--l,i+=8*(d+_)/(h.duration/1e3),t++,10<t)break}}if(0<t)return i/t/1e6}return navigator.connection&&(t=navigator.connection.downlink,typeof t=="number")?t:5}var ep=null,tp=null;function qc(t){return t.nodeType===9?t:t.ownerDocument}function Ev(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Tv(t,i){if(t===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&i==="foreignObject"?0:t}function np(t,i){return t==="textarea"||t==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ip=null;function AS(){var t=window.event;return t&&t.type==="popstate"?t===ip?!1:(ip=t,!0):(ip=null,!1)}var bv=typeof setTimeout=="function"?setTimeout:void 0,SS=typeof clearTimeout=="function"?clearTimeout:void 0,Av=typeof Promise=="function"?Promise:void 0,wS=typeof queueMicrotask=="function"?queueMicrotask:typeof Av<"u"?function(t){return Av.resolve(null).then(t).catch(RS)}:bv;function RS(t){setTimeout(function(){throw t})}function Gr(t){return t==="head"}function Sv(t,i){var a=i,l=0;do{var h=a.nextSibling;if(t.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(l===0){t.removeChild(h),ao(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")kl(t.ownerDocument.documentElement);else if(a==="head"){a=t.ownerDocument.head,kl(a);for(var d=a.firstChild;d;){var _=d.nextSibling,b=d.nodeName;d[yi]||b==="SCRIPT"||b==="STYLE"||b==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&kl(t.ownerDocument.body);a=h}while(a);ao(i)}function wv(t,i){var a=t;t=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(t===0)break;t--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||t++;a=l}while(a)}function rp(t){var i=t.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":rp(a),ba(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function xS(t,i,a,l){for(;t.nodeType===1;){var h=a;if(t.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[yi])switch(i){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(d=t.getAttribute("rel"),d==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(d!==h.rel||t.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||t.getAttribute("title")!==(h.title==null?null:h.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(d=t.getAttribute("src"),(d!==(h.src==null?null:h.src)||t.getAttribute("type")!==(h.type==null?null:h.type)||t.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&d&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(i==="input"&&t.type==="hidden"){var d=h.name==null?null:""+h.name;if(h.type==="hidden"&&t.getAttribute("name")===d)return t}else return t;if(t=qn(t.nextSibling),t===null)break}return null}function CS(t,i,a){if(i==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=qn(t.nextSibling),t===null))return null;return t}function Rv(t,i){for(;t.nodeType!==8;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!i||(t=qn(t.nextSibling),t===null))return null;return t}function sp(t){return t.data==="$?"||t.data==="$~"}function ap(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState!=="loading"}function IS(t,i){var a=t.ownerDocument;if(t.data==="$~")t._reactRetry=i;else if(t.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function qn(t){for(;t!=null;t=t.nextSibling){var i=t.nodeType;if(i===1||i===3)break;if(i===8){if(i=t.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return t}var op=null;function xv(t){t=t.nextSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="/$"||a==="/&"){if(i===0)return qn(t.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}t=t.nextSibling}return null}function Cv(t){t=t.previousSibling;for(var i=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return t;i--}else a!=="/$"&&a!=="/&"||i++}t=t.previousSibling}return null}function Iv(t,i,a){switch(i=qc(a),t){case"html":if(t=i.documentElement,!t)throw Error(s(452));return t;case"head":if(t=i.head,!t)throw Error(s(453));return t;case"body":if(t=i.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function kl(t){for(var i=t.attributes;i.length;)t.removeAttributeNode(i[0]);ba(t)}var Hn=new Map,Nv=new Set;function Hc(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var ur=ee.d;ee.d={f:NS,r:DS,D:kS,C:OS,L:MS,m:VS,X:US,S:LS,M:PS};function NS(){var t=ur.f(),i=Mc();return t||i}function DS(t){var i=kn(t);i!==null&&i.tag===5&&i.type==="form"?Ky(i):ur.r(t)}var io=typeof document>"u"?null:document;function Dv(t,i,a){var l=io;if(l&&typeof i=="string"&&i){var h=cn(i);h='link[rel="'+t+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Nv.has(h)||(Nv.add(h),t={rel:t,crossOrigin:a,href:i},l.querySelector(h)===null&&(i=l.createElement("link"),$t(i,"link",t),xt(i),l.head.appendChild(i)))}}function kS(t){ur.D(t),Dv("dns-prefetch",t,null)}function OS(t,i){ur.C(t,i),Dv("preconnect",t,i)}function MS(t,i,a){ur.L(t,i,a);var l=io;if(l&&t&&i){var h='link[rel="preload"][as="'+cn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+cn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+cn(a.imageSizes)+'"]')):h+='[href="'+cn(t)+'"]';var d=h;switch(i){case"style":d=ro(t);break;case"script":d=so(t)}Hn.has(d)||(t=S({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:t,as:i},a),Hn.set(d,t),l.querySelector(h)!==null||i==="style"&&l.querySelector(Ol(d))||i==="script"&&l.querySelector(Ml(d))||(i=l.createElement("link"),$t(i,"link",t),xt(i),l.head.appendChild(i)))}}function VS(t,i){ur.m(t,i);var a=io;if(a&&t){var l=i&&typeof i.as=="string"?i.as:"script",h='link[rel="modulepreload"][as="'+cn(l)+'"][href="'+cn(t)+'"]',d=h;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=so(t)}if(!Hn.has(d)&&(t=S({rel:"modulepreload",href:t},i),Hn.set(d,t),a.querySelector(h)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ml(d)))return}l=a.createElement("link"),$t(l,"link",t),xt(l),a.head.appendChild(l)}}}function LS(t,i,a){ur.S(t,i,a);var l=io;if(l&&t){var h=vi(l).hoistableStyles,d=ro(t);i=i||"default";var _=h.get(d);if(!_){var b={loading:0,preload:null};if(_=l.querySelector(Ol(d)))b.loading=5;else{t=S({rel:"stylesheet",href:t,"data-precedence":i},a),(a=Hn.get(d))&&lp(t,a);var k=_=l.createElement("link");xt(k),$t(k,"link",t),k._p=new Promise(function(j,Y){k.onload=j,k.onerror=Y}),k.addEventListener("load",function(){b.loading|=1}),k.addEventListener("error",function(){b.loading|=2}),b.loading|=4,Fc(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:b},h.set(d,_)}}}function US(t,i){ur.X(t,i);var a=io;if(a&&t){var l=vi(a).hoistableScripts,h=so(t),d=l.get(h);d||(d=a.querySelector(Ml(h)),d||(t=S({src:t,async:!0},i),(i=Hn.get(h))&&up(t,i),d=a.createElement("script"),xt(d),$t(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function PS(t,i){ur.M(t,i);var a=io;if(a&&t){var l=vi(a).hoistableScripts,h=so(t),d=l.get(h);d||(d=a.querySelector(Ml(h)),d||(t=S({src:t,async:!0,type:"module"},i),(i=Hn.get(h))&&up(t,i),d=a.createElement("script"),xt(d),$t(d,"link",t),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(h,d))}}function kv(t,i,a,l){var h=(h=Ne.current)?Hc(h):null;if(!h)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ro(a.href),a=vi(h).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=ro(a.href);var d=vi(h).hoistableStyles,_=d.get(t);if(_||(h=h.ownerDocument||h,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(t,_),(d=h.querySelector(Ol(t)))&&!d._p&&(_.instance=d,_.state.loading=5),Hn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Hn.set(t,a),d||zS(h,t,a,_.state))),i&&l===null)throw Error(s(528,""));return _}if(i&&l!==null)throw Error(s(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=so(a),a=vi(h).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function ro(t){return'href="'+cn(t)+'"'}function Ol(t){return'link[rel="stylesheet"]['+t+"]"}function Ov(t){return S({},t,{"data-precedence":t.precedence,precedence:null})}function zS(t,i,a,l){t.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=t.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),$t(i,"link",a),xt(i),t.head.appendChild(i))}function so(t){return'[src="'+cn(t)+'"]'}function Ml(t){return"script[async]"+t}function Mv(t,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=t.querySelector('style[data-href~="'+cn(a.href)+'"]');if(l)return i.instance=l,xt(l),l;var h=S({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),xt(l),$t(l,"style",h),Fc(l,a.precedence,t),i.instance=l;case"stylesheet":h=ro(a.href);var d=t.querySelector(Ol(h));if(d)return i.state.loading|=4,i.instance=d,xt(d),d;l=Ov(a),(h=Hn.get(h))&&lp(l,h),d=(t.ownerDocument||t).createElement("link"),xt(d);var _=d;return _._p=new Promise(function(b,k){_.onload=b,_.onerror=k}),$t(d,"link",l),i.state.loading|=4,Fc(d,a.precedence,t),i.instance=d;case"script":return d=so(a.src),(h=t.querySelector(Ml(d)))?(i.instance=h,xt(h),h):(l=a,(h=Hn.get(d))&&(l=S({},a),up(l,h)),t=t.ownerDocument||t,h=t.createElement("script"),xt(h),$t(h,"link",l),t.head.appendChild(h),i.instance=h);case"void":return null;default:throw Error(s(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,Fc(l,a.precedence,t));return i.instance}function Fc(t,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=l.length?l[l.length-1]:null,d=h,_=0;_<l.length;_++){var b=l[_];if(b.dataset.precedence===i)d=b;else if(d!==h)break}d?d.parentNode.insertBefore(t,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(t,i.firstChild))}function lp(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.title==null&&(t.title=i.title)}function up(t,i){t.crossOrigin==null&&(t.crossOrigin=i.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=i.referrerPolicy),t.integrity==null&&(t.integrity=i.integrity)}var Gc=null;function Vv(t,i,a){if(Gc===null){var l=new Map,h=Gc=new Map;h.set(a,l)}else h=Gc,l=h.get(a),l||(l=new Map,h.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),h=0;h<a.length;h++){var d=a[h];if(!(d[yi]||d[Rt]||t==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=t+_;var b=l.get(_);b?b.push(d):l.set(_,[d])}}return l}function Lv(t,i,a){t=t.ownerDocument||t,t.head.insertBefore(a,i==="title"?t.querySelector("head > title"):null)}function jS(t,i,a){if(a===1||i.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;return i.rel==="stylesheet"?(t=i.disabled,typeof i.precedence=="string"&&t==null):!0;case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Uv(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}function BS(t,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=ro(l.href),d=i.querySelector(Ol(h));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(t.count++,t=Yc.bind(t),i.then(t,t)),a.state.loading|=4,a.instance=d,xt(d);return}d=i.ownerDocument||i,l=Ov(l),(h=Hn.get(h))&&lp(l,h),d=d.createElement("link"),xt(d);var _=d;_._p=new Promise(function(b,k){_.onload=b,_.onerror=k}),$t(d,"link",l),a.instance=d}t.stylesheets===null&&(t.stylesheets=new Map),t.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(t.count++,a=Yc.bind(t),i.addEventListener("load",a),i.addEventListener("error",a))}}var cp=0;function qS(t,i){return t.stylesheets&&t.count===0&&Qc(t,t.stylesheets),0<t.count||0<t.imgCount?function(a){var l=setTimeout(function(){if(t.stylesheets&&Qc(t,t.stylesheets),t.unsuspend){var d=t.unsuspend;t.unsuspend=null,d()}},6e4+i);0<t.imgBytes&&cp===0&&(cp=62500*bS());var h=setTimeout(function(){if(t.waitingForImages=!1,t.count===0&&(t.stylesheets&&Qc(t,t.stylesheets),t.unsuspend)){var d=t.unsuspend;t.unsuspend=null,d()}},(t.imgBytes>cp?50:800)+i);return t.unsuspend=a,function(){t.unsuspend=null,clearTimeout(l),clearTimeout(h)}}:null}function Yc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Qc(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var Kc=null;function Qc(t,i){t.stylesheets=null,t.unsuspend!==null&&(t.count++,Kc=new Map,i.forEach(HS,t),Kc=null,Yc.call(t))}function HS(t,i){if(!(i.state.loading&4)){var a=Kc.get(t);if(a)var l=a.get(null);else{a=new Map,Kc.set(t,a);for(var h=t.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<h.length;d++){var _=h[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}h=i.instance,_=h.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,h),a.set(_,h),this.count++,l=Yc.bind(this),h.addEventListener("load",l),h.addEventListener("error",l),d?d.parentNode.insertBefore(h,d.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(h,t.firstChild)),i.state.loading|=4}}var Vl={$$typeof:se,Provider:null,Consumer:null,_currentValue:ie,_currentValue2:ie,_threadCount:0};function FS(t,i,a,l,h,d,_,b,k){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=mi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mi(0),this.hiddenUpdates=mi(null),this.identifierPrefix=l,this.onUncaughtError=h,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=k,this.incompleteTransitions=new Map}function Pv(t,i,a,l,h,d,_,b,k,j,Y,X){return t=new FS(t,i,a,_,k,j,Y,X,b),i=1,d===!0&&(i|=24),d=bn(3,null,null,i),t.current=d,d.stateNode=t,i=Hf(),i.refCount++,t.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},Kf(d),t}function zv(t){return t?(t=La,t):La}function jv(t,i,a,l,h,d){h=zv(h),l.context===null?l.context=h:l.pendingContext=h,l=Mr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Vr(t,l,i),a!==null&&(gn(a,t,i),dl(a,t,i))}function Bv(t,i){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<i?a:i}}function hp(t,i){Bv(t,i),(t=t.alternate)&&Bv(t,i)}function qv(t){if(t.tag===13||t.tag===31){var i=Ps(t,67108864);i!==null&&gn(i,t,67108864),hp(t,67108864)}}function Hv(t){if(t.tag===13||t.tag===31){var i=xn();i=Rs(i);var a=Ps(t,i);a!==null&&gn(a,t,i),hp(t,i)}}var Xc=!0;function GS(t,i,a,l){var h=B.T;B.T=null;var d=ee.p;try{ee.p=2,fp(t,i,a,l)}finally{ee.p=d,B.T=h}}function YS(t,i,a,l){var h=B.T;B.T=null;var d=ee.p;try{ee.p=8,fp(t,i,a,l)}finally{ee.p=d,B.T=h}}function fp(t,i,a,l){if(Xc){var h=dp(l);if(h===null)Jd(t,i,l,$c,a),Gv(t,l);else if(QS(h,t,i,a,l))l.stopPropagation();else if(Gv(t,l),i&4&&-1<KS.indexOf(t)){for(;h!==null;){var d=kn(h);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=di(d.pendingLanes);if(_!==0){var b=d;for(b.pendingLanes|=2,b.entangledLanes|=2;_;){var k=1<<31-_t(_);b.entanglements[1]|=k,_&=~k}ki(d),(Ke&6)===0&&(kc=an()+500,Il(0))}}break;case 31:case 13:b=Ps(d,2),b!==null&&gn(b,d,2),Mc(),hp(d,2)}if(d=dp(l),d===null&&Jd(t,i,l,$c,a),d===h)break;h=d}h!==null&&l.stopPropagation()}else Jd(t,i,l,null,a)}}function dp(t){return t=On(t),pp(t)}var $c=null;function pp(t){if($c=null,t=_i(t),t!==null){var i=u(t);if(i===null)t=null;else{var a=i.tag;if(a===13){if(t=f(i),t!==null)return t;t=null}else if(a===31){if(t=p(i),t!==null)return t;t=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;t=null}else i!==t&&(t=null)}}return $c=t,null}function Fv(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(bs()){case Po:return 2;case zo:return 8;case vr:case Ef:return 32;case Cu:return 268435456;default:return 32}default:return 32}}var mp=!1,Yr=null,Kr=null,Qr=null,Ll=new Map,Ul=new Map,Xr=[],KS="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Gv(t,i){switch(t){case"focusin":case"focusout":Yr=null;break;case"dragenter":case"dragleave":Kr=null;break;case"mouseover":case"mouseout":Qr=null;break;case"pointerover":case"pointerout":Ll.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ul.delete(i.pointerId)}}function Pl(t,i,a,l,h,d){return t===null||t.nativeEvent!==d?(t={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[h]},i!==null&&(i=kn(i),i!==null&&qv(i)),t):(t.eventSystemFlags|=l,i=t.targetContainers,h!==null&&i.indexOf(h)===-1&&i.push(h),t)}function QS(t,i,a,l,h){switch(i){case"focusin":return Yr=Pl(Yr,t,i,a,l,h),!0;case"dragenter":return Kr=Pl(Kr,t,i,a,l,h),!0;case"mouseover":return Qr=Pl(Qr,t,i,a,l,h),!0;case"pointerover":var d=h.pointerId;return Ll.set(d,Pl(Ll.get(d)||null,t,i,a,l,h)),!0;case"gotpointercapture":return d=h.pointerId,Ul.set(d,Pl(Ul.get(d)||null,t,i,a,l,h)),!0}return!1}function Yv(t){var i=_i(t.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=f(a),i!==null){t.blockedOn=i,Xn(t.priority,function(){Hv(a)});return}}else if(i===31){if(i=p(a),i!==null){t.blockedOn=i,Xn(t.priority,function(){Hv(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wc(t){if(t.blockedOn!==null)return!1;for(var i=t.targetContainers;0<i.length;){var a=dp(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);Wo=l,a.target.dispatchEvent(l),Wo=null}else return i=kn(a),i!==null&&qv(i),t.blockedOn=a,!1;i.shift()}return!0}function Kv(t,i,a){Wc(t)&&a.delete(i)}function XS(){mp=!1,Yr!==null&&Wc(Yr)&&(Yr=null),Kr!==null&&Wc(Kr)&&(Kr=null),Qr!==null&&Wc(Qr)&&(Qr=null),Ll.forEach(Kv),Ul.forEach(Kv)}function Jc(t,i){t.blockedOn===i&&(t.blockedOn=null,mp||(mp=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,XS)))}var Zc=null;function Qv(t){Zc!==t&&(Zc=t,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){Zc===t&&(Zc=null);for(var i=0;i<t.length;i+=3){var a=t[i],l=t[i+1],h=t[i+2];if(typeof l!="function"){if(pp(l||a)===null)continue;break}var d=kn(a);d!==null&&(t.splice(i,3),i-=3,dd(d,{pending:!0,data:h,method:a.method,action:l},l,h))}}))}function ao(t){function i(k){return Jc(k,t)}Yr!==null&&Jc(Yr,t),Kr!==null&&Jc(Kr,t),Qr!==null&&Jc(Qr,t),Ll.forEach(i),Ul.forEach(i);for(var a=0;a<Xr.length;a++){var l=Xr[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Xr.length&&(a=Xr[0],a.blockedOn===null);)Yv(a),a.blockedOn===null&&Xr.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var h=a[l],d=a[l+1],_=h[Bt]||null;if(typeof d=="function")_||Qv(a);else if(_){var b=null;if(d&&d.hasAttribute("formAction")){if(h=d,_=d[Bt]||null)b=_.formAction;else if(pp(h)!==null)continue}else b=_.action;typeof b=="function"?a[l+1]=b:(a.splice(l,3),l-=3),Qv(a)}}}function Xv(){function t(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return h=_})},focusReset:"manual",scroll:"manual"})}function i(){h!==null&&(h(),h=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,h=null;return navigation.addEventListener("navigate",t),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",t),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),h!==null&&(h(),h=null)}}}function gp(t){this._internalRoot=t}eh.prototype.render=gp.prototype.render=function(t){var i=this._internalRoot;if(i===null)throw Error(s(409));var a=i.current,l=xn();jv(a,l,t,i,null,null)},eh.prototype.unmount=gp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var i=t.containerInfo;jv(t.current,2,null,t,null,null),Mc(),i[gi]=null}};function eh(t){this._internalRoot=t}eh.prototype.unstable_scheduleHydration=function(t){if(t){var i=Mu();t={blockedOn:null,target:t,priority:i};for(var a=0;a<Xr.length&&i!==0&&i<Xr[a].priority;a++);Xr.splice(a,0,t),a===0&&Yv(t)}};var $v=e.version;if($v!=="19.2.4")throw Error(s(527,$v,"19.2.4"));ee.findDOMNode=function(t){var i=t._reactInternals;if(i===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=y(i),t=t!==null?E(t):null,t=t===null?null:t.stateNode,t};var $S={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:B,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var th=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!th.isDisabled&&th.supportsFiber)try{Kn=th.inject($S),Gt=th}catch{}}return jl.createRoot=function(t,i){if(!o(t))throw Error(s(299));var a=!1,l="",h=i_,d=r_,_=s_;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(h=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=Pv(t,1,!1,null,null,a,l,null,h,d,_,Xv),t[gi]=i.current,Wd(t),new gp(i)},jl.hydrateRoot=function(t,i,a){if(!o(t))throw Error(s(299));var l=!1,h="",d=i_,_=r_,b=s_,k=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.formState!==void 0&&(k=a.formState)),i=Pv(t,1,!0,i,a??null,l,h,k,d,_,b,Xv),i.context=zv(null),a=i.current,l=xn(),l=Rs(l),h=Mr(l),h.callback=null,Vr(a,h,l),a=l,i.current.lanes=a,Ss(i,a),ki(i),t[gi]=i.current,Wd(t),new eh(i)},jl.version="19.2.4",jl}var a0;function aw(){if(a0)return vp.exports;a0=1;function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(e){console.error(e)}}return r(),vp.exports=sw(),vp.exports}var ow=aw();const nE=ne.createContext(void 0),lw=({children:r})=>{const[e,n]=ne.useState(()=>localStorage.getItem("theme-mode")||"dark"),[s,o]=ne.useState(()=>localStorage.getItem("theme-color")||"blue");ne.useEffect(()=>{document.documentElement.setAttribute("data-mode",e),document.documentElement.setAttribute("data-color",s)},[e,s]),ne.useEffect(()=>{localStorage.setItem("theme-mode",e)},[e]),ne.useEffect(()=>{localStorage.setItem("theme-color",s)},[s]);const u=()=>{n(p=>p==="dark"?"light":"dark")},f=p=>{o(p)};return T.jsx(nE.Provider,{value:{mode:e,color:s,toggleMode:u,setColor:f},children:r})},Sm=()=>{const r=ne.useContext(nE);if(r===void 0)throw new Error("useTheme must be used within a ThemeProvider");return r},uw=({children:r})=>{const{mode:e}=Sm();return T.jsx("div",{"data-mode":e,style:{display:"flex",height:"100vh",width:"100vw",backgroundColor:"var(--bg-primary)",backgroundImage:"radial-gradient(ellipse at top right, var(--accent-primary), transparent 70%), radial-gradient(ellipse at bottom left, var(--accent-secondary), transparent 70%)",backgroundSize:"200% 200%",backgroundPosition:"0% 0%",overflow:"hidden",padding:"var(--spacing-md)",transition:"background-image 0.5s ease",opacity:.95},children:T.jsx("div",{style:{display:"flex",width:"100%",height:"100%",backgroundColor:"var(--glass-bg)",backdropFilter:"blur(20px)",borderRadius:"var(--radius-xl)",border:"1px solid var(--glass-border)",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.2)",overflow:"hidden",transition:"background-color 0.3s ease",position:"relative"},children:r})})};const iE=(...r)=>r.filter((e,n,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===n).join(" ").trim();const cw=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const hw=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,s)=>s?s.toUpperCase():n.toLowerCase());const o0=r=>{const e=hw(r);return e.charAt(0).toUpperCase()+e.slice(1)};var fw={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const dw=r=>{for(const e in r)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const pw=ne.forwardRef(({color:r="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:o="",children:u,iconNode:f,...p},g)=>ne.createElement("svg",{ref:g,...fw,width:e,height:e,stroke:r,strokeWidth:s?Number(n)*24/Number(e):n,className:iE("lucide",o),...!u&&!dw(p)&&{"aria-hidden":"true"},...p},[...f.map(([y,E])=>ne.createElement(y,E)),...Array.isArray(u)?u:[u]]));const Se=(r,e)=>{const n=ne.forwardRef(({className:s,...o},u)=>ne.createElement(pw,{ref:u,iconNode:e,className:iE(`lucide-${cw(o0(r))}`,`lucide-${r}`,s),...o}));return n.displayName=o0(r),n};const mw=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],gw=Se("arrow-left",mw);const yw=[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],_w=Se("ban",yw);const vw=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Ew=Se("calendar",vw);const Tw=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],l0=Se("check-check",Tw);const bw=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],rE=Se("check",bw);const Aw=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Sw=Se("chevron-right",Aw);const ww=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Rw=Se("circle-question-mark",ww);const xw=[["path",{d:"M18 20a6 6 0 0 0-12 0",key:"1qehca"}],["circle",{cx:"12",cy:"10",r:"4",key:"1h16sb"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Cw=Se("circle-user-round",xw);const Iw=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]],Nw=Se("circle-user",Iw);const Dw=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],kw=Se("clock",Dw);const Ow=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]],sE=Se("ellipsis-vertical",Ow);const Mw=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ap=Se("file-text",Mw);const Vw=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],Lw=Se("fingerprint-pattern",Vw);const Uw=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],fo=Se("loader-circle",Uw);const Pw=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],zw=Se("log-in",Pw);const jw=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],aE=Se("log-out",jw);const Bw=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],qw=Se("mail",Bw);const Hw=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],Fw=Se("maximize-2",Hw);const Gw=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],wm=Se("message-square",Gw);const Yw=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M16.95 16.95A7 7 0 0 1 5 12v-2",key:"cqa7eg"}],["path",{d:"M18.89 13.23A7 7 0 0 0 19 12v-2",key:"16hl24"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}]],Kw=Se("mic-off",Yw);const Qw=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Xw=Se("mic",Qw);const $w=[["path",{d:"m14 10 7-7",key:"oa77jy"}],["path",{d:"M20 10h-6V4",key:"mjg0md"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M4 14h6v6",key:"rmj7iw"}]],Ww=Se("minimize-2",$w);const Jw=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],oE=Se("moon",Jw);const Zw=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],e2=Se("panel-left-close",Zw);const t2=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],n2=Se("panel-left-open",t2);const i2=[["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 2.829 2.829l8.414-8.586a4 4 0 1 0-5.657-5.657l-8.379 8.551a6 6 0 1 0 8.485 8.485l8.379-8.551",key:"1miecu"}]],r2=Se("paperclip",i2);const s2=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],a2=Se("pen",s2);const o2=[["path",{d:"M10.1 13.9a14 14 0 0 0 3.732 2.668 1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2 18 18 0 0 1-12.728-5.272",key:"1wngk7"}],["path",{d:"M22 2 2 22",key:"y4kqgn"}],["path",{d:"M4.76 13.582A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 .244.473",key:"10hv5p"}]],u0=Se("phone-off",o2);const l2=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Rm=Se("phone",l2);const u2=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],c0=Se("search",u2);const c2=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],h2=Se("send",c2);const f2=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Hp=Se("settings",f2);const d2=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],p2=Se("shield",d2);const m2=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]],lE=Se("smile",m2);const g2=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],y2=Se("square-pen",g2);const _2=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],uE=Se("sun",_2);const v2=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],h0=Se("trash-2",v2);const E2=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],T2=Se("triangle-alert",E2);const b2=[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]],A2=Se("type",b2);const S2=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],w2=Se("upload",S2);const R2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],cE=Se("user-plus",R2);const x2=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],C2=Se("users",x2);const I2=[["path",{d:"M10.66 6H14a2 2 0 0 1 2 2v2.5l5.248-3.062A.5.5 0 0 1 22 7.87v8.196",key:"w8jjjt"}],["path",{d:"M16 16a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h2",key:"1xawa7"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],N2=Se("video-off",I2);const D2=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],hE=Se("video",D2);const k2=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],fE=Se("x",k2),O2=({isOpen:r,toggleSidebar:e,conversations:n,activeConversationId:s,onSelectConversation:o,isConnected:u=!1,onNewChat:f,onSettings:p,onLogout:g})=>{const{mode:y,toggleMode:E}=Sm(),S=w=>{switch(w){case"online":return"#10b981";case"busy":return"#ef4444";case"away":return"#eab308";case"offline":return"#94a3b8";default:return"#94a3b8"}};return T.jsxs("aside",{style:{width:r?"320px":"88px",height:"100%",backgroundColor:"var(--bg-primary)",display:"flex",flexDirection:"column",borderRight:"1px solid var(--border-color)",transition:"width 0.3s cubic-bezier(0.4, 0, 0.2, 1)",overflow:"hidden"},children:[T.jsxs("div",{style:{padding:r?"var(--spacing-lg) var(--spacing-md) var(--spacing-sm)":"var(--spacing-lg) 0 var(--spacing-sm)",display:"flex",flexDirection:"column",alignItems:r?"stretch":"center",minHeight:"120px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:r?"space-between":"center",marginBottom:"var(--spacing-md)",width:"100%",padding:r?"0":"0 12px"},children:[r&&T.jsxs("h1",{style:{color:"var(--text-primary)",fontSize:"var(--font-size-xl)",fontWeight:700,letterSpacing:"-0.5px"},children:["Messages",T.jsx("span",{style:{fontSize:"10px",color:u?"#10b981":"#ef4444",marginLeft:"8px",fontWeight:500,verticalAlign:"middle"},children:u?"LIVE":"OFFLINE"})]}),T.jsxs("div",{style:{display:"flex",gap:"4px"},children:[r&&T.jsx("button",{className:"icon-btn",title:"New Message",onClick:f,children:T.jsx(y2,{size:20})}),T.jsx("button",{className:"icon-btn",title:r?"Collapse Sidebar":"Expand Sidebar",onClick:e,children:r?T.jsx(e2,{size:20}):T.jsx(n2,{size:20})})]})]}),r?T.jsxs("div",{style:{position:"relative"},children:[T.jsx(c0,{size:16,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"var(--text-secondary)"}}),T.jsx("input",{type:"text",placeholder:"Search...",className:"input-field",style:{width:"100%",paddingLeft:"36px"}})]}):T.jsx("button",{className:"icon-btn",title:"Search",children:T.jsx(c0,{size:20})})]}),T.jsxs("div",{style:{flex:1,overflowY:"auto",overflowX:"hidden",padding:"var(--spacing-xs) var(--spacing-md)",display:"flex",flexDirection:"column",gap:"var(--spacing-xs)",alignItems:r?"stretch":"center"},children:[r?T.jsx("span",{style:{fontSize:"var(--font-size-xs)",fontWeight:600,color:"var(--text-tertiary)",textTransform:"uppercase",letterSpacing:"0.05em",marginBottom:"var(--spacing-xs)",marginTop:"var(--spacing-sm)"},children:"Recent Chats"}):T.jsx("div",{style:{height:"24px"}}),n.map(w=>{const P=w.id===s;return T.jsxs("div",{className:P?"":"chat-item",title:r?void 0:w.name,onClick:()=>o(w.id),style:{padding:r?"10px 14px":"10px",borderRadius:"12px",cursor:"pointer",transition:"all 0.2s ease-out",backgroundColor:P?"var(--accent-primary)":"transparent",border:"1px solid transparent",display:"flex",alignItems:"center",justifyContent:r?"flex-start":"center",gap:"12px",width:r?"auto":"48px",height:r?"auto":"48px",margin:r?"0 8px":"0 auto"},children:[T.jsxs("div",{style:{position:"relative",flexShrink:0},children:[T.jsx("img",{src:w.avatar,alt:w.name,style:{width:"42px",height:"42px",borderRadius:"50%",objectFit:"cover",border:P?"2px solid rgba(255,255,255,0.5)":"2px solid var(--bg-tertiary)"}}),T.jsx("div",{style:{position:"absolute",bottom:"2px",right:"2px",width:"14px",height:"14px",borderRadius:"50%",backgroundColor:S(w.status),border:"2px solid var(--bg-primary)",zIndex:10}})]}),r&&T.jsxs("div",{style:{flex:1,overflow:"hidden",opacity:r?1:0,transition:"opacity 0.2s"},children:[T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"2px",alignItems:"baseline"},children:[T.jsx("span",{style:{fontWeight:600,color:P?"#fff":"var(--text-primary)",fontSize:"0.9rem"},children:w.name}),T.jsx("span",{style:{fontSize:"0.75rem",color:P?"rgba(255,255,255,0.7)":"var(--text-tertiary)"},children:"10:30 AM"})]}),T.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[T.jsx("span",{style:{fontSize:"0.8rem",color:P?"rgba(255,255,255,0.8)":"var(--text-secondary)",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"140px"},children:w.lastMessage}),w.unreadCount>0&&T.jsx("span",{style:{backgroundColor:P?"#fff":"var(--accent-primary)",color:P?"var(--accent-primary)":"white",fontSize:"10px",fontWeight:800,minWidth:"18px",height:"18px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"50%",marginLeft:"6px"},children:w.unreadCount})]})]})]},w.id)})]}),T.jsxs("div",{style:{padding:"var(--spacing-md)",borderTop:"1px solid var(--border-color)",display:"flex",justifyContent:r?"space-around":"center",flexDirection:r?"row":"column",gap:r?"0":"var(--spacing-md)",alignItems:"center"},children:[T.jsx("button",{className:"icon-btn",style:{color:"var(--accent-primary)"},title:"All Chats",children:T.jsx(wm,{size:20})}),T.jsx("button",{className:"icon-btn",title:"Calls",onClick:()=>alert("Calling feature coming soon! "),children:T.jsx(Rm,{size:20})}),T.jsx("button",{className:"icon-btn",title:"Toggle Theme",onClick:E,children:y==="dark"?T.jsx(uE,{size:20}):T.jsx(oE,{size:20})}),T.jsx("button",{className:"icon-btn",title:"Settings",onClick:p,children:T.jsx(Hp,{size:20})}),T.jsx("div",{style:{width:r?"1px":"20px",height:r?"20px":"1px",backgroundColor:"var(--border-color)"}}),T.jsx("button",{className:"icon-btn",style:{color:"#ef4444"},title:"Log Out",onClick:()=>{console.log("Sidebar: Logout button clicked"),g?.()},children:T.jsx(aE,{size:20})})]})]})},M2=({status:r,isSender:e})=>{if(!e||!r)return null;const n=()=>{switch(r){case"sending":return T.jsx(kw,{size:14,style:{opacity:.5,color:"var(--text-tertiary)"}});case"sent":return T.jsx(rE,{size:14,style:{opacity:.6,color:"var(--text-tertiary)"}});case"delivered":return T.jsx(l0,{size:14,style:{opacity:.7,color:"var(--text-tertiary)"}});case"read":return T.jsx(l0,{size:14,style:{color:"#60a5fa"}});default:return null}},s=()=>{switch(r){case"sending":return"Sending...";case"sent":return"Sent";case"delivered":return"Delivered";case"read":return"Read";default:return""}};return T.jsx("div",{style:{display:"inline-flex",alignItems:"center",marginLeft:"4px",transition:"all 0.3s ease"},title:s(),children:n()})},V2=["","","","","",""],L2=({id:r,text:e,isMe:n,timestamp:s,image:o,reactions:u,onReact:f,onEdit:p,onDelete:g,isEdited:y,status:E})=>{const S=e===" This message was deleted",[w,P]=ne.useState(!1),[K,J]=ne.useState(!1),[Z,oe]=ne.useState(!1),[le,se]=ne.useState(!1),[pe,xe]=ne.useState(e),me=ne.useRef(null),N=()=>{me.current&&(clearTimeout(me.current),me.current=null),P(!0)},x=()=>{me.current=setTimeout(()=>{!K&&!Z&&P(!1)},300)},R=()=>{pe.trim()!==e&&p(r,pe),se(!1)};return T.jsx("div",{className:"animate-slide-in message-group",style:{display:"flex",alignItems:"flex-end",flexDirection:n?"row-reverse":"row",marginBottom:"var(--spacing-md)",maxWidth:"85%",alignSelf:n?"flex-end":"flex-start",position:"relative",gap:"8px"},onMouseEnter:N,onMouseLeave:x,children:T.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:n?"flex-end":"flex-start",flex:1},children:[T.jsxs("div",{style:{position:"relative"},children:[T.jsx("div",{style:{position:"absolute",[n?"right":"left"]:"calc(100% + 8px)",top:"50%",transform:"translateY(-50%)",display:"flex",gap:"4px",alignItems:"center",zIndex:10,pointerEvents:"none"},children:(w||K||Z)&&!le&&!S&&T.jsxs("div",{style:{display:"flex",gap:"4px",alignItems:"center",pointerEvents:"auto"},children:[T.jsxs("div",{style:{position:"relative",width:"32px",height:"32px"},children:[T.jsx("button",{onClick:()=>oe(!Z),style:{background:"var(--bg-elevated)",border:"1px solid var(--border-color)",color:"var(--text-secondary)",cursor:"pointer",width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 5px rgba(0,0,0,0.05)",padding:0},title:"Add Reaction",children:T.jsx(lE,{size:14})}),Z&&T.jsx("div",{style:{position:"absolute",bottom:"100%",left:n?"auto":0,right:n?0:"auto",marginBottom:"4px",backgroundColor:"var(--bg-elevated)",border:"1px solid var(--border-color)",borderRadius:"24px",padding:"4px 8px",display:"flex",gap:"4px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",zIndex:40,width:"max-content"},children:V2.map(I=>T.jsx("button",{onClick:()=>{f(r,I),oe(!1)},className:"emoji-btn",style:{background:"transparent",border:"none",cursor:"pointer",fontSize:"18px",padding:"2px",transition:"transform 0.1s"},children:I},I))})]}),n&&T.jsxs("div",{style:{position:"relative",width:"24px",height:"24px"},children:[T.jsx("button",{onClick:()=>J(!K),style:{background:"transparent",border:"none",color:"var(--text-tertiary)",cursor:"pointer",padding:"0",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",width:"24px",height:"24px"},children:T.jsx(sE,{size:16})}),K&&T.jsxs("div",{style:{position:"absolute",bottom:"100%",right:0,backgroundColor:"var(--bg-elevated)",border:"1px solid var(--border-color)",borderRadius:"12px",padding:"4px",minWidth:"140px",boxShadow:"0 4px 12px rgba(0,0,0,0.1)",zIndex:30,display:"flex",flexDirection:"column",gap:"2px"},children:[T.jsxs("button",{onClick:()=>{se(!0),J(!1)},style:Sp,children:[T.jsx(a2,{size:14})," Edit"]}),T.jsxs("button",{onClick:()=>g(r,!0),style:{...Sp,color:"#ef4444"},children:[T.jsx(h0,{size:14})," Delete Everyone"]}),T.jsxs("button",{onClick:()=>g(r,!1),style:Sp,children:[T.jsx(h0,{size:14})," Delete for Me"]})]})]})]})}),u&&Object.keys(u).length>0&&T.jsx("div",{style:{position:"absolute",bottom:"-22px",[n?"left":"right"]:"12px",display:"flex",gap:"4px",backgroundColor:"var(--bg-tertiary)",borderRadius:"12px",padding:"2px 6px",border:"2px solid var(--bg-primary)",filter:S?"grayscale(1)":"none",opacity:S?.6:1,zIndex:15,boxShadow:"0 1px 2px rgba(0,0,0,0.05)",pointerEvents:"auto"},onMouseEnter:N,children:Object.entries(u).map(([I,D])=>T.jsxs("span",{style:{fontSize:"12px"},children:[I," ",D>1&&D]},I))}),T.jsx("div",{style:{padding:o?"4px":S?"6px 10px":"8px 14px",borderRadius:"20px",borderBottomRightRadius:n?"4px":"20px",borderBottomLeftRadius:n?"20px":"4px",backgroundColor:S?"transparent":n?"var(--accent-primary)":"var(--bg-elevated)",color:S?"var(--text-tertiary)":n?"#ffffff":"var(--text-primary)",fontStyle:S?"italic":"normal",boxShadow:S?"none":"0 1px 2px rgba(0,0,0,0.1)",fontSize:S?"0.75rem":"0.9rem",lineHeight:1.6,wordBreak:"break-word",border:S?"1px dashed var(--border-color)":n?"none":"1px solid var(--border-color)",position:"relative",minWidth:le?"200px":"auto",opacity:S?.7:1,filter:S?"grayscale(1)":"none",zIndex:5},children:le?T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[T.jsx("input",{value:pe,onChange:I=>xe(I.target.value),autoFocus:!0,style:{background:"rgba(255,255,255,0.2)",border:"none",borderRadius:"8px",padding:"4px 8px",color:"inherit",outline:"none",width:"100%"}}),T.jsx("button",{onClick:R,style:{background:"none",border:"none",cursor:"pointer",color:"inherit"},children:T.jsx(rE,{size:16})}),T.jsx("button",{onClick:()=>se(!1),style:{background:"none",border:"none",cursor:"pointer",color:"inherit",opacity:.7},children:T.jsx(fE,{size:16})})]}):T.jsxs(T.Fragment,{children:[o&&T.jsx("img",{src:o,alt:"attachment",style:{maxWidth:"100%",maxHeight:"300px",width:"auto",objectFit:"cover",borderRadius:"16px",marginBottom:e?"8px":"0",display:"block",cursor:"pointer"},onClick:()=>window.open(o,"_blank")}),e&&T.jsx("span",{style:{padding:o?"8px 12px":"0"},children:e})]})})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginTop:"4px"},children:[!le&&T.jsx("span",{style:{fontSize:"0.7rem",color:"var(--text-tertiary)",marginLeft:n?0:"8px",marginRight:n?"8px":0,fontWeight:500},children:s}),y&&!S&&T.jsx("span",{style:{fontSize:"0.65rem",color:"var(--text-tertiary)",fontStyle:"italic",opacity:.8},children:"(edited)"}),T.jsx(M2,{status:E,timestamp:s,isSender:n})]})]})})},Sp={background:"transparent",border:"none",cursor:"pointer",fontSize:"13px",padding:"8px 12px",textAlign:"left",color:"var(--text-primary)",display:"flex",alignItems:"center",gap:"8px",width:"100%"},U2=({userName:r,isVisible:e})=>e?T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 16px",marginBottom:"8px",animation:"fadeIn 0.2s ease-in"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",padding:"10px 16px",backgroundColor:"var(--bg-elevated)",borderRadius:"20px",border:"1px solid var(--border-color)",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},children:[T.jsxs("span",{style:{fontSize:"14px",color:"var(--text-secondary)",fontStyle:"italic"},children:[r||"Someone"," is typing"]}),T.jsxs("div",{style:{display:"flex",gap:"3px",alignItems:"center"},children:[T.jsx("div",{className:"typing-dot",style:{animationDelay:"0s"}}),T.jsx("div",{className:"typing-dot",style:{animationDelay:"0.2s"}}),T.jsx("div",{className:"typing-dot",style:{animationDelay:"0.4s"}})]})]}),T.jsx("style",{children:`
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translateY(5px);
          }
          to {
            opacity: 1;
            transform: translateY(0);
          }
        }

        @keyframes typingBounce {
          0%, 60%, 100% {
            transform: translateY(0);
          }
          30% {
            transform: translateY(-8px);
          }
        }

        .typing-dot {
          width: 6px;
          height: 6px;
          border-radius: 50%;
          background-color: var(--accent-primary);
          animation: typingBounce 1.4s infinite ease-in-out;
        }
      `})]}):null,Bi=Object.create(null);Bi.open="0";Bi.close="1";Bi.ping="2";Bi.pong="3";Bi.message="4";Bi.upgrade="5";Bi.noop="6";const dh=Object.create(null);Object.keys(Bi).forEach(r=>{dh[Bi[r]]=r});const Fp={type:"error",data:"parser error"},dE=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",pE=typeof ArrayBuffer=="function",mE=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,xm=({type:r,data:e},n,s)=>dE&&e instanceof Blob?n?s(e):f0(e,s):pE&&(e instanceof ArrayBuffer||mE(e))?n?s(e):f0(new Blob([e]),s):s(Bi[r]+(e||"")),f0=(r,e)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];e("b"+(s||""))},n.readAsDataURL(r)};function d0(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let wp;function P2(r,e){if(dE&&r.data instanceof Blob)return r.data.arrayBuffer().then(d0).then(e);if(pE&&(r.data instanceof ArrayBuffer||mE(r.data)))return e(d0(r.data));xm(r,!1,n=>{wp||(wp=new TextEncoder),e(wp.encode(n))})}const p0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Fl=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<p0.length;r++)Fl[p0.charCodeAt(r)]=r;const z2=r=>{let e=r.length*.75,n=r.length,s,o=0,u,f,p,g;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);const y=new ArrayBuffer(e),E=new Uint8Array(y);for(s=0;s<n;s+=4)u=Fl[r.charCodeAt(s)],f=Fl[r.charCodeAt(s+1)],p=Fl[r.charCodeAt(s+2)],g=Fl[r.charCodeAt(s+3)],E[o++]=u<<2|f>>4,E[o++]=(f&15)<<4|p>>2,E[o++]=(p&3)<<6|g&63;return y},j2=typeof ArrayBuffer=="function",Cm=(r,e)=>{if(typeof r!="string")return{type:"message",data:gE(r,e)};const n=r.charAt(0);return n==="b"?{type:"message",data:B2(r.substring(1),e)}:dh[n]?r.length>1?{type:dh[n],data:r.substring(1)}:{type:dh[n]}:Fp},B2=(r,e)=>{if(j2){const n=z2(r);return gE(n,e)}else return{base64:!0,data:r}},gE=(r,e)=>e==="blob"?r instanceof Blob?r:new Blob([r]):r instanceof ArrayBuffer?r:r.buffer,yE="",q2=(r,e)=>{const n=r.length,s=new Array(n);let o=0;r.forEach((u,f)=>{xm(u,!1,p=>{s[f]=p,++o===n&&e(s.join(yE))})})},H2=(r,e)=>{const n=r.split(yE),s=[];for(let o=0;o<n.length;o++){const u=Cm(n[o],e);if(s.push(u),u.type==="error")break}return s};function F2(){return new TransformStream({transform(r,e){P2(r,n=>{const s=n.length;let o;if(s<126)o=new Uint8Array(1),new DataView(o.buffer).setUint8(0,s);else if(s<65536){o=new Uint8Array(3);const u=new DataView(o.buffer);u.setUint8(0,126),u.setUint16(1,s)}else{o=new Uint8Array(9);const u=new DataView(o.buffer);u.setUint8(0,127),u.setBigUint64(1,BigInt(s))}r.data&&typeof r.data!="string"&&(o[0]|=128),e.enqueue(o),e.enqueue(n)})}})}let Rp;function nh(r){return r.reduce((e,n)=>e+n.length,0)}function ih(r,e){if(r[0].length===e)return r.shift();const n=new Uint8Array(e);let s=0;for(let o=0;o<e;o++)n[o]=r[0][s++],s===r[0].length&&(r.shift(),s=0);return r.length&&s<r[0].length&&(r[0]=r[0].slice(s)),n}function G2(r,e){Rp||(Rp=new TextDecoder);const n=[];let s=0,o=-1,u=!1;return new TransformStream({transform(f,p){for(n.push(f);;){if(s===0){if(nh(n)<1)break;const g=ih(n,1);u=(g[0]&128)===128,o=g[0]&127,o<126?s=3:o===126?s=1:s=2}else if(s===1){if(nh(n)<2)break;const g=ih(n,2);o=new DataView(g.buffer,g.byteOffset,g.length).getUint16(0),s=3}else if(s===2){if(nh(n)<8)break;const g=ih(n,8),y=new DataView(g.buffer,g.byteOffset,g.length),E=y.getUint32(0);if(E>Math.pow(2,21)-1){p.enqueue(Fp);break}o=E*Math.pow(2,32)+y.getUint32(4),s=3}else{if(nh(n)<o)break;const g=ih(n,o);p.enqueue(Cm(u?g:Rp.decode(g),e)),s=0}if(o===0||o>r){p.enqueue(Fp);break}}}})}const _E=4;function Vt(r){if(r)return Y2(r)}function Y2(r){for(var e in Vt.prototype)r[e]=Vt.prototype[e];return r}Vt.prototype.on=Vt.prototype.addEventListener=function(r,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(e),this};Vt.prototype.once=function(r,e){function n(){this.off(r,n),e.apply(this,arguments)}return n.fn=e,this.on(r,n),this};Vt.prototype.off=Vt.prototype.removeListener=Vt.prototype.removeAllListeners=Vt.prototype.removeEventListener=function(r,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+r];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var s,o=0;o<n.length;o++)if(s=n[o],s===e||s.fn===e){n.splice(o,1);break}return n.length===0&&delete this._callbacks["$"+r],this};Vt.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+r],s=1;s<arguments.length;s++)e[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,o=n.length;s<o;++s)n[s].apply(this,e)}return this};Vt.prototype.emitReserved=Vt.prototype.emit;Vt.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};Vt.prototype.hasListeners=function(r){return!!this.listeners(r).length};const Kh=typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0),Gn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),K2="arraybuffer";function vE(r,...e){return e.reduce((n,s)=>(r.hasOwnProperty(s)&&(n[s]=r[s]),n),{})}const Q2=Gn.setTimeout,X2=Gn.clearTimeout;function Qh(r,e){e.useNativeTimers?(r.setTimeoutFn=Q2.bind(Gn),r.clearTimeoutFn=X2.bind(Gn)):(r.setTimeoutFn=Gn.setTimeout.bind(Gn),r.clearTimeoutFn=Gn.clearTimeout.bind(Gn))}const $2=1.33;function W2(r){return typeof r=="string"?J2(r):Math.ceil((r.byteLength||r.size)*$2)}function J2(r){let e=0,n=0;for(let s=0,o=r.length;s<o;s++)e=r.charCodeAt(s),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(s++,n+=4);return n}function EE(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function Z2(r){let e="";for(let n in r)r.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(r[n]));return e}function eR(r){let e={},n=r.split("&");for(let s=0,o=n.length;s<o;s++){let u=n[s].split("=");e[decodeURIComponent(u[0])]=decodeURIComponent(u[1])}return e}class tR extends Error{constructor(e,n,s){super(e),this.description=n,this.context=s,this.type="TransportError"}}class Im extends Vt{constructor(e){super(),this.writable=!1,Qh(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,n,s){return super.emitReserved("error",new tR(e,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Cm(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=Z2(e);return n.length?"?"+n:""}}class nR extends Im{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};H2(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,q2(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=EE()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}}let TE=!1;try{TE=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const iR=TE;function rR(){}class sR extends nR{constructor(e){if(super(e),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,n){const s=this.request({method:"POST",data:e});s.on("success",n),s.on("error",(o,u)=>{this.onError("xhr post error",o,u)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=e}}let po=class ph extends Vt{constructor(e,n,s){super(),this.createRequest=e,Qh(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var e;const n=vE(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let o in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(o)&&s.setRequestHeader(o,this._opts.extraHeaders[o])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var o;s.readyState===3&&((o=this._opts.cookieJar)===null||o===void 0||o.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(o){this.setTimeoutFn(()=>{this._onError(o)},0);return}typeof document<"u"&&(this._index=ph.requestsCount++,ph.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=rR,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete ph.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};po.requestsCount=0;po.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",m0);else if(typeof addEventListener=="function"){const r="onpagehide"in Gn?"pagehide":"unload";addEventListener(r,m0,!1)}}function m0(){for(let r in po.requests)po.requests.hasOwnProperty(r)&&po.requests[r].abort()}const aR=(function(){const r=bE({xdomain:!1});return r&&r.responseType!==null})();class oR extends sR{constructor(e){super(e);const n=e&&e.forceBase64;this.supportsBinary=aR&&!n}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new po(bE,this.uri(),e)}}function bE(r){const e=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||iR))return new XMLHttpRequest}catch{}if(!e)try{return new Gn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const AE=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class lR extends Im{get name(){return"websocket"}doOpen(){const e=this.uri(),n=this.opts.protocols,s=AE?{}:vE(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,n,s)}catch(o){return this.emitReserved("error",o)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const s=e[n],o=n===e.length-1;xm(s,this.supportsBinary,u=>{try{this.doWrite(s,u)}catch{}o&&Kh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=EE()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}}const xp=Gn.WebSocket||Gn.MozWebSocket;class uR extends lR{createSocket(e,n,s){return AE?new xp(e,n,s):n?new xp(e,n):new xp(e)}doWrite(e,n){this.ws.send(n)}}class cR extends Im{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const n=G2(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(n).getReader(),o=F2();o.readable.pipeTo(e.writable),this._writer=o.writable.getWriter();const u=()=>{s.read().then(({done:p,value:g})=>{p||(this.onPacket(g),u())}).catch(p=>{})};u();const f={type:"open"};this.query.sid&&(f.data=`{"sid":"${this.query.sid}"}`),this._writer.write(f).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const s=e[n],o=n===e.length-1;this._writer.write(s).then(()=>{o&&Kh(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const hR={websocket:uR,webtransport:cR,polling:oR},fR=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,dR=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Gp(r){if(r.length>8e3)throw"URI too long";const e=r,n=r.indexOf("["),s=r.indexOf("]");n!=-1&&s!=-1&&(r=r.substring(0,n)+r.substring(n,s).replace(/:/g,";")+r.substring(s,r.length));let o=fR.exec(r||""),u={},f=14;for(;f--;)u[dR[f]]=o[f]||"";return n!=-1&&s!=-1&&(u.source=e,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=pR(u,u.path),u.queryKey=mR(u,u.query),u}function pR(r,e){const n=/\/{2,9}/g,s=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&s.splice(0,1),e.slice(-1)=="/"&&s.splice(s.length-1,1),s}function mR(r,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,o,u){o&&(n[o]=u)}),n}const Yp=typeof addEventListener=="function"&&typeof removeEventListener=="function",mh=[];Yp&&addEventListener("offline",()=>{mh.forEach(r=>r())},!1);class rs extends Vt{constructor(e,n){if(super(),this.binaryType=K2,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(n=e,e=null),e){const s=Gp(e);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=Gp(n.host).host);Qh(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const o=s.prototype.name;this.transports.push(o),this._transportsByName[o]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=eR(this.opts.query)),Yp&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},mh.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=_E,n.transport=e,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&rs.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(e);n.open(),this.setTransport(n)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",rs.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=e.data,this._onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const o=this.writeBuffer[s].data;if(o&&(n+=W2(o)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,Kh(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,n,s){return this._sendPacket("message",e,n,s),this}send(e,n,s){return this._sendPacket("message",e,n,s),this}_sendPacket(e,n,s,o){if(typeof n=="function"&&(o=n,n=void 0),typeof s=="function"&&(o=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const u={type:e,data:n,options:s};this.emitReserved("packetCreate",u),this.writeBuffer.push(u),o&&this.once("flush",o),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(rs.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Yp&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=mh.indexOf(this._offlineEventListener);s!==-1&&mh.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this._prevBufferLen=0}}}rs.protocol=_E;class gR extends rs{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let n=this.createTransport(e),s=!1;rs.priorWebsocketSuccess=!1;const o=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",S=>{if(!s)if(S.type==="pong"&&S.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;rs.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(E(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const w=new Error("probe error");w.transport=n.name,this.emitReserved("upgradeError",w)}}))};function u(){s||(s=!0,E(),n.close(),n=null)}const f=S=>{const w=new Error("probe error: "+S);w.transport=n.name,u(),this.emitReserved("upgradeError",w)};function p(){f("transport closed")}function g(){f("socket closed")}function y(S){n&&S.name!==n.name&&u()}const E=()=>{n.removeListener("open",o),n.removeListener("error",f),n.removeListener("close",p),this.off("close",g),this.off("upgrading",y)};n.once("open",o),n.once("error",f),n.once("close",p),this.once("close",g),this.once("upgrading",y),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const n=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&n.push(e[s]);return n}}let yR=class extends gR{constructor(e,n={}){const s=typeof e=="object"?e:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(o=>hR[o]).filter(o=>!!o)),super(e,s)}};function _R(r,e="",n){let s=r;n=n||typeof location<"u"&&location,r==null&&(r=n.protocol+"//"+n.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=n.protocol+r:r=n.host+r),/^(https?|wss?):\/\//.test(r)||(typeof n<"u"?r=n.protocol+"//"+r:r="https://"+r),s=Gp(r)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const u=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+u+":"+s.port+e,s.href=s.protocol+"://"+u+(n&&n.port===s.port?"":":"+s.port),s}const vR=typeof ArrayBuffer=="function",ER=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,SE=Object.prototype.toString,TR=typeof Blob=="function"||typeof Blob<"u"&&SE.call(Blob)==="[object BlobConstructor]",bR=typeof File=="function"||typeof File<"u"&&SE.call(File)==="[object FileConstructor]";function Nm(r){return vR&&(r instanceof ArrayBuffer||ER(r))||TR&&r instanceof Blob||bR&&r instanceof File}function gh(r,e){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let n=0,s=r.length;n<s;n++)if(gh(r[n]))return!0;return!1}if(Nm(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return gh(r.toJSON(),!0);for(const n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&gh(r[n]))return!0;return!1}function AR(r){const e=[],n=r.data,s=r;return s.data=Kp(n,e),s.attachments=e.length,{packet:s,buffers:e}}function Kp(r,e){if(!r)return r;if(Nm(r)){const n={_placeholder:!0,num:e.length};return e.push(r),n}else if(Array.isArray(r)){const n=new Array(r.length);for(let s=0;s<r.length;s++)n[s]=Kp(r[s],e);return n}else if(typeof r=="object"&&!(r instanceof Date)){const n={};for(const s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=Kp(r[s],e));return n}return r}function SR(r,e){return r.data=Qp(r.data,e),delete r.attachments,r}function Qp(r,e){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<e.length)return e[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let n=0;n<r.length;n++)r[n]=Qp(r[n],e);else if(typeof r=="object")for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(r[n]=Qp(r[n],e));return r}const wR=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"];var je;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(je||(je={}));class RR{constructor(e){this.replacer=e}encode(e){return(e.type===je.EVENT||e.type===je.ACK)&&gh(e)?this.encodeAsBinary({type:e.type===je.EVENT?je.BINARY_EVENT:je.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===je.BINARY_EVENT||e.type===je.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=AR(e),s=this.encodeAsString(n.packet),o=n.buffers;return o.unshift(s),o}}class Dm extends Vt{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const s=n.type===je.BINARY_EVENT;s||n.type===je.BINARY_ACK?(n.type=s?je.EVENT:je.ACK,this.reconstructor=new xR(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Nm(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const s={type:Number(e.charAt(0))};if(je[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===je.BINARY_EVENT||s.type===je.BINARY_ACK){const u=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const f=e.substring(u,n);if(f!=Number(f)||e.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(f)}if(e.charAt(n+1)==="/"){const u=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););s.nsp=e.substring(u,n)}else s.nsp="/";const o=e.charAt(n+1);if(o!==""&&Number(o)==o){const u=n+1;for(;++n;){const f=e.charAt(n);if(f==null||Number(f)!=f){--n;break}if(n===e.length)break}s.id=Number(e.substring(u,n+1))}if(e.charAt(++n)){const u=this.tryParse(e.substr(n));if(Dm.isPayloadValid(s.type,u))s.data=u;else throw new Error("invalid payload")}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case je.CONNECT:return g0(n);case je.DISCONNECT:return n===void 0;case je.CONNECT_ERROR:return typeof n=="string"||g0(n);case je.EVENT:case je.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&wR.indexOf(n[0])===-1);case je.ACK:case je.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class xR{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=SR(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function g0(r){return Object.prototype.toString.call(r)==="[object Object]"}const CR=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Dm,Encoder:RR,get PacketType(){return je}},Symbol.toStringTag,{value:"Module"}));function si(r,e,n){return r.on(e,n),function(){r.off(e,n)}}const IR=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class wE extends Vt{constructor(e,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[si(e,"open",this.onopen.bind(this)),si(e,"packet",this.onpacket.bind(this)),si(e,"error",this.onerror.bind(this)),si(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){var s,o,u;if(IR.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const f={type:je.EVENT,data:n};if(f.options={},f.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const E=this.ids++,S=n.pop();this._registerAckCallback(E,S),f.id=E}const p=(o=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||o===void 0?void 0:o.writable,g=this.connected&&!(!((u=this.io.engine)===null||u===void 0)&&u._hasPingExpired());return this.flags.volatile&&!p||(g?(this.notifyOutgoingListeners(f),this.packet(f)):this.sendBuffer.push(f)),this.flags={},this}_registerAckCallback(e,n){var s;const o=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(o===void 0){this.acks[e]=n;return}const u=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let p=0;p<this.sendBuffer.length;p++)this.sendBuffer[p].id===e&&this.sendBuffer.splice(p,1);n.call(this,new Error("operation has timed out"))},o),f=(...p)=>{this.io.clearTimeoutFn(u),n.apply(this,p)};f.withError=!0,this.acks[e]=f}emitWithAck(e,...n){return new Promise((s,o)=>{const u=(f,p)=>f?o(f):s(p);u.withError=!0,n.push(u),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((o,...u)=>(this._queue[0],o!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(o)):(this._queue.shift(),n&&n(null,...u)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:je.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(s=>String(s.id)===e)){const s=this.acks[e];delete this.acks[e],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case je.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case je.EVENT:case je.BINARY_EVENT:this.onevent(e);break;case je.ACK:case je.BINARY_ACK:this.onack(e);break;case je.DISCONNECT:this.ondisconnect();break;case je.CONNECT_ERROR:this.destroy();const s=new Error(e.data.message);s.data=e.data.data,this.emitReserved("connect_error",s);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let s=!1;return function(...o){s||(s=!0,n.packet({type:je.ACK,id:e,data:o}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(delete this.acks[e.id],n.withError&&e.data.unshift(null),n.apply(this,e.data))}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:je.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(e===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,e.data)}}}function Co(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}Co.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*r);r=(Math.floor(e*10)&1)==0?r-n:r+n}return Math.min(r,this.max)|0};Co.prototype.reset=function(){this.attempts=0};Co.prototype.setMin=function(r){this.ms=r};Co.prototype.setMax=function(r){this.max=r};Co.prototype.setJitter=function(r){this.jitter=r};class Xp extends Vt{constructor(e,n){var s;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Qh(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Co({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const o=n.parser||CR;this.encoder=new o.Encoder,this.decoder=new o.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new yR(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const o=si(n,"open",function(){s.onopen(),e&&e()}),u=p=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",p),e?e(p):this.maybeReconnectOnOpen()},f=si(n,"error",u);if(this._timeout!==!1){const p=this._timeout,g=this.setTimeoutFn(()=>{o(),u(new Error("timeout")),n.close()},p);this.opts.autoUnref&&g.unref(),this.subs.push(()=>{this.clearTimeoutFn(g)})}return this.subs.push(o),this.subs.push(f),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(si(e,"ping",this.onping.bind(this)),si(e,"data",this.ondata.bind(this)),si(e,"error",this.onerror.bind(this)),si(e,"close",this.onclose.bind(this)),si(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Kh(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new wE(this,e,n),this.nsps[e]=s),s}_destroy(e){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let s=0;s<n.length;s++)this.engine.write(n[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(o=>{o?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",o)):e.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Bl={};function yh(r,e){typeof r=="object"&&(e=r,r=void 0),e=e||{};const n=_R(r,e.path||"/socket.io"),s=n.source,o=n.id,u=n.path,f=Bl[o]&&u in Bl[o].nsps,p=e.forceNew||e["force new connection"]||e.multiplex===!1||f;let g;return p?g=new Xp(s,e):(Bl[o]||(Bl[o]=new Xp(s,e)),g=Bl[o]),n.query&&!e.query&&(e.query=n.queryKey),g.socket(n.path,e)}Object.assign(yh,{Manager:Xp,Socket:wE,io:yh,connect:yh});const NR="http://localhost:3001",ft=yh(NR,{autoConnect:!1}),RE=()=>{const[r,e]=ne.useState(ft.connected),[n,s]=ne.useState(null),[o,u]=ne.useState(null);return ne.useEffect(()=>{ft.connected||ft.connect();const E=()=>{console.log("Connected to server"),e(!0)},S=()=>{console.log("Disconnected from server"),e(!1)},w=J=>{s(J)},P=J=>{u(J)},K=()=>{u(null)};return ft.on("connect",E),ft.on("disconnect",S),ft.on("receive_message",w),ft.on("user_typing",P),ft.on("user_stopped_typing",K),()=>{ft.off("connect",E),ft.off("disconnect",S),ft.off("receive_message",w),ft.off("user_typing",P),ft.off("user_stopped_typing",K)}},[]),{socket:ft,isConnected:r,login:E=>{ft.connected?ft.emit("login",E):(ft.connect(),ft.once("connect",()=>ft.emit("login",E)))},logout:()=>{ft.disconnect()},sendMessage:E=>{ft.emit("message",E)},receivedMessage:n,emitTyping:(E,S,w)=>{w?ft.emit("typing_start",{recipientId:E,userName:S}):ft.emit("typing_stop",{recipientId:E})},userTyping:o}},DR=()=>{};var y0={};const xE=function(r){const e=[];let n=0;for(let s=0;s<r.length;s++){let o=r.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<r.length&&(r.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},kR=function(r){const e=[];let n=0,s=0;for(;n<r.length;){const o=r[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const u=r[n++];e[s++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=r[n++],f=r[n++],p=r[n++],g=((o&7)<<18|(u&63)<<12|(f&63)<<6|p&63)-65536;e[s++]=String.fromCharCode(55296+(g>>10)),e[s++]=String.fromCharCode(56320+(g&1023))}else{const u=r[n++],f=r[n++];e[s++]=String.fromCharCode((o&15)<<12|(u&63)<<6|f&63)}}return e.join("")},CE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(r,e){if(!Array.isArray(r))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<r.length;o+=3){const u=r[o],f=o+1<r.length,p=f?r[o+1]:0,g=o+2<r.length,y=g?r[o+2]:0,E=u>>2,S=(u&3)<<4|p>>4;let w=(p&15)<<2|y>>6,P=y&63;g||(P=64,f||(w=64)),s.push(n[E],n[S],n[w],n[P])}return s.join("")},encodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(r):this.encodeByteArray(xE(r),e)},decodeString(r,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(r):kR(this.decodeStringToByteArray(r,e))},decodeStringToByteArray(r,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<r.length;){const u=n[r.charAt(o++)],p=o<r.length?n[r.charAt(o)]:0;++o;const y=o<r.length?n[r.charAt(o)]:64;++o;const S=o<r.length?n[r.charAt(o)]:64;if(++o,u==null||p==null||y==null||S==null)throw new OR;const w=u<<2|p>>4;if(s.push(w),y!==64){const P=p<<4&240|y>>2;if(s.push(P),S!==64){const K=y<<6&192|S;s.push(K)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let r=0;r<this.ENCODED_VALS.length;r++)this.byteToCharMap_[r]=this.ENCODED_VALS.charAt(r),this.charToByteMap_[this.byteToCharMap_[r]]=r,this.byteToCharMapWebSafe_[r]=this.ENCODED_VALS_WEBSAFE.charAt(r),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[r]]=r,r>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(r)]=r,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(r)]=r)}}};class OR extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MR=function(r){const e=xE(r);return CE.encodeByteArray(e,!0)},Ch=function(r){return MR(r).replace(/\./g,"")},IE=function(r){try{return CE.decodeString(r,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function VR(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const LR=()=>VR().__FIREBASE_DEFAULTS__,UR=()=>{if(typeof process>"u"||typeof y0>"u")return;const r=y0.__FIREBASE_DEFAULTS__;if(r)return JSON.parse(r)},PR=()=>{if(typeof document>"u")return;let r;try{r=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=r&&IE(r[1]);return e&&JSON.parse(e)},Xh=()=>{try{return DR()||LR()||UR()||PR()}catch(r){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${r}`);return}},NE=r=>Xh()?.emulatorHosts?.[r],DE=r=>{const e=NE(r);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},kE=()=>Xh()?.config,OE=r=>Xh()?.[`_${r}`];class zR{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}function gs(r){try{return(r.startsWith("http://")||r.startsWith("https://")?new URL(r).hostname:r).endsWith(".cloudworkstations.dev")}catch{return!1}}async function km(r){return(await fetch(r,{credentials:"include"})).ok}function ME(r,e){if(r.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=r.iat||0,u=r.sub||r.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const f={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...r};return[Ch(JSON.stringify(n)),Ch(JSON.stringify(f)),""].join(".")}const Wl={};function jR(){const r={prod:[],emulator:[]};for(const e of Object.keys(Wl))Wl[e]?r.emulator.push(e):r.prod.push(e);return r}function BR(r){let e=document.getElementById(r),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",r),n=!0),{created:n,element:e}}let _0=!1;function Om(r,e){if(typeof window>"u"||typeof document>"u"||!gs(window.location.host)||Wl[r]===e||Wl[r]||_0)return;Wl[r]=e;function n(w){return`__firebase__banner__${w}`}const s="__firebase__banner",u=jR().prod.length>0;function f(){const w=document.getElementById(s);w&&w.remove()}function p(w){w.style.display="flex",w.style.background="#7faaf0",w.style.position="fixed",w.style.bottom="5px",w.style.left="5px",w.style.padding=".5em",w.style.borderRadius="5px",w.style.alignItems="center"}function g(w,P){w.setAttribute("width","24"),w.setAttribute("id",P),w.setAttribute("height","24"),w.setAttribute("viewBox","0 0 24 24"),w.setAttribute("fill","none"),w.style.marginLeft="-6px"}function y(){const w=document.createElement("span");return w.style.cursor="pointer",w.style.marginLeft="16px",w.style.fontSize="24px",w.innerHTML=" &times;",w.onclick=()=>{_0=!0,f()},w}function E(w,P){w.setAttribute("id",P),w.innerText="Learn more",w.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",w.setAttribute("target","__blank"),w.style.paddingLeft="5px",w.style.textDecoration="underline"}function S(){const w=BR(s),P=n("text"),K=document.getElementById(P)||document.createElement("span"),J=n("learnmore"),Z=document.getElementById(J)||document.createElement("a"),oe=n("preprendIcon"),le=document.getElementById(oe)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(w.created){const se=w.element;p(se),E(Z,J);const pe=y();g(le,oe),se.append(le,K,Z,pe),document.body.appendChild(se)}u?(K.innerText="Preview backend disconnected.",le.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(le.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,K.innerText="Preview backend running in this workspace."),K.setAttribute("id",P)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",S):S()}function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qR(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function HR(){const r=Xh()?.forceEnvironment;if(r==="node")return!0;if(r==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function GR(){const r=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof r=="object"&&r.id!==void 0}function YR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function KR(){const r=sn();return r.indexOf("MSIE ")>=0||r.indexOf("Trident/")>=0}function QR(){return!HR()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function XR(){try{return typeof indexedDB=="object"}catch{return!1}}function $R(){return new Promise((r,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),r(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(n){e(n)}})}const WR="FirebaseError";class Hi extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=WR,Object.setPrototypeOf(this,Hi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,mu.prototype.create)}}class mu{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,u=this.errors[e],f=u?JR(u,s):"Error",p=`${this.serviceName}: ${f} (${o}).`;return new Hi(o,p,s)}}function JR(r,e){return r.replace(ZR,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const ZR=/\{\$([^}]+)}/g;function ex(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}function ia(r,e){if(r===e)return!0;const n=Object.keys(r),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const u=r[o],f=e[o];if(v0(u)&&v0(f)){if(!ia(u,f))return!1}else if(u!==f)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function v0(r){return r!==null&&typeof r=="object"}function gu(r){const e=[];for(const[n,s]of Object.entries(r))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function Gl(r){const e={};return r.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,u]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(u)}}),e}function Yl(r){const e=r.indexOf("?");if(!e)return"";const n=r.indexOf("#",e);return r.substring(e,n>0?n:void 0)}function tx(r,e){const n=new nx(r,e);return n.subscribe.bind(n)}class nx{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");ix(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Cp),o.error===void 0&&(o.error=Cp),o.complete===void 0&&(o.complete=Cp);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),u}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ix(r,e){if(typeof r!="object"||r===null)return!1;for(const n of e)if(n in r&&typeof r[n]=="function")return!0;return!1}function Cp(){}function lt(r){return r&&r._delegate?r._delegate:r}class us{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const Ws="[DEFAULT]";class rx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new zR;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ax(e))try{this.getOrInitializeService({instanceIdentifier:Ws})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});s.resolve(u)}catch{}}}}clearInstance(e=Ws){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ws){return this.instances.has(e)}getOptions(e=Ws){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[u,f]of this.instancesDeferred.entries()){const p=this.normalizeInstanceIdentifier(u);s===p&&f.resolve(o)}return o}onInit(e,n){const s=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const u=this.instances.get(s);return u&&e(u,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:sx(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Ws){return this.component?this.component.multipleInstances?e:Ws:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function sx(r){return r===Ws?void 0:r}function ax(r){return r.instantiationMode==="EAGER"}class ox{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new rx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var Le;(function(r){r[r.DEBUG=0]="DEBUG",r[r.VERBOSE=1]="VERBOSE",r[r.INFO=2]="INFO",r[r.WARN=3]="WARN",r[r.ERROR=4]="ERROR",r[r.SILENT=5]="SILENT"})(Le||(Le={}));const lx={debug:Le.DEBUG,verbose:Le.VERBOSE,info:Le.INFO,warn:Le.WARN,error:Le.ERROR,silent:Le.SILENT},ux=Le.INFO,cx={[Le.DEBUG]:"log",[Le.VERBOSE]:"log",[Le.INFO]:"info",[Le.WARN]:"warn",[Le.ERROR]:"error"},hx=(r,e,...n)=>{if(e<r.logLevel)return;const s=new Date().toISOString(),o=cx[e];if(o)console[o](`[${s}]  ${r.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Mm{constructor(e){this.name=e,this._logLevel=ux,this._logHandler=hx,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Le))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?lx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Le.DEBUG,...e),this._logHandler(this,Le.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Le.VERBOSE,...e),this._logHandler(this,Le.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Le.INFO,...e),this._logHandler(this,Le.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Le.WARN,...e),this._logHandler(this,Le.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Le.ERROR,...e),this._logHandler(this,Le.ERROR,...e)}}const fx=(r,e)=>e.some(n=>r instanceof n);let E0,T0;function dx(){return E0||(E0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function px(){return T0||(T0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const VE=new WeakMap,$p=new WeakMap,LE=new WeakMap,Ip=new WeakMap,Vm=new WeakMap;function mx(r){const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("success",u),r.removeEventListener("error",f)},u=()=>{n(ss(r.result)),o()},f=()=>{s(r.error),o()};r.addEventListener("success",u),r.addEventListener("error",f)});return e.then(n=>{n instanceof IDBCursor&&VE.set(n,r)}).catch(()=>{}),Vm.set(e,r),e}function gx(r){if($p.has(r))return;const e=new Promise((n,s)=>{const o=()=>{r.removeEventListener("complete",u),r.removeEventListener("error",f),r.removeEventListener("abort",f)},u=()=>{n(),o()},f=()=>{s(r.error||new DOMException("AbortError","AbortError")),o()};r.addEventListener("complete",u),r.addEventListener("error",f),r.addEventListener("abort",f)});$p.set(r,e)}let Wp={get(r,e,n){if(r instanceof IDBTransaction){if(e==="done")return $p.get(r);if(e==="objectStoreNames")return r.objectStoreNames||LE.get(r);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ss(r[e])},set(r,e,n){return r[e]=n,!0},has(r,e){return r instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in r}};function yx(r){Wp=r(Wp)}function _x(r){return r===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=r.call(Np(this),e,...n);return LE.set(s,e.sort?e.sort():[e]),ss(s)}:px().includes(r)?function(...e){return r.apply(Np(this),e),ss(VE.get(this))}:function(...e){return ss(r.apply(Np(this),e))}}function vx(r){return typeof r=="function"?_x(r):(r instanceof IDBTransaction&&gx(r),fx(r,dx())?new Proxy(r,Wp):r)}function ss(r){if(r instanceof IDBRequest)return mx(r);if(Ip.has(r))return Ip.get(r);const e=vx(r);return e!==r&&(Ip.set(r,e),Vm.set(e,r)),e}const Np=r=>Vm.get(r);function Ex(r,e,{blocked:n,upgrade:s,blocking:o,terminated:u}={}){const f=indexedDB.open(r,e),p=ss(f);return s&&f.addEventListener("upgradeneeded",g=>{s(ss(f.result),g.oldVersion,g.newVersion,ss(f.transaction),g)}),n&&f.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),p.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),p}const Tx=["get","getKey","getAll","getAllKeys","count"],bx=["put","add","delete","clear"],Dp=new Map;function b0(r,e){if(!(r instanceof IDBDatabase&&!(e in r)&&typeof e=="string"))return;if(Dp.get(e))return Dp.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=bx.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||Tx.includes(n)))return;const u=async function(f,...p){const g=this.transaction(f,o?"readwrite":"readonly");let y=g.store;return s&&(y=y.index(p.shift())),(await Promise.all([y[n](...p),o&&g.done]))[0]};return Dp.set(e,u),u}yx(r=>({...r,get:(e,n,s)=>b0(e,n)||r.get(e,n,s),has:(e,n)=>!!b0(e,n)||r.has(e,n)}));class Ax{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Sx(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function Sx(r){return r.getComponent()?.type==="VERSION"}const Jp="@firebase/app",A0="0.14.7";const pr=new Mm("@firebase/app"),wx="@firebase/app-compat",Rx="@firebase/analytics-compat",xx="@firebase/analytics",Cx="@firebase/app-check-compat",Ix="@firebase/app-check",Nx="@firebase/auth",Dx="@firebase/auth-compat",kx="@firebase/database",Ox="@firebase/data-connect",Mx="@firebase/database-compat",Vx="@firebase/functions",Lx="@firebase/functions-compat",Ux="@firebase/installations",Px="@firebase/installations-compat",zx="@firebase/messaging",jx="@firebase/messaging-compat",Bx="@firebase/performance",qx="@firebase/performance-compat",Hx="@firebase/remote-config",Fx="@firebase/remote-config-compat",Gx="@firebase/storage",Yx="@firebase/storage-compat",Kx="@firebase/firestore",Qx="@firebase/ai",Xx="@firebase/firestore-compat",$x="firebase",Wx="12.8.0";const Zp="[DEFAULT]",Jx={[Jp]:"fire-core",[wx]:"fire-core-compat",[xx]:"fire-analytics",[Rx]:"fire-analytics-compat",[Ix]:"fire-app-check",[Cx]:"fire-app-check-compat",[Nx]:"fire-auth",[Dx]:"fire-auth-compat",[kx]:"fire-rtdb",[Ox]:"fire-data-connect",[Mx]:"fire-rtdb-compat",[Vx]:"fire-fn",[Lx]:"fire-fn-compat",[Ux]:"fire-iid",[Px]:"fire-iid-compat",[zx]:"fire-fcm",[jx]:"fire-fcm-compat",[Bx]:"fire-perf",[qx]:"fire-perf-compat",[Hx]:"fire-rc",[Fx]:"fire-rc-compat",[Gx]:"fire-gcs",[Yx]:"fire-gcs-compat",[Kx]:"fire-fst",[Xx]:"fire-fst-compat",[Qx]:"fire-vertex","fire-js":"fire-js",[$x]:"fire-js-all"};const Ih=new Map,Zx=new Map,em=new Map;function S0(r,e){try{r.container.addComponent(e)}catch(n){pr.debug(`Component ${e.name} failed to register with FirebaseApp ${r.name}`,n)}}function ra(r){const e=r.name;if(em.has(e))return pr.debug(`There were multiple attempts to register component ${e}.`),!1;em.set(e,r);for(const n of Ih.values())S0(n,r);for(const n of Zx.values())S0(n,r);return!0}function $h(r,e){const n=r.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),r.container.getProvider(e)}function Cn(r){return r==null?!1:r.settings!==void 0}const eC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},as=new mu("app","Firebase",eC);class tC{constructor(e,n,s){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new us("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw as.create("app-deleted",{appName:this._name})}}const fa=Wx;function UE(r,e={}){let n=r;typeof e!="object"&&(e={name:e});const s={name:Zp,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw as.create("bad-app-name",{appName:String(o)});if(n||(n=kE()),!n)throw as.create("no-options");const u=Ih.get(o);if(u){if(ia(n,u.options)&&ia(s,u.config))return u;throw as.create("duplicate-app",{appName:o})}const f=new ox(o);for(const g of em.values())f.addComponent(g);const p=new tC(n,s,f);return Ih.set(o,p),p}function Lm(r=Zp){const e=Ih.get(r);if(!e&&r===Zp&&kE())return UE();if(!e)throw as.create("no-app",{appName:r});return e}function Vi(r,e,n){let s=Jx[r]??r;n&&(s+=`-${n}`);const o=s.match(/\s|\//),u=e.match(/\s|\//);if(o||u){const f=[`Unable to register library "${s}" with version "${e}":`];o&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pr.warn(f.join(" "));return}ra(new us(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}const nC="firebase-heartbeat-database",iC=1,ru="firebase-heartbeat-store";let kp=null;function PE(){return kp||(kp=Ex(nC,iC,{upgrade:(r,e)=>{switch(e){case 0:try{r.createObjectStore(ru)}catch(n){console.warn(n)}}}}).catch(r=>{throw as.create("idb-open",{originalErrorMessage:r.message})})),kp}async function rC(r){try{const n=(await PE()).transaction(ru),s=await n.objectStore(ru).get(zE(r));return await n.done,s}catch(e){if(e instanceof Hi)pr.warn(e.message);else{const n=as.create("idb-get",{originalErrorMessage:e?.message});pr.warn(n.message)}}}async function w0(r,e){try{const s=(await PE()).transaction(ru,"readwrite");await s.objectStore(ru).put(e,zE(r)),await s.done}catch(n){if(n instanceof Hi)pr.warn(n.message);else{const s=as.create("idb-set",{originalErrorMessage:n?.message});pr.warn(s.message)}}}function zE(r){return`${r.name}!${r.options.appId}`}const sC=1024,aC=30;class oC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uC(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=R0();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:n}),this._heartbeatsCache.heartbeats.length>aC){const o=cC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){pr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=R0(),{heartbeatsToSend:n,unsentEntries:s}=lC(this._heartbeatsCache.heartbeats),o=Ch(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return pr.warn(e),""}}}function R0(){return new Date().toISOString().substring(0,10)}function lC(r,e=sC){const n=[];let s=r.slice();for(const o of r){const u=n.find(f=>f.agent===o.agent);if(u){if(u.dates.push(o.date),x0(n)>e){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),x0(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class uC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return XR()?$R().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await rC(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return w0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return w0(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function x0(r){return Ch(JSON.stringify({version:2,heartbeats:r})).length}function cC(r){if(r.length===0)return-1;let e=0,n=r[0].date;for(let s=1;s<r.length;s++)r[s].date<n&&(n=r[s].date,e=s);return e}function hC(r){ra(new us("platform-logger",e=>new Ax(e),"PRIVATE")),ra(new us("heartbeat",e=>new oC(e),"PRIVATE")),Vi(Jp,A0,r),Vi(Jp,A0,"esm2020"),Vi("fire-js","")}hC("");function jE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const fC=jE,BE=new mu("auth","Firebase",jE());const Nh=new Mm("@firebase/auth");function dC(r,...e){Nh.logLevel<=Le.WARN&&Nh.warn(`Auth (${fa}): ${r}`,...e)}function _h(r,...e){Nh.logLevel<=Le.ERROR&&Nh.error(`Auth (${fa}): ${r}`,...e)}function ui(r,...e){throw Um(r,...e)}function Li(r,...e){return Um(r,...e)}function qE(r,e,n){const s={...fC(),[e]:n};return new mu("auth","Firebase",s).create(e,{appName:r.name})}function fr(r){return qE(r,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Um(r,...e){if(typeof r!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=r.name),r._errorFactory.create(n,...s)}return BE.create(r,...e)}function Te(r,e,...n){if(!r)throw Um(e,...n)}function cr(r){const e="INTERNAL ASSERTION FAILED: "+r;throw _h(e),new Error(e)}function mr(r,e){r||cr(e)}function tm(){return typeof self<"u"&&self.location?.href||""}function pC(){return C0()==="http:"||C0()==="https:"}function C0(){return typeof self<"u"&&self.location?.protocol||null}function mC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pC()||GR()||"connection"in navigator)?navigator.onLine:!0}function gC(){if(typeof navigator>"u")return null;const r=navigator;return r.languages&&r.languages[0]||r.language||null}class yu{constructor(e,n){this.shortDelay=e,this.longDelay=n,mr(n>e,"Short delay should be less than long delay!"),this.isMobile=qR()||YR()}get(){return mC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Pm(r,e){mr(r.emulator,"Emulator should always be set here");const{url:n}=r.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}class HE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;cr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;cr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;cr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const yC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};const _C=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],vC=new yu(3e4,6e4);function ys(r,e){return r.tenantId&&!e.tenantId?{...e,tenantId:r.tenantId}:e}async function Fi(r,e,n,s,o={}){return FE(r,o,async()=>{let u={},f={};s&&(e==="GET"?f=s:u={body:JSON.stringify(s)});const p=gu({key:r.config.apiKey,...f}).slice(1),g=await r._getAdditionalHeaders();g["Content-Type"]="application/json",r.languageCode&&(g["X-Firebase-Locale"]=r.languageCode);const y={method:e,headers:g,...u};return FR()||(y.referrerPolicy="no-referrer"),r.emulatorConfig&&gs(r.emulatorConfig.host)&&(y.credentials="include"),HE.fetch()(await GE(r,r.config.apiHost,n,p),y)})}async function FE(r,e,n){r._canInitEmulator=!1;const s={...yC,...e};try{const o=new TC(r),u=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const f=await u.json();if("needConfirmation"in f)throw rh(r,"account-exists-with-different-credential",f);if(u.ok&&!("errorMessage"in f))return f;{const p=u.ok?f.errorMessage:f.error.message,[g,y]=p.split(" : ");if(g==="FEDERATED_USER_ID_ALREADY_LINKED")throw rh(r,"credential-already-in-use",f);if(g==="EMAIL_EXISTS")throw rh(r,"email-already-in-use",f);if(g==="USER_DISABLED")throw rh(r,"user-disabled",f);const E=s[g]||g.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw qE(r,E,y);ui(r,E)}}catch(o){if(o instanceof Hi)throw o;ui(r,"network-request-failed",{message:String(o)})}}async function _u(r,e,n,s,o={}){const u=await Fi(r,e,n,s,o);return"mfaPendingCredential"in u&&ui(r,"multi-factor-auth-required",{_serverResponse:u}),u}async function GE(r,e,n,s){const o=`${e}${n}?${s}`,u=r,f=u.config.emulator?Pm(r.config,o):`${r.config.apiScheme}://${o}`;return _C.includes(n)&&(await u._persistenceManagerAvailable,u._getPersistenceType()==="COOKIE")?u._getPersistence()._getFinalTarget(f).toString():f}function EC(r){switch(r){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class TC{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s(Li(this.auth,"network-request-failed")),vC.get())})}}function rh(r,e,n){const s={appName:r.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=Li(r,e,s);return o.customData._tokenResponse=n,o}function I0(r){return r!==void 0&&r.enterprise!==void 0}class bC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return EC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function AC(r,e){return Fi(r,"GET","/v2/recaptchaConfig",ys(r,e))}async function SC(r,e){return Fi(r,"POST","/v1/accounts:delete",e)}async function Dh(r,e){return Fi(r,"POST","/v1/accounts:lookup",e)}function Jl(r){if(r)try{const e=new Date(Number(r));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function wC(r,e=!1){const n=lt(r),s=await n.getIdToken(e),o=zm(s);Te(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const u=typeof o.firebase=="object"?o.firebase:void 0,f=u?.sign_in_provider;return{claims:o,token:s,authTime:Jl(Op(o.auth_time)),issuedAtTime:Jl(Op(o.iat)),expirationTime:Jl(Op(o.exp)),signInProvider:f||null,signInSecondFactor:u?.sign_in_second_factor||null}}function Op(r){return Number(r)*1e3}function zm(r){const[e,n,s]=r.split(".");if(e===void 0||n===void 0||s===void 0)return _h("JWT malformed, contained fewer than 3 sections"),null;try{const o=IE(n);return o?JSON.parse(o):(_h("Failed to decode base64 JWT payload"),null)}catch(o){return _h("Caught error parsing JWT payload as JSON",o?.toString()),null}}function N0(r){const e=zm(r);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}async function sa(r,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof Hi&&RC(s)&&r.auth.currentUser===r&&await r.auth.signOut(),s}}function RC({code:r}){return r==="auth/user-disabled"||r==="auth/user-token-expired"}class xC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}class nm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jl(this.lastLoginAt),this.creationTime=Jl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function kh(r){const e=r.auth,n=await r.getIdToken(),s=await sa(r,Dh(e,{idToken:n}));Te(s?.users.length,e,"internal-error");const o=s.users[0];r._notifyReloadListener(o);const u=o.providerUserInfo?.length?YE(o.providerUserInfo):[],f=IC(r.providerData,u),p=r.isAnonymous,g=!(r.email&&o.passwordHash)&&!f?.length,y=p?g:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:f,metadata:new nm(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(r,E)}async function CC(r){const e=lt(r);await kh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function IC(r,e){return[...r.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function YE(r){return r.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}async function NC(r,e){const n=await FE(r,{},async()=>{const s=gu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:u}=r.config,f=await GE(r,o,"/v1/token",`key=${u}`),p=await r._getAdditionalHeaders();p["Content-Type"]="application/x-www-form-urlencoded";const g={method:"POST",headers:p,body:s};return r.emulatorConfig&&gs(r.emulatorConfig.host)&&(g.credentials="include"),HE.fetch()(f,g)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function DC(r,e){return Fi(r,"POST","/v2/accounts:revokeToken",ys(r,e))}class mo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):N0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=N0(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:u}=await NC(e,n);this.updateTokensAndExpiration(s,o,Number(u))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:u}=n,f=new mo;return s&&(Te(typeof s=="string","internal-error",{appName:e}),f.refreshToken=s),o&&(Te(typeof o=="string","internal-error",{appName:e}),f.accessToken=o),u&&(Te(typeof u=="number","internal-error",{appName:e}),f.expirationTime=u),f}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new mo,this.toJSON())}_performRefresh(){return cr("not implemented")}}function Wr(r,e){Te(typeof r=="string"||typeof r>"u","internal-error",{appName:e})}class ai{constructor({uid:e,auth:n,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new xC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new nm(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await sa(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return wC(this,e)}reload(){return CC(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new ai({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await kh(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Cn(this.auth.app))return Promise.reject(fr(this.auth));const e=await this.getIdToken();return await sa(this,SC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const s=n.displayName??void 0,o=n.email??void 0,u=n.phoneNumber??void 0,f=n.photoURL??void 0,p=n.tenantId??void 0,g=n._redirectEventId??void 0,y=n.createdAt??void 0,E=n.lastLoginAt??void 0,{uid:S,emailVerified:w,isAnonymous:P,providerData:K,stsTokenManager:J}=n;Te(S&&J,e,"internal-error");const Z=mo.fromJSON(this.name,J);Te(typeof S=="string",e,"internal-error"),Wr(s,e.name),Wr(o,e.name),Te(typeof w=="boolean",e,"internal-error"),Te(typeof P=="boolean",e,"internal-error"),Wr(u,e.name),Wr(f,e.name),Wr(p,e.name),Wr(g,e.name),Wr(y,e.name),Wr(E,e.name);const oe=new ai({uid:S,auth:e,email:o,emailVerified:w,displayName:s,isAnonymous:P,photoURL:f,phoneNumber:u,tenantId:p,stsTokenManager:Z,createdAt:y,lastLoginAt:E});return K&&Array.isArray(K)&&(oe.providerData=K.map(le=>({...le}))),g&&(oe._redirectEventId=g),oe}static async _fromIdTokenResponse(e,n,s=!1){const o=new mo;o.updateFromServerResponse(n);const u=new ai({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await kh(u),u}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Te(o.localId!==void 0,"internal-error");const u=o.providerUserInfo!==void 0?YE(o.providerUserInfo):[],f=!(o.email&&o.passwordHash)&&!u?.length,p=new mo;p.updateFromIdToken(s);const g=new ai({uid:o.localId,auth:e,stsTokenManager:p,isAnonymous:f}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new nm(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!u?.length};return Object.assign(g,y),g}}const D0=new Map;function hr(r){mr(r instanceof Function,"Expected a class definition");let e=D0.get(r);return e?(mr(e instanceof r,"Instance stored in cache mismatched with class"),e):(e=new r,D0.set(r,e),e)}class KE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}KE.type="NONE";const k0=KE;function vh(r,e,n){return`firebase:${r}:${e}:${n}`}class go{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:u}=this.auth;this.fullUserKey=vh(this.userKey,o.apiKey,u),this.fullPersistenceKey=vh("persistence",o.apiKey,u),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Dh(this.auth,{idToken:e}).catch(()=>{});return n?ai._fromGetAccountInfoResponse(this.auth,n,e):null}return ai._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new go(hr(k0),e,s);const o=(await Promise.all(n.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let u=o[0]||hr(k0);const f=vh(s,e.config.apiKey,e.name);let p=null;for(const y of n)try{const E=await y._get(f);if(E){let S;if(typeof E=="string"){const w=await Dh(e,{idToken:E}).catch(()=>{});if(!w)break;S=await ai._fromGetAccountInfoResponse(e,w,E)}else S=ai._fromJSON(e,E);y!==u&&(p=S),u=y;break}}catch{}const g=o.filter(y=>y._shouldAllowMigration);return!u._shouldAllowMigration||!g.length?new go(u,e,s):(u=g[0],p&&await u._set(f,p.toJSON()),await Promise.all(n.map(async y=>{if(y!==u)try{await y._remove(f)}catch{}})),new go(u,e,s))}}function O0(r){const e=r.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(WE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(ZE(e))return"Blackberry";if(eT(e))return"Webos";if(XE(e))return"Safari";if((e.includes("chrome/")||$E(e))&&!e.includes("edge/"))return"Chrome";if(JE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=r.match(n);if(s?.length===2)return s[1]}return"Other"}function QE(r=sn()){return/firefox\//i.test(r)}function XE(r=sn()){const e=r.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function $E(r=sn()){return/crios\//i.test(r)}function WE(r=sn()){return/iemobile/i.test(r)}function JE(r=sn()){return/android/i.test(r)}function ZE(r=sn()){return/blackberry/i.test(r)}function eT(r=sn()){return/webos/i.test(r)}function jm(r=sn()){return/iphone|ipad|ipod/i.test(r)||/macintosh/i.test(r)&&/mobile/i.test(r)}function kC(r=sn()){return jm(r)&&!!window.navigator?.standalone}function OC(){return KR()&&document.documentMode===10}function tT(r=sn()){return jm(r)||JE(r)||eT(r)||ZE(r)||/windows phone/i.test(r)||WE(r)}function nT(r,e=[]){let n;switch(r){case"Browser":n=O0(sn());break;case"Worker":n=`${O0(sn())}-${r}`;break;default:n=r}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${fa}/${s}`}class MC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=u=>new Promise((f,p)=>{try{const g=e(u);f(g)}catch(g){p(g)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}async function VC(r,e={}){return Fi(r,"GET","/v2/passwordPolicy",ys(r,e))}const LC=6;class UC{constructor(e){const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??LC,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,u){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=u))}}class PC{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new M0(this),this.idTokenSubscription=new M0(this),this.beforeStateQueue=new MC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=BE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(u=>this._resolvePersistenceManagerAvailable=u)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=hr(n)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await go.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Dh(this,{idToken:e}),s=await ai._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Cn(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=this.redirectUser?._redirectEventId,f=s?._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===f)&&p?.user&&(s=p.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await kh(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=gC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Cn(this.app))return Promise.reject(fr(this));const n=e?lt(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Cn(this.app)?Promise.reject(fr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Cn(this.app)?Promise.reject(fr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VC(this),n=new UC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new mu("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await DC(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&hr(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await go.create(this,[hr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const u=typeof n=="function"?n:n.next.bind(n);let f=!1;const p=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(p,this,"internal-error"),p.then(()=>{f||u(this.currentUser)}),typeof n=="function"){const g=e.addObserver(n,s,o);return()=>{f=!0,g()}}else{const g=e.addObserver(n);return()=>{f=!0,g()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=nT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();n&&(e["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&dC(`Error while retrieving App Check token: ${e.error}`),e?.token}}function da(r){return lt(r)}class M0{constructor(e){this.auth=e,this.observer=null,this.addObserver=tx(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Wh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function zC(r){Wh=r}function iT(r){return Wh.loadJS(r)}function jC(){return Wh.recaptchaEnterpriseScript}function BC(){return Wh.gapiScript}function qC(r){return`__${r}${Math.floor(Math.random()*1e6)}`}class HC{constructor(){this.enterprise=new FC}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class FC{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const GC="recaptcha-enterprise",rT="NO_RECAPTCHA";class YC{constructor(e){this.type=GC,this.auth=da(e)}async verify(e="verify",n=!1){async function s(u){if(!n){if(u.tenantId==null&&u._agentRecaptchaConfig!=null)return u._agentRecaptchaConfig.siteKey;if(u.tenantId!=null&&u._tenantRecaptchaConfigs[u.tenantId]!==void 0)return u._tenantRecaptchaConfigs[u.tenantId].siteKey}return new Promise(async(f,p)=>{AC(u,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(g=>{if(g.recaptchaKey===void 0)p(new Error("recaptcha Enterprise site key undefined"));else{const y=new bC(g);return u.tenantId==null?u._agentRecaptchaConfig=y:u._tenantRecaptchaConfigs[u.tenantId]=y,f(y.siteKey)}}).catch(g=>{p(g)})})}function o(u,f,p){const g=window.grecaptcha;I0(g)?g.enterprise.ready(()=>{g.enterprise.execute(u,{action:e}).then(y=>{f(y)}).catch(()=>{f(rT)})}):p(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new HC().execute("siteKey",{action:"verify"}):new Promise((u,f)=>{s(this.auth).then(p=>{if(!n&&I0(window.grecaptcha))o(p,u,f);else{if(typeof window>"u"){f(new Error("RecaptchaVerifier is only supported in browser"));return}let g=jC();g.length!==0&&(g+=p),iT(g).then(()=>{o(p,u,f)}).catch(y=>{f(y)})}}).catch(p=>{f(p)})})}}async function V0(r,e,n,s=!1,o=!1){const u=new YC(r);let f;if(o)f=rT;else try{f=await u.verify(n)}catch{f=await u.verify(n,!0)}const p={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in p){const g=p.phoneEnrollmentInfo.phoneNumber,y=p.phoneEnrollmentInfo.recaptchaToken;Object.assign(p,{phoneEnrollmentInfo:{phoneNumber:g,recaptchaToken:y,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in p){const g=p.phoneSignInInfo.recaptchaToken;Object.assign(p,{phoneSignInInfo:{recaptchaToken:g,captchaResponse:f,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return p}return s?Object.assign(p,{captchaResp:f}):Object.assign(p,{captchaResponse:f}),Object.assign(p,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(p,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),p}async function im(r,e,n,s,o){if(r._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await V0(r,e,n,n==="getOobCode");return s(r,u)}else return s(r,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await V0(r,e,n,n==="getOobCode");return s(r,f)}else return Promise.reject(u)})}function KC(r,e){const n=$h(r,"auth");if(n.isInitialized()){const o=n.getImmediate(),u=n.getOptions();if(ia(u,e??{}))return o;ui(o,"already-initialized")}return n.initialize({options:e})}function QC(r,e){const n=e?.persistence||[],s=(Array.isArray(n)?n:[n]).map(hr);e?.errorMap&&r._updateErrorMap(e.errorMap),r._initializeWithPersistence(s,e?.popupRedirectResolver)}function XC(r,e,n){const s=da(r);Te(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,u=sT(e),{host:f,port:p}=$C(e),g=p===null?"":`:${p}`,y={url:`${u}//${f}${g}/`},E=Object.freeze({host:f,port:p,protocol:u.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Te(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Te(ia(y,s.config.emulator)&&ia(E,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=E,s.settings.appVerificationDisabledForTesting=!0,gs(f)?(km(`${u}//${f}${g}`),Om("Auth",!0)):WC()}function sT(r){const e=r.indexOf(":");return e<0?"":r.substr(0,e+1)}function $C(r){const e=sT(r),n=/(\/\/)?([^?#/]+)/.exec(r.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const u=o[1];return{host:u,port:L0(s.substr(u.length+1))}}else{const[u,f]=s.split(":");return{host:u,port:L0(f)}}}function L0(r){if(!r)return null;const e=Number(r);return isNaN(e)?null:e}function WC(){function r(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",r):r())}class Bm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return cr("not implemented")}_getIdTokenResponse(e){return cr("not implemented")}_linkToIdToken(e,n){return cr("not implemented")}_getReauthenticationResolver(e){return cr("not implemented")}}async function JC(r,e){return Fi(r,"POST","/v1/accounts:update",e)}async function ZC(r,e){return Fi(r,"POST","/v1/accounts:signUp",e)}async function eI(r,e){return _u(r,"POST","/v1/accounts:signInWithPassword",ys(r,e))}async function tI(r,e){return _u(r,"POST","/v1/accounts:signInWithEmailLink",ys(r,e))}async function nI(r,e){return _u(r,"POST","/v1/accounts:signInWithEmailLink",ys(r,e))}class su extends Bm{constructor(e,n,s,o=null){super("password",s),this._email=e,this._password=n,this._tenantId=o}static _fromEmailAndPassword(e,n){return new su(e,n,"password")}static _fromEmailAndCode(e,n,s=null){return new su(e,n,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n?.email&&n?.password){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(e,n,"signInWithPassword",eI);case"emailLink":return tI(e,{email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const s={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return im(e,s,"signUpPassword",ZC);case"emailLink":return nI(e,{idToken:n,email:this._email,oobCode:this._password});default:ui(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function yo(r,e){return _u(r,"POST","/v1/accounts:signInWithIdp",ys(r,e))}const iI="http://localhost";class aa extends Bm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new aa(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ui("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...u}=n;if(!s||!o)return null;const f=new aa(s,o);return f.idToken=u.idToken||void 0,f.accessToken=u.accessToken||void 0,f.secret=u.secret,f.nonce=u.nonce,f.pendingToken=u.pendingToken||null,f}_getIdTokenResponse(e){const n=this.buildRequest();return yo(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,yo(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,yo(e,n)}buildRequest(){const e={requestUri:iI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=gu(n)}return e}}function rI(r){switch(r){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function sI(r){const e=Gl(Yl(r)).link,n=e?Gl(Yl(e)).deep_link_id:null,s=Gl(Yl(r)).deep_link_id;return(s?Gl(Yl(s)).link:null)||s||n||e||r}class qm{constructor(e){const n=Gl(Yl(e)),s=n.apiKey??null,o=n.oobCode??null,u=rI(n.mode??null);Te(s&&o&&u,"argument-error"),this.apiKey=s,this.operation=u,this.code=o,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=sI(e);try{return new qm(n)}catch{return null}}}class Io{constructor(){this.providerId=Io.PROVIDER_ID}static credential(e,n){return su._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const s=qm.parseLink(n);return Te(s,"argument-error"),su._fromEmailAndCode(e,s.code,s.tenantId)}}Io.PROVIDER_ID="password";Io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class aT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class vu extends aT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Jr extends vu{constructor(){super("facebook.com")}static credential(e){return aa._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Jr.PROVIDER_ID="facebook.com";class Zr extends vu{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return aa._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Zr.credential(n,s)}catch{return null}}}Zr.GOOGLE_SIGN_IN_METHOD="google.com";Zr.PROVIDER_ID="google.com";class es extends vu{constructor(){super("github.com")}static credential(e){return aa._fromParams({providerId:es.PROVIDER_ID,signInMethod:es.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return es.credentialFromTaggedObject(e)}static credentialFromError(e){return es.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return es.credential(e.oauthAccessToken)}catch{return null}}}es.GITHUB_SIGN_IN_METHOD="github.com";es.PROVIDER_ID="github.com";class ts extends vu{constructor(){super("twitter.com")}static credential(e,n){return aa._fromParams({providerId:ts.PROVIDER_ID,signInMethod:ts.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return ts.credentialFromTaggedObject(e)}static credentialFromError(e){return ts.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return ts.credential(n,s)}catch{return null}}}ts.TWITTER_SIGN_IN_METHOD="twitter.com";ts.PROVIDER_ID="twitter.com";async function aI(r,e){return _u(r,"POST","/v1/accounts:signUp",ys(r,e))}class oa{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const u=await ai._fromIdTokenResponse(e,s,o),f=U0(s);return new oa({user:u,providerId:f,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=U0(s);return new oa({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function U0(r){return r.providerId?r.providerId:"phoneNumber"in r?"phone":null}class Oh extends Hi{constructor(e,n,s,o){super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Oh.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Oh(e,n,s,o)}}function oT(r,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(r):n._getIdTokenResponse(r)).catch(u=>{throw u.code==="auth/multi-factor-auth-required"?Oh._fromErrorAndOperation(r,u,e,s):u})}async function oI(r,e,n=!1){const s=await sa(r,e._linkToIdToken(r.auth,await r.getIdToken()),n);return oa._forOperation(r,"link",s)}async function lI(r,e,n=!1){const{auth:s}=r;if(Cn(s.app))return Promise.reject(fr(s));const o="reauthenticate";try{const u=await sa(r,oT(s,o,e,r),n);Te(u.idToken,s,"internal-error");const f=zm(u.idToken);Te(f,s,"internal-error");const{sub:p}=f;return Te(r.uid===p,s,"user-mismatch"),oa._forOperation(r,o,u)}catch(u){throw u?.code==="auth/user-not-found"&&ui(s,"user-mismatch"),u}}async function lT(r,e,n=!1){if(Cn(r.app))return Promise.reject(fr(r));const s="signIn",o=await oT(r,s,e),u=await oa._fromIdTokenResponse(r,s,o);return n||await r._updateCurrentUser(u.user),u}async function uI(r,e){return lT(da(r),e)}async function uT(r){const e=da(r);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function cI(r,e,n){if(Cn(r.app))return Promise.reject(fr(r));const s=da(r),f=await im(s,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",aI).catch(g=>{throw g.code==="auth/password-does-not-meet-requirements"&&uT(r),g}),p=await oa._fromIdTokenResponse(s,"signIn",f);return await s._updateCurrentUser(p.user),p}function hI(r,e,n){return Cn(r.app)?Promise.reject(fr(r)):uI(lt(r),Io.credential(e,n)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&uT(r),s})}async function fI(r,e){return Fi(r,"POST","/v1/accounts:update",e)}async function cT(r,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const s=lt(r),u={idToken:await s.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},f=await sa(s,fI(s.auth,u));s.displayName=f.displayName||null,s.photoURL=f.photoUrl||null;const p=s.providerData.find(({providerId:g})=>g==="password");p&&(p.displayName=s.displayName,p.photoURL=s.photoURL),await s._updateTokensIfNecessary(f)}function dI(r,e){return pI(lt(r),null,e)}async function pI(r,e,n){const{auth:s}=r,u={idToken:await r.getIdToken(),returnSecureToken:!0};n&&(u.password=n);const f=await sa(r,JC(s,u));await r._updateTokensIfNecessary(f,!0)}function mI(r,e,n,s){return lt(r).onIdTokenChanged(e,n,s)}function gI(r,e,n){return lt(r).beforeAuthStateChanged(e,n)}function yI(r,e,n,s){return lt(r).onAuthStateChanged(e,n,s)}function _I(r){return lt(r).signOut()}const Mh="__sak";class hT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Mh,"1"),this.storage.removeItem(Mh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const vI=1e3,EI=10;class fT extends hT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=tT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((f,p,g)=>{this.notifyListeners(f,g)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const f=this.storage.getItem(s);!n&&this.localCache[s]===f||this.notifyListeners(s,f)},u=this.storage.getItem(s);OC()&&u!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,EI):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},vI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}fT.type="LOCAL";const TI=fT;class dT extends hT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}dT.type="SESSION";const pT=dT;function bI(r){return Promise.all(r.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}class Jh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Jh(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:u}=n.data,f=this.handlersMap[o];if(!f?.size)return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const p=Array.from(f).map(async y=>y(n.origin,u)),g=await bI(p);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:g})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Jh.receivers=[];function Hm(r="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return r+n}class AI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let u,f;return new Promise((p,g)=>{const y=Hm("",20);o.port1.start();const E=setTimeout(()=>{g(new Error("unsupported_event"))},s);f={messageChannel:o,onMessage(S){const w=S;if(w.data.eventId===y)switch(w.data.status){case"ack":clearTimeout(E),u=setTimeout(()=>{g(new Error("timeout"))},3e3);break;case"done":clearTimeout(u),p(w.data.response);break;default:clearTimeout(E),clearTimeout(u),g(new Error("invalid_response"));break}}},this.handlers.add(f),o.port1.addEventListener("message",f.onMessage),this.target.postMessage({eventType:e,eventId:y,data:n},[o.port2])}).finally(()=>{f&&this.removeMessageHandler(f)})}}function Ui(){return window}function SI(r){Ui().location.href=r}function mT(){return typeof Ui().WorkerGlobalScope<"u"&&typeof Ui().importScripts=="function"}async function wI(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function RI(){return navigator?.serviceWorker?.controller||null}function xI(){return mT()?self:null}const gT="firebaseLocalStorageDb",CI=1,Vh="firebaseLocalStorage",yT="fbase_key";class Eu{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zh(r,e){return r.transaction([Vh],e?"readwrite":"readonly").objectStore(Vh)}function II(){const r=indexedDB.deleteDatabase(gT);return new Eu(r).toPromise()}function rm(){const r=indexedDB.open(gT,CI);return new Promise((e,n)=>{r.addEventListener("error",()=>{n(r.error)}),r.addEventListener("upgradeneeded",()=>{const s=r.result;try{s.createObjectStore(Vh,{keyPath:yT})}catch(o){n(o)}}),r.addEventListener("success",async()=>{const s=r.result;s.objectStoreNames.contains(Vh)?e(s):(s.close(),await II(),e(await rm()))})})}async function P0(r,e,n){const s=Zh(r,!0).put({[yT]:e,value:n});return new Eu(s).toPromise()}async function NI(r,e){const n=Zh(r,!1).get(e),s=await new Eu(n).toPromise();return s===void 0?null:s.value}function z0(r,e){const n=Zh(r,!0).delete(e);return new Eu(n).toPromise()}const DI=800,kI=3;class _T{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await rm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>kI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return mT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Jh._getInstance(xI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await wI(),!this.activeServiceWorker)return;this.sender=new AI(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||RI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rm();return await P0(e,Mh,"1"),await z0(e,Mh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>P0(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>NI(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>z0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const u=Zh(o,!1).getAll();return new Eu(u).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:u}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(u)&&(this.notifyListeners(o,u),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),DI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}_T.type="LOCAL";const OI=_T;new yu(3e4,6e4);function MI(r,e){return e?hr(e):(Te(r._popupRedirectResolver,r,"argument-error"),r._popupRedirectResolver)}class Fm extends Bm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return yo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return yo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function VI(r){return lT(r.auth,new Fm(r),r.bypassAuthState)}function LI(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),lI(n,new Fm(r),r.bypassAuthState)}async function UI(r){const{auth:e,user:n}=r;return Te(n,e,"internal-error"),oI(n,new Fm(r),r.bypassAuthState)}class vT{constructor(e,n,s,o,u=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=u,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:u,error:f,type:p}=e;if(f){this.reject(f);return}const g={auth:this.auth,requestUri:n,sessionId:s,tenantId:u||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(p)(g))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return VI;case"linkViaPopup":case"linkViaRedirect":return UI;case"reauthViaPopup":case"reauthViaRedirect":return LI;default:ui(this.auth,"internal-error")}}resolve(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const PI=new yu(2e3,1e4);class ho extends vT{constructor(e,n,s,o,u){super(e,n,o,u),this.provider=s,this.authWindow=null,this.pollId=null,ho.currentPopupAction&&ho.currentPopupAction.cancel(),ho.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){mr(this.filter.length===1,"Popup operations only handle one event");const e=Hm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Li(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(Li(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ho.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Li(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,PI.get())};e()}}ho.currentPopupAction=null;const zI="pendingRedirect",Eh=new Map;class jI extends vT{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=Eh.get(this.auth._key());if(!e){try{const s=await BI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}Eh.set(this.auth._key(),e)}return this.bypassAuthState||Eh.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function BI(r,e){const n=FI(e),s=HI(r);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function qI(r,e){Eh.set(r._key(),e)}function HI(r){return hr(r._redirectPersistence)}function FI(r){return vh(zI,r.config.apiKey,r.name)}async function GI(r,e,n=!1){if(Cn(r.app))return Promise.reject(fr(r));const s=da(r),o=MI(s,e),f=await new jI(s,o,n).execute();return f&&!n&&(delete f.user._redirectEventId,await s._persistUserIfCurrent(f.user),await s._setRedirectUser(null,e)),f}const YI=600*1e3;class KI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!QI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){if(e.error&&!ET(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";n.onError(Li(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=YI&&this.cachedEventUids.clear(),this.cachedEventUids.has(j0(e))}saveEventToCache(e){this.cachedEventUids.add(j0(e)),this.lastProcessedEventTime=Date.now()}}function j0(r){return[r.type,r.eventId,r.sessionId,r.tenantId].filter(e=>e).join("-")}function ET({type:r,error:e}){return r==="unknown"&&e?.code==="auth/no-auth-event"}function QI(r){switch(r.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return ET(r);default:return!1}}async function XI(r,e={}){return Fi(r,"GET","/v1/projects",e)}const $I=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WI=/^https?/;async function JI(r){if(r.config.emulator)return;const{authorizedDomains:e}=await XI(r);for(const n of e)try{if(ZI(n))return}catch{}ui(r,"unauthorized-domain")}function ZI(r){const e=tm(),{protocol:n,hostname:s}=new URL(e);if(r.startsWith("chrome-extension://")){const f=new URL(r);return f.hostname===""&&s===""?n==="chrome-extension:"&&r.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&f.hostname===s}if(!WI.test(n))return!1;if($I.test(r))return s===r;const o=r.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}const e4=new yu(3e4,6e4);function B0(){const r=Ui().___jsl;if(r?.H){for(const e of Object.keys(r.H))if(r.H[e].r=r.H[e].r||[],r.H[e].L=r.H[e].L||[],r.H[e].r=[...r.H[e].L],r.CP)for(let n=0;n<r.CP.length;n++)r.CP[n]=null}}function t4(r){return new Promise((e,n)=>{function s(){B0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{B0(),n(Li(r,"network-request-failed"))},timeout:e4.get()})}if(Ui().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(Ui().gapi?.load)s();else{const o=qC("iframefcb");return Ui()[o]=()=>{gapi.load?s():n(Li(r,"network-request-failed"))},iT(`${BC()}?onload=${o}`).catch(u=>n(u))}}).catch(e=>{throw Th=null,e})}let Th=null;function n4(r){return Th=Th||t4(r),Th}const i4=new yu(5e3,15e3),r4="__/auth/iframe",s4="emulator/auth/iframe",a4={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},o4=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function l4(r){const e=r.config;Te(e.authDomain,r,"auth-domain-config-required");const n=e.emulator?Pm(e,s4):`https://${r.config.authDomain}/${r4}`,s={apiKey:e.apiKey,appName:r.name,v:fa},o=o4.get(r.config.apiHost);o&&(s.eid=o);const u=r._getFrameworks();return u.length&&(s.fw=u.join(",")),`${n}?${gu(s).slice(1)}`}async function u4(r){const e=await n4(r),n=Ui().gapi;return Te(n,r,"internal-error"),e.open({where:document.body,url:l4(r),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:a4,dontclear:!0},s=>new Promise(async(o,u)=>{await s.restyle({setHideOnLeave:!1});const f=Li(r,"network-request-failed"),p=Ui().setTimeout(()=>{u(f)},i4.get());function g(){Ui().clearTimeout(p),o(s)}s.ping(g).then(g,()=>{u(f)})}))}const c4={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},h4=500,f4=600,d4="_blank",p4="http://localhost";class q0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function m4(r,e,n,s=h4,o=f4){const u=Math.max((window.screen.availHeight-o)/2,0).toString(),f=Math.max((window.screen.availWidth-s)/2,0).toString();let p="";const g={...c4,width:s.toString(),height:o.toString(),top:u,left:f},y=sn().toLowerCase();n&&(p=$E(y)?d4:n),QE(y)&&(e=e||p4,g.scrollbars="yes");const E=Object.entries(g).reduce((w,[P,K])=>`${w}${P}=${K},`,"");if(kC(y)&&p!=="_self")return g4(e||"",p),new q0(null);const S=window.open(e||"",p,E);Te(S,r,"popup-blocked");try{S.focus()}catch{}return new q0(S)}function g4(r,e){const n=document.createElement("a");n.href=r,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}const y4="__/auth/handler",_4="emulator/auth/handler",v4=encodeURIComponent("fac");async function H0(r,e,n,s,o,u){Te(r.config.authDomain,r,"auth-domain-config-required"),Te(r.config.apiKey,r,"invalid-api-key");const f={apiKey:r.config.apiKey,appName:r.name,authType:n,redirectUrl:s,v:fa,eventId:o};if(e instanceof aT){e.setDefaultLanguage(r.languageCode),f.providerId=e.providerId||"",ex(e.getCustomParameters())||(f.customParameters=JSON.stringify(e.getCustomParameters()));for(const[E,S]of Object.entries({}))f[E]=S}if(e instanceof vu){const E=e.getScopes().filter(S=>S!=="");E.length>0&&(f.scopes=E.join(","))}r.tenantId&&(f.tid=r.tenantId);const p=f;for(const E of Object.keys(p))p[E]===void 0&&delete p[E];const g=await r._getAppCheckToken(),y=g?`#${v4}=${encodeURIComponent(g)}`:"";return`${E4(r)}?${gu(p).slice(1)}${y}`}function E4({config:r}){return r.emulator?Pm(r,_4):`https://${r.authDomain}/${y4}`}const Mp="webStorageSupport";class T4{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=pT,this._completeRedirectFn=GI,this._overrideRedirectResult=qI}async _openPopup(e,n,s,o){mr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const u=await H0(e,n,s,tm(),o);return m4(e,u,Hm())}async _openRedirect(e,n,s,o){await this._originValidation(e);const u=await H0(e,n,s,tm(),o);return SI(u),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:u}=this.eventManagers[n];return o?Promise.resolve(o):(mr(u,"If manager is not set, promise should be"),u)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await u4(e),s=new KI(e);return n.register("authEvent",o=>(Te(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Mp,{type:Mp},o=>{const u=o?.[0]?.[Mp];u!==void 0&&n(!!u),ui(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=JI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return tT()||XE()||jm()}}const b4=T4;var F0="@firebase/auth",G0="1.12.0";class A4{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function S4(r){switch(r){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function w4(r){ra(new us("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),u=e.getProvider("app-check-internal"),{apiKey:f,authDomain:p}=s.options;Te(f&&!f.includes(":"),"invalid-api-key",{appName:s.name});const g={apiKey:f,authDomain:p,clientPlatform:r,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:nT(r)},y=new PC(s,o,u,g);return QC(y,n),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),ra(new us("auth-internal",e=>{const n=da(e.getProvider("auth").getImmediate());return(s=>new A4(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Vi(F0,G0,S4(r)),Vi(F0,G0,"esm2020")}const R4=300,x4=OE("authIdTokenMaxAge")||R4;let Y0=null;const C4=r=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>x4)return;const o=n?.token;Y0!==o&&(Y0=o,await fetch(r,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function I4(r=Lm()){const e=$h(r,"auth");if(e.isInitialized())return e.getImmediate();const n=KC(r,{popupRedirectResolver:b4,persistence:[OI,TI,pT]}),s=OE("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const u=new URL(s,location.origin);if(location.origin===u.origin){const f=C4(u.toString());gI(n,f,()=>f(n.currentUser)),mI(n,p=>f(p))}}const o=NE("auth");return o&&XC(n,`http://${o}`),n}function N4(){return document.getElementsByTagName("head")?.[0]??document}zC({loadJS(r){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",r),s.onload=e,s.onerror=o=>{const u=Li("internal-error");u.customData=o,n(u)},s.type="text/javascript",s.charset="UTF-8",N4().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});w4("Browser");var D4="firebase",k4="12.8.0";Vi(D4,k4,"app");var K0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var os,TT;(function(){var r;function e(N,x){function R(){}R.prototype=x.prototype,N.F=x.prototype,N.prototype=new R,N.prototype.constructor=N,N.D=function(I,D,M){for(var C=Array(arguments.length-2),Be=2;Be<arguments.length;Be++)C[Be-2]=arguments[Be];return x.prototype[D].apply(I,C)}}function n(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,n),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(N,x,R){R||(R=0);const I=Array(16);if(typeof x=="string")for(var D=0;D<16;++D)I[D]=x.charCodeAt(R++)|x.charCodeAt(R++)<<8|x.charCodeAt(R++)<<16|x.charCodeAt(R++)<<24;else for(D=0;D<16;++D)I[D]=x[R++]|x[R++]<<8|x[R++]<<16|x[R++]<<24;x=N.g[0],R=N.g[1],D=N.g[2];let M=N.g[3],C;C=x+(M^R&(D^M))+I[0]+3614090360&4294967295,x=R+(C<<7&4294967295|C>>>25),C=M+(D^x&(R^D))+I[1]+3905402710&4294967295,M=x+(C<<12&4294967295|C>>>20),C=D+(R^M&(x^R))+I[2]+606105819&4294967295,D=M+(C<<17&4294967295|C>>>15),C=R+(x^D&(M^x))+I[3]+3250441966&4294967295,R=D+(C<<22&4294967295|C>>>10),C=x+(M^R&(D^M))+I[4]+4118548399&4294967295,x=R+(C<<7&4294967295|C>>>25),C=M+(D^x&(R^D))+I[5]+1200080426&4294967295,M=x+(C<<12&4294967295|C>>>20),C=D+(R^M&(x^R))+I[6]+2821735955&4294967295,D=M+(C<<17&4294967295|C>>>15),C=R+(x^D&(M^x))+I[7]+4249261313&4294967295,R=D+(C<<22&4294967295|C>>>10),C=x+(M^R&(D^M))+I[8]+1770035416&4294967295,x=R+(C<<7&4294967295|C>>>25),C=M+(D^x&(R^D))+I[9]+2336552879&4294967295,M=x+(C<<12&4294967295|C>>>20),C=D+(R^M&(x^R))+I[10]+4294925233&4294967295,D=M+(C<<17&4294967295|C>>>15),C=R+(x^D&(M^x))+I[11]+2304563134&4294967295,R=D+(C<<22&4294967295|C>>>10),C=x+(M^R&(D^M))+I[12]+1804603682&4294967295,x=R+(C<<7&4294967295|C>>>25),C=M+(D^x&(R^D))+I[13]+4254626195&4294967295,M=x+(C<<12&4294967295|C>>>20),C=D+(R^M&(x^R))+I[14]+2792965006&4294967295,D=M+(C<<17&4294967295|C>>>15),C=R+(x^D&(M^x))+I[15]+1236535329&4294967295,R=D+(C<<22&4294967295|C>>>10),C=x+(D^M&(R^D))+I[1]+4129170786&4294967295,x=R+(C<<5&4294967295|C>>>27),C=M+(R^D&(x^R))+I[6]+3225465664&4294967295,M=x+(C<<9&4294967295|C>>>23),C=D+(x^R&(M^x))+I[11]+643717713&4294967295,D=M+(C<<14&4294967295|C>>>18),C=R+(M^x&(D^M))+I[0]+3921069994&4294967295,R=D+(C<<20&4294967295|C>>>12),C=x+(D^M&(R^D))+I[5]+3593408605&4294967295,x=R+(C<<5&4294967295|C>>>27),C=M+(R^D&(x^R))+I[10]+38016083&4294967295,M=x+(C<<9&4294967295|C>>>23),C=D+(x^R&(M^x))+I[15]+3634488961&4294967295,D=M+(C<<14&4294967295|C>>>18),C=R+(M^x&(D^M))+I[4]+3889429448&4294967295,R=D+(C<<20&4294967295|C>>>12),C=x+(D^M&(R^D))+I[9]+568446438&4294967295,x=R+(C<<5&4294967295|C>>>27),C=M+(R^D&(x^R))+I[14]+3275163606&4294967295,M=x+(C<<9&4294967295|C>>>23),C=D+(x^R&(M^x))+I[3]+4107603335&4294967295,D=M+(C<<14&4294967295|C>>>18),C=R+(M^x&(D^M))+I[8]+1163531501&4294967295,R=D+(C<<20&4294967295|C>>>12),C=x+(D^M&(R^D))+I[13]+2850285829&4294967295,x=R+(C<<5&4294967295|C>>>27),C=M+(R^D&(x^R))+I[2]+4243563512&4294967295,M=x+(C<<9&4294967295|C>>>23),C=D+(x^R&(M^x))+I[7]+1735328473&4294967295,D=M+(C<<14&4294967295|C>>>18),C=R+(M^x&(D^M))+I[12]+2368359562&4294967295,R=D+(C<<20&4294967295|C>>>12),C=x+(R^D^M)+I[5]+4294588738&4294967295,x=R+(C<<4&4294967295|C>>>28),C=M+(x^R^D)+I[8]+2272392833&4294967295,M=x+(C<<11&4294967295|C>>>21),C=D+(M^x^R)+I[11]+1839030562&4294967295,D=M+(C<<16&4294967295|C>>>16),C=R+(D^M^x)+I[14]+4259657740&4294967295,R=D+(C<<23&4294967295|C>>>9),C=x+(R^D^M)+I[1]+2763975236&4294967295,x=R+(C<<4&4294967295|C>>>28),C=M+(x^R^D)+I[4]+1272893353&4294967295,M=x+(C<<11&4294967295|C>>>21),C=D+(M^x^R)+I[7]+4139469664&4294967295,D=M+(C<<16&4294967295|C>>>16),C=R+(D^M^x)+I[10]+3200236656&4294967295,R=D+(C<<23&4294967295|C>>>9),C=x+(R^D^M)+I[13]+681279174&4294967295,x=R+(C<<4&4294967295|C>>>28),C=M+(x^R^D)+I[0]+3936430074&4294967295,M=x+(C<<11&4294967295|C>>>21),C=D+(M^x^R)+I[3]+3572445317&4294967295,D=M+(C<<16&4294967295|C>>>16),C=R+(D^M^x)+I[6]+76029189&4294967295,R=D+(C<<23&4294967295|C>>>9),C=x+(R^D^M)+I[9]+3654602809&4294967295,x=R+(C<<4&4294967295|C>>>28),C=M+(x^R^D)+I[12]+3873151461&4294967295,M=x+(C<<11&4294967295|C>>>21),C=D+(M^x^R)+I[15]+530742520&4294967295,D=M+(C<<16&4294967295|C>>>16),C=R+(D^M^x)+I[2]+3299628645&4294967295,R=D+(C<<23&4294967295|C>>>9),C=x+(D^(R|~M))+I[0]+4096336452&4294967295,x=R+(C<<6&4294967295|C>>>26),C=M+(R^(x|~D))+I[7]+1126891415&4294967295,M=x+(C<<10&4294967295|C>>>22),C=D+(x^(M|~R))+I[14]+2878612391&4294967295,D=M+(C<<15&4294967295|C>>>17),C=R+(M^(D|~x))+I[5]+4237533241&4294967295,R=D+(C<<21&4294967295|C>>>11),C=x+(D^(R|~M))+I[12]+1700485571&4294967295,x=R+(C<<6&4294967295|C>>>26),C=M+(R^(x|~D))+I[3]+2399980690&4294967295,M=x+(C<<10&4294967295|C>>>22),C=D+(x^(M|~R))+I[10]+4293915773&4294967295,D=M+(C<<15&4294967295|C>>>17),C=R+(M^(D|~x))+I[1]+2240044497&4294967295,R=D+(C<<21&4294967295|C>>>11),C=x+(D^(R|~M))+I[8]+1873313359&4294967295,x=R+(C<<6&4294967295|C>>>26),C=M+(R^(x|~D))+I[15]+4264355552&4294967295,M=x+(C<<10&4294967295|C>>>22),C=D+(x^(M|~R))+I[6]+2734768916&4294967295,D=M+(C<<15&4294967295|C>>>17),C=R+(M^(D|~x))+I[13]+1309151649&4294967295,R=D+(C<<21&4294967295|C>>>11),C=x+(D^(R|~M))+I[4]+4149444226&4294967295,x=R+(C<<6&4294967295|C>>>26),C=M+(R^(x|~D))+I[11]+3174756917&4294967295,M=x+(C<<10&4294967295|C>>>22),C=D+(x^(M|~R))+I[2]+718787259&4294967295,D=M+(C<<15&4294967295|C>>>17),C=R+(M^(D|~x))+I[9]+3951481745&4294967295,N.g[0]=N.g[0]+x&4294967295,N.g[1]=N.g[1]+(D+(C<<21&4294967295|C>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+M&4294967295}s.prototype.v=function(N,x){x===void 0&&(x=N.length);const R=x-this.blockSize,I=this.C;let D=this.h,M=0;for(;M<x;){if(D==0)for(;M<=R;)o(this,N,M),M+=this.blockSize;if(typeof N=="string"){for(;M<x;)if(I[D++]=N.charCodeAt(M++),D==this.blockSize){o(this,I),D=0;break}}else for(;M<x;)if(I[D++]=N[M++],D==this.blockSize){o(this,I),D=0;break}}this.h=D,this.o+=x},s.prototype.A=function(){var N=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);N[0]=128;for(var x=1;x<N.length-8;++x)N[x]=0;x=this.o*8;for(var R=N.length-8;R<N.length;++R)N[R]=x&255,x/=256;for(this.v(N),N=Array(16),x=0,R=0;R<4;++R)for(let I=0;I<32;I+=8)N[x++]=this.g[R]>>>I&255;return N};function u(N,x){var R=p;return Object.prototype.hasOwnProperty.call(R,N)?R[N]:R[N]=x(N)}function f(N,x){this.h=x;const R=[];let I=!0;for(let D=N.length-1;D>=0;D--){const M=N[D]|0;I&&M==x||(R[D]=M,I=!1)}this.g=R}var p={};function g(N){return-128<=N&&N<128?u(N,function(x){return new f([x|0],x<0?-1:0)}):new f([N|0],N<0?-1:0)}function y(N){if(isNaN(N)||!isFinite(N))return S;if(N<0)return Z(y(-N));const x=[];let R=1;for(let I=0;N>=R;I++)x[I]=N/R|0,R*=4294967296;return new f(x,0)}function E(N,x){if(N.length==0)throw Error("number format error: empty string");if(x=x||10,x<2||36<x)throw Error("radix out of range: "+x);if(N.charAt(0)=="-")return Z(E(N.substring(1),x));if(N.indexOf("-")>=0)throw Error('number format error: interior "-" character');const R=y(Math.pow(x,8));let I=S;for(let M=0;M<N.length;M+=8){var D=Math.min(8,N.length-M);const C=parseInt(N.substring(M,M+D),x);D<8?(D=y(Math.pow(x,D)),I=I.j(D).add(y(C))):(I=I.j(R),I=I.add(y(C)))}return I}var S=g(0),w=g(1),P=g(16777216);r=f.prototype,r.m=function(){if(J(this))return-Z(this).m();let N=0,x=1;for(let R=0;R<this.g.length;R++){const I=this.i(R);N+=(I>=0?I:4294967296+I)*x,x*=4294967296}return N},r.toString=function(N){if(N=N||10,N<2||36<N)throw Error("radix out of range: "+N);if(K(this))return"0";if(J(this))return"-"+Z(this).toString(N);const x=y(Math.pow(N,6));var R=this;let I="";for(;;){const D=pe(R,x).g;R=oe(R,D.j(x));let M=((R.g.length>0?R.g[0]:R.h)>>>0).toString(N);if(R=D,K(R))return M+I;for(;M.length<6;)M="0"+M;I=M+I}},r.i=function(N){return N<0?0:N<this.g.length?this.g[N]:this.h};function K(N){if(N.h!=0)return!1;for(let x=0;x<N.g.length;x++)if(N.g[x]!=0)return!1;return!0}function J(N){return N.h==-1}r.l=function(N){return N=oe(this,N),J(N)?-1:K(N)?0:1};function Z(N){const x=N.g.length,R=[];for(let I=0;I<x;I++)R[I]=~N.g[I];return new f(R,~N.h).add(w)}r.abs=function(){return J(this)?Z(this):this},r.add=function(N){const x=Math.max(this.g.length,N.g.length),R=[];let I=0;for(let D=0;D<=x;D++){let M=I+(this.i(D)&65535)+(N.i(D)&65535),C=(M>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);I=C>>>16,M&=65535,C&=65535,R[D]=C<<16|M}return new f(R,R[R.length-1]&-2147483648?-1:0)};function oe(N,x){return N.add(Z(x))}r.j=function(N){if(K(this)||K(N))return S;if(J(this))return J(N)?Z(this).j(Z(N)):Z(Z(this).j(N));if(J(N))return Z(this.j(Z(N)));if(this.l(P)<0&&N.l(P)<0)return y(this.m()*N.m());const x=this.g.length+N.g.length,R=[];for(var I=0;I<2*x;I++)R[I]=0;for(I=0;I<this.g.length;I++)for(let D=0;D<N.g.length;D++){const M=this.i(I)>>>16,C=this.i(I)&65535,Be=N.i(D)>>>16,rt=N.i(D)&65535;R[2*I+2*D]+=C*rt,le(R,2*I+2*D),R[2*I+2*D+1]+=M*rt,le(R,2*I+2*D+1),R[2*I+2*D+1]+=C*Be,le(R,2*I+2*D+1),R[2*I+2*D+2]+=M*Be,le(R,2*I+2*D+2)}for(N=0;N<x;N++)R[N]=R[2*N+1]<<16|R[2*N];for(N=x;N<2*x;N++)R[N]=0;return new f(R,0)};function le(N,x){for(;(N[x]&65535)!=N[x];)N[x+1]+=N[x]>>>16,N[x]&=65535,x++}function se(N,x){this.g=N,this.h=x}function pe(N,x){if(K(x))throw Error("division by zero");if(K(N))return new se(S,S);if(J(N))return x=pe(Z(N),x),new se(Z(x.g),Z(x.h));if(J(x))return x=pe(N,Z(x)),new se(Z(x.g),x.h);if(N.g.length>30){if(J(N)||J(x))throw Error("slowDivide_ only works with positive integers.");for(var R=w,I=x;I.l(N)<=0;)R=xe(R),I=xe(I);var D=me(R,1),M=me(I,1);for(I=me(I,2),R=me(R,2);!K(I);){var C=M.add(I);C.l(N)<=0&&(D=D.add(R),M=C),I=me(I,1),R=me(R,1)}return x=oe(N,D.j(x)),new se(D,x)}for(D=S;N.l(x)>=0;){for(R=Math.max(1,Math.floor(N.m()/x.m())),I=Math.ceil(Math.log(R)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),M=y(R),C=M.j(x);J(C)||C.l(N)>0;)R-=I,M=y(R),C=M.j(x);K(M)&&(M=w),D=D.add(M),N=oe(N,C)}return new se(D,N)}r.B=function(N){return pe(this,N).h},r.and=function(N){const x=Math.max(this.g.length,N.g.length),R=[];for(let I=0;I<x;I++)R[I]=this.i(I)&N.i(I);return new f(R,this.h&N.h)},r.or=function(N){const x=Math.max(this.g.length,N.g.length),R=[];for(let I=0;I<x;I++)R[I]=this.i(I)|N.i(I);return new f(R,this.h|N.h)},r.xor=function(N){const x=Math.max(this.g.length,N.g.length),R=[];for(let I=0;I<x;I++)R[I]=this.i(I)^N.i(I);return new f(R,this.h^N.h)};function xe(N){const x=N.g.length+1,R=[];for(let I=0;I<x;I++)R[I]=N.i(I)<<1|N.i(I-1)>>>31;return new f(R,N.h)}function me(N,x){const R=x>>5;x%=32;const I=N.g.length-R,D=[];for(let M=0;M<I;M++)D[M]=x>0?N.i(M+R)>>>x|N.i(M+R+1)<<32-x:N.i(M+R);return new f(D,N.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,TT=s,f.prototype.add=f.prototype.add,f.prototype.multiply=f.prototype.j,f.prototype.modulo=f.prototype.B,f.prototype.compare=f.prototype.l,f.prototype.toNumber=f.prototype.m,f.prototype.toString=f.prototype.toString,f.prototype.getBits=f.prototype.i,f.fromNumber=y,f.fromString=E,os=f}).apply(typeof K0<"u"?K0:typeof self<"u"?self:typeof window<"u"?window:{});var sh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};var bT,Kl,AT,bh,sm,ST,wT,RT;(function(){var r,e=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof sh=="object"&&sh];for(var m=0;m<c.length;++m){var v=c[m];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var s=n(this);function o(c,m){if(m)e:{var v=s;c=c.split(".");for(var A=0;A<c.length-1;A++){var U=c[A];if(!(U in v))break e;v=v[U]}c=c[c.length-1],A=v[c],m=m(A),m!=A&&m!=null&&e(v,c,{configurable:!0,writable:!0,value:m})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(m){var v=[],A;for(A in m)Object.prototype.hasOwnProperty.call(m,A)&&v.push([A,m[A]]);return v}});var u=u||{},f=this||self;function p(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function g(c,m,v){return c.call.apply(c.bind,arguments)}function y(c,m,v){return y=g,y.apply(null,arguments)}function E(c,m){var v=Array.prototype.slice.call(arguments,1);return function(){var A=v.slice();return A.push.apply(A,arguments),c.apply(this,A)}}function S(c,m){function v(){}v.prototype=m.prototype,c.Z=m.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(A,U,H){for(var re=Array(arguments.length-2),Ce=2;Ce<arguments.length;Ce++)re[Ce-2]=arguments[Ce];return m.prototype[U].apply(A,re)}}var w=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function P(c){const m=c.length;if(m>0){const v=Array(m);for(let A=0;A<m;A++)v[A]=c[A];return v}return[]}function K(c,m){for(let A=1;A<arguments.length;A++){const U=arguments[A];var v=typeof U;if(v=v!="object"?v:U?Array.isArray(U)?"array":v:"null",v=="array"||v=="object"&&typeof U.length=="number"){v=c.length||0;const H=U.length||0;c.length=v+H;for(let re=0;re<H;re++)c[v+re]=U[re]}else c.push(U)}}class J{constructor(m,v){this.i=m,this.j=v,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function Z(c){f.setTimeout(()=>{throw c},0)}function oe(){var c=N;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class le{constructor(){this.h=this.g=null}add(m,v){const A=se.get();A.set(m,v),this.h?this.h.next=A:this.g=A,this.h=A}}var se=new J(()=>new pe,c=>c.reset());class pe{constructor(){this.next=this.g=this.h=null}set(m,v){this.h=m,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,me=!1,N=new le,x=()=>{const c=Promise.resolve(void 0);xe=()=>{c.then(R)}};function R(){for(var c;c=oe();){try{c.h.call(c.g)}catch(v){Z(v)}var m=se;m.j(c),m.h<100&&(m.h++,c.next=m.g,m.g=c)}me=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function D(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}D.prototype.h=function(){this.defaultPrevented=!0};var M=(function(){if(!f.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};f.addEventListener("test",v,m),f.removeEventListener("test",v,m)}catch{}return c})();function C(c){return/^[\s\xa0]*$/.test(c)}function Be(c,m){D.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,m)}S(Be,D),Be.prototype.init=function(c,m){const v=this.type=c.type,A=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget,m||(v=="mouseover"?m=c.fromElement:v=="mouseout"&&(m=c.toElement)),this.relatedTarget=m,A?(this.clientX=A.clientX!==void 0?A.clientX:A.pageX,this.clientY=A.clientY!==void 0?A.clientY:A.pageY,this.screenX=A.screenX||0,this.screenY=A.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&Be.Z.h.call(this)},Be.prototype.h=function(){Be.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var rt="closure_listenable_"+(Math.random()*1e6|0),B=0;function ee(c,m,v,A,U){this.listener=c,this.proxy=null,this.src=m,this.type=v,this.capture=!!A,this.ha=U,this.key=++B,this.da=this.fa=!1}function ie(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function ge(c,m,v){for(const A in c)m.call(v,c[A],A,c)}function ue(c,m){for(const v in c)m.call(void 0,c[v],v,c)}function O(c){const m={};for(const v in c)m[v]=c[v];return m}const G="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(c,m){let v,A;for(let U=1;U<arguments.length;U++){A=arguments[U];for(v in A)c[v]=A[v];for(let H=0;H<G.length;H++)v=G[H],Object.prototype.hasOwnProperty.call(A,v)&&(c[v]=A[v])}}function ae(c){this.src=c,this.g={},this.h=0}ae.prototype.add=function(c,m,v,A,U){const H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);const re=Ne(c,m,A,U);return re>-1?(m=c[re],v||(m.fa=!1)):(m=new ee(m,this.src,H,!!A,U),m.fa=v,c.push(m)),m};function Ee(c,m){const v=m.type;if(v in c.g){var A=c.g[v],U=Array.prototype.indexOf.call(A,m,void 0),H;(H=U>=0)&&Array.prototype.splice.call(A,U,1),H&&(ie(m),c.g[v].length==0&&(delete c.g[v],c.h--))}}function Ne(c,m,v,A){for(let U=0;U<c.length;++U){const H=c[U];if(!H.da&&H.listener==m&&H.capture==!!v&&H.ha==A)return U}return-1}var qe="closure_lm_"+(Math.random()*1e6|0),Ut={};function ut(c,m,v,A,U){if(Array.isArray(m)){for(let H=0;H<m.length;H++)ut(c,m[H],v,A,U);return null}return v=Uo(v),c&&c[rt]?c.J(m,v,p(A)?!!A.capture:!1,U):Es(c,m,v,!1,A,U)}function Es(c,m,v,A,U,H){if(!m)throw Error("Invalid event type");const re=p(U)?!!U.capture:!!U;let Ce=Ts(c);if(Ce||(c[qe]=Ce=new ae(c)),v=Ce.add(m,v,A,re,H),v.proxy)return v;if(A=ya(),v.proxy=A,A.src=c,A.listener=v,c.addEventListener)M||(U=re),U===void 0&&(U=!1),c.addEventListener(m.toString(),A,U);else if(c.attachEvent)c.attachEvent(hi(m.toString()),A);else if(c.addListener&&c.removeListener)c.addListener(A);else throw Error("addEventListener and attachEvent are unavailable.");return v}function ya(){function c(v){return m.call(c.src,c.listener,v)}const m=Vo;return c}function _a(c,m,v,A,U){if(Array.isArray(m))for(var H=0;H<m.length;H++)_a(c,m[H],v,A,U);else A=p(A)?!!A.capture:!!A,v=Uo(v),c&&c[rt]?(c=c.i,H=String(m).toString(),H in c.g&&(m=c.g[H],v=Ne(m,v,A,U),v>-1&&(ie(m[v]),Array.prototype.splice.call(m,v,1),m.length==0&&(delete c.g[H],c.h--)))):c&&(c=Ts(c))&&(m=c.g[m.toString()],c=-1,m&&(c=Ne(m,v,A,U)),(v=c>-1?m[c]:null)&&va(v))}function va(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[rt])Ee(m.i,c);else{var v=c.type,A=c.proxy;m.removeEventListener?m.removeEventListener(v,A,c.capture):m.detachEvent?m.detachEvent(hi(v),A):m.addListener&&m.removeListener&&m.removeListener(A),(v=Ts(m))?(Ee(v,c),v.h==0&&(v.src=null,m[qe]=null)):ie(c)}}}function hi(c){return c in Ut?Ut[c]:Ut[c]="on"+c}function Vo(c,m){if(c.da)c=!0;else{m=new Be(m,this);const v=c.listener,A=c.ha||c.src;c.fa&&va(c),c=v.call(A,m)}return c}function Ts(c){return c=c[qe],c instanceof ae?c:null}var Lo="__closure_events_fn_"+(Math.random()*1e9>>>0);function Uo(c){return typeof c=="function"?c:(c[Lo]||(c[Lo]=function(m){return c.handleEvent(m)}),c[Lo])}function St(){I.call(this),this.i=new ae(this),this.M=this,this.G=null}S(St,I),St.prototype[rt]=!0,St.prototype.removeEventListener=function(c,m,v,A){_a(this,c,m,v,A)};function Pt(c,m){var v,A=c.G;if(A)for(v=[];A;A=A.G)v.push(A);if(c=c.M,A=m.type||m,typeof m=="string")m=new D(m,c);else if(m instanceof D)m.target=m.target||c;else{var U=m;m=new D(A,c),te(m,U)}U=!0;let H,re;if(v)for(re=v.length-1;re>=0;re--)H=m.g=v[re],U=_r(H,A,!0,m)&&U;if(H=m.g=c,U=_r(H,A,!0,m)&&U,U=_r(H,A,!1,m)&&U,v)for(re=0;re<v.length;re++)H=m.g=v[re],U=_r(H,A,!1,m)&&U}St.prototype.N=function(){if(St.Z.N.call(this),this.i){var c=this.i;for(const m in c.g){const v=c.g[m];for(let A=0;A<v.length;A++)ie(v[A]);delete c.g[m],c.h--}}this.G=null},St.prototype.J=function(c,m,v,A){return this.i.add(String(c),m,!1,v,A)},St.prototype.K=function(c,m,v,A){return this.i.add(String(c),m,!0,v,A)};function _r(c,m,v,A){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();let U=!0;for(let H=0;H<m.length;++H){const re=m[H];if(re&&!re.da&&re.capture==v){const Ce=re.listener,vt=re.ha||re.src;re.fa&&Ee(c.i,re),U=Ce.call(vt,A)!==!1&&U}}return U&&!A.defaultPrevented}function vf(c,m){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:f.setTimeout(c,m||0)}function xu(c){c.g=vf(()=>{c.g=null,c.i&&(c.i=!1,xu(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class an extends I{constructor(m,v){super(),this.m=m,this.l=v,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:xu(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bs(c){I.call(this),this.h=c,this.g={}}S(bs,I);var Po=[];function zo(c){ge(c.g,function(m,v){this.g.hasOwnProperty(v)&&va(m)},c),c.g={}}bs.prototype.N=function(){bs.Z.N.call(this),zo(this)},bs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var vr=f.JSON.stringify,Ef=f.JSON.parse,Cu=class{stringify(c){return f.JSON.stringify(c,void 0)}parse(c){return f.JSON.parse(c,void 0)}};function Iu(){}function Nu(){}var Kn={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Gt(){D.call(this,"d")}S(Gt,D);function Dn(){D.call(this,"c")}S(Dn,D);var _t={},Du=null;function Ea(){return Du=Du||new St}_t.Ia="serverreachability";function ku(c){D.call(this,_t.Ia,c)}S(ku,D);function fi(c){const m=Ea();Pt(m,new ku(m))}_t.STAT_EVENT="statevent";function As(c,m){D.call(this,_t.STAT_EVENT,c),this.stat=m}S(As,D);function wt(c){const m=Ea();Pt(m,new As(m,c))}_t.Ja="timingevent";function di(c,m){D.call(this,_t.Ja,c),this.size=m}S(di,D);function pi(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){c()},m)}function Qn(){this.g=!0}Qn.prototype.ua=function(){this.g=!1};function Tf(c,m,v,A,U,H){c.info(function(){if(c.g)if(H){var re="",Ce=H.split("&");for(let Ye=0;Ye<Ce.length;Ye++){var vt=Ce[Ye].split("=");if(vt.length>1){const ct=vt[0];vt=vt[1];const Vn=ct.split("_");re=Vn.length>=2&&Vn[1]=="type"?re+(ct+"="+vt+"&"):re+(ct+"=redacted&")}}}else re=null;else re=H;return"XMLHTTP REQ ("+A+") [attempt "+U+"]: "+m+`
`+v+`
`+re})}function Ou(c,m,v,A,U,H,re){c.info(function(){return"XMLHTTP RESP ("+A+") [ attempt "+U+"]: "+m+`
`+v+`
`+H+" "+re})}function mi(c,m,v,A){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+bf(c,v)+(A?" "+A:"")})}function Ss(c,m){c.info(function(){return"TIMEOUT: "+m})}Qn.prototype.info=function(){};function bf(c,m){if(!c.g)return m;if(!m)return null;try{const H=JSON.parse(m);if(H){for(c=0;c<H.length;c++)if(Array.isArray(H[c])){var v=H[c];if(!(v.length<2)){var A=v[1];if(Array.isArray(A)&&!(A.length<1)){var U=A[0];if(U!="noop"&&U!="stop"&&U!="close")for(let re=1;re<A.length;re++)A[re]=""}}}}return vr(H)}catch{return m}}var ws={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},jo={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Bo;function Rs(){}S(Rs,Iu),Rs.prototype.g=function(){return new XMLHttpRequest},Bo=new Rs;function Gi(c){return encodeURIComponent(String(c))}function Mu(c){var m=1;c=c.split(":");const v=[];for(;m>0&&c.length;)v.push(c.shift()),m--;return c.length&&v.push(c.join(":")),v}function Xn(c,m,v,A){this.j=c,this.i=m,this.l=v,this.S=A||1,this.V=new bs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new $n}function $n(){this.i=null,this.g="",this.h=!1}var Rt={},Bt={};function gi(c,m,v){c.M=1,c.A=xs(Ct(m)),c.u=v,c.R=!0,Ta(c,null)}function Ta(c,m){c.F=Date.now(),yi(c),c.B=Ct(c.A);var v=c.B,A=c.S;Array.isArray(A)||(A=[String(A)]),wa(v.i,"t",A),c.C=0,v=c.j.L,c.h=new $n,c.g=Xu(c.j,v?m:null,!c.u),c.P>0&&(c.O=new an(y(c.Y,c,c.g),c.P)),m=c.V,v=c.g,A=c.ba;var U="readystatechange";Array.isArray(U)||(U&&(Po[0]=U.toString()),U=Po);for(let H=0;H<U.length;H++){const re=ut(v,U[H],A||m.handleEvent,!1,m.h||m);if(!re)break;m.g[re.key]=re}m=c.J?O(c.J):{},c.u?(c.v||(c.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,m)):(c.v="GET",c.g.ea(c.B,c.v,null,m)),fi(),Tf(c.i,c.v,c.B,c.l,c.S,c.u)}Xn.prototype.ba=function(c){c=c.target;const m=this.O;m&&Zn(c)==3?m.j():this.Y(c)},Xn.prototype.Y=function(c){try{if(c==this.g)e:{const Ce=Zn(this.g),vt=this.g.ya(),Ye=this.g.ca();if(!(Ce<3)&&(Ce!=3||this.g&&(this.h.h||this.g.la()||Yt(this.g)))){this.K||Ce!=4||vt==7||(vt==8||Ye<=0?fi(3):fi(2)),_i(this);var m=this.g.ca();this.X=m;var v=Af(this);if(this.o=m==200,Ou(this.i,this.v,this.B,this.l,this.S,Ce,m),this.o){if(this.U&&!this.L){t:{if(this.g){var A,U=this.g;if((A=U.g?U.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(A)){var H=A;break t}}H=null}if(c=H)mi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,vi(this,c);else{this.o=!1,this.m=3,wt(12),vn(this),kn(this);break e}}if(this.R){c=!0;let ct;for(;!this.K&&this.C<v.length;)if(ct=Lu(this,v),ct==Bt){Ce==4&&(this.m=4,wt(14),c=!1),mi(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==Rt){this.m=4,wt(15),mi(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else mi(this.i,this.l,ct,null),vi(this,ct);if(Vu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ce!=4||v.length!=0||this.h.h||(this.m=1,wt(16),c=!1),this.o=this.o&&c,!c)mi(this.i,this.l,v,"[Invalid Chunked Response]"),vn(this),kn(this);else if(v.length>0&&!this.W){this.W=!0;var re=this.j;re.g==this&&re.aa&&!re.P&&(re.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),nl(re),re.P=!0,wt(11))}}else mi(this.i,this.l,v,null),vi(this,v);Ce==4&&vn(this),this.o&&!this.K&&(Ce==4?Gu(this.j,this):(this.o=!1,yi(this)))}else Ki(this.g),m==400&&v.indexOf("Unknown SID")>0?(this.m=3,wt(12)):(this.m=0,wt(13)),vn(this),kn(this)}}}catch{}};function Af(c){if(!Vu(c))return c.g.la();const m=Yt(c.g);if(m==="")return"";let v="";const A=m.length,U=Zn(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return vn(c),kn(c),"";c.h.i=new f.TextDecoder}for(let H=0;H<A;H++)c.h.h=!0,v+=c.h.i.decode(m[H],{stream:!(U&&H==A-1)});return m.length=0,c.h.g+=v,c.C=0,c.h.g}function Vu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Lu(c,m){var v=c.C,A=m.indexOf(`
`,v);return A==-1?Bt:(v=Number(m.substring(v,A)),isNaN(v)?Rt:(A+=1,A+v>m.length?Bt:(m=m.slice(A,A+v),c.C=A+v,m)))}Xn.prototype.cancel=function(){this.K=!0,vn(this)};function yi(c){c.T=Date.now()+c.H,ba(c,c.H)}function ba(c,m){if(c.D!=null)throw Error("WatchDog timer not null");c.D=pi(y(c.aa,c),m)}function _i(c){c.D&&(f.clearTimeout(c.D),c.D=null)}Xn.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Ss(this.i,this.B),this.M!=2&&(fi(),wt(17)),vn(this),this.m=2,kn(this)):ba(this,this.T-c)};function kn(c){c.j.I==0||c.K||Gu(c.j,c)}function vn(c){_i(c);var m=c.O;m&&typeof m.dispose=="function"&&m.dispose(),c.O=null,zo(c.V),c.g&&(m=c.g,c.g=null,m.abort(),m.dispose())}function vi(c,m){try{var v=c.j;if(v.I!=0&&(v.g==c||Ti(v.h,c))){if(!c.L&&Ti(v.h,c)&&v.I==3){try{var A=v.Ba.g.parse(m)}catch{A=null}if(Array.isArray(A)&&A.length==3){var U=A;if(U[0]==0){e:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)Na(v),xr(v);else break e;Ms(v),wt(18)}}else v.xa=U[1],0<v.xa-v.K&&U[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=pi(y(v.Va,v),6e3));Ei(v.h)<=1&&v.ta&&(v.ta=void 0)}else xi(v,11)}else if((c.L||v.g==c)&&Na(v),!C(m))for(U=v.Ba.g.parse(m),m=0;m<U.length;m++){let Ye=U[m];const ct=Ye[0];if(!(ct<=v.K))if(v.K=ct,Ye=Ye[1],v.I==2)if(Ye[0]=="c"){v.M=Ye[1],v.ba=Ye[2];const Vn=Ye[3];Vn!=null&&(v.ka=Vn,v.j.info("VER="+v.ka));const Ci=Ye[4];Ci!=null&&(v.za=Ci,v.j.info("SVER="+v.za));const ei=Ye[5];ei!=null&&typeof ei=="number"&&ei>0&&(A=1.5*ei,v.O=A,v.j.info("backChannelRequestTimeoutMs_="+A)),A=v;const ti=c.g;if(ti){const Vs=ti.g?ti.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Vs){var H=A.h;H.g||Vs.indexOf("spdy")==-1&&Vs.indexOf("quic")==-1&&Vs.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Fo(H,H.h),H.h=null))}if(A.G){const Da=ti.g?ti.g.getResponseHeader("X-HTTP-Session-Id"):null;Da&&(A.wa=Da,Xe(A.J,A.G,Da))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),A=v;var re=c;if(A.na=Qu(A,A.L?A.ba:null,A.W),re.L){Go(A.h,re);var Ce=re,vt=A.O;vt&&(Ce.H=vt),Ce.D&&(_i(Ce),yi(Ce)),A.g=re}else Hu(A);v.i.length>0&&Ri(v)}else Ye[0]!="stop"&&Ye[0]!="close"||xi(v,7);else v.I==3&&(Ye[0]=="stop"||Ye[0]=="close"?Ye[0]=="stop"?xi(v,7):el(v):Ye[0]!="noop"&&v.l&&v.l.qa(Ye),v.A=0)}}fi(4)}catch{}}var xt=class{constructor(c,m){this.g=c,this.map=m}};function qo(c){this.l=c||10,f.PerformanceNavigationTiming?(c=f.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ho(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Ei(c){return c.h?1:c.g?c.g.size:0}function Ti(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function Fo(c,m){c.g?c.g.add(m):c.h=m}function Go(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}qo.prototype.cancel=function(){if(this.i=Yo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Yo(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const v of c.g.values())m=m.concat(v.G);return m}return P(c.i)}var Uu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Aa(c,m){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const A=c[v].indexOf("=");let U,H=null;A>=0?(U=c[v].substring(0,A),H=c[v].substring(A+1)):U=c[v],m(U,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function En(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;c instanceof En?(this.l=c.l,qt(this,c.j),this.o=c.o,this.g=c.g,Er(this,c.u),this.h=c.h,Ko(this,Bu(c.i)),this.m=c.m):c&&(m=String(c).match(Uu))?(this.l=!1,qt(this,m[1]||"",!0),this.o=bi(m[2]||""),this.g=bi(m[3]||"",!0),Er(this,m[4]),this.h=bi(m[5]||"",!0),Ko(this,m[6]||"",!0),this.m=bi(m[7]||"")):(this.l=!1,this.i=new br(null,this.l))}En.prototype.toString=function(){const c=[];var m=this.j;m&&c.push(Cs(m,Sa,!0),":");var v=this.g;return(v||m=="file")&&(c.push("//"),(m=this.o)&&c.push(Cs(m,Sa,!0),"@"),c.push(Gi(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(Cs(v,v.charAt(0)=="/"?Qo:Pu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",Cs(v,zu)),c.join("")},En.prototype.resolve=function(c){const m=Ct(this);let v=!!c.j;v?qt(m,c.j):v=!!c.o,v?m.o=c.o:v=!!c.g,v?m.g=c.g:v=c.u!=null;var A=c.h;if(v)Er(m,c.u);else if(v=!!c.h){if(A.charAt(0)!="/")if(this.g&&!this.h)A="/"+A;else{var U=m.h.lastIndexOf("/");U!=-1&&(A=m.h.slice(0,U+1)+A)}if(U=A,U==".."||U==".")A="";else if(U.indexOf("./")!=-1||U.indexOf("/.")!=-1){A=U.lastIndexOf("/",0)==0,U=U.split("/");const H=[];for(let re=0;re<U.length;){const Ce=U[re++];Ce=="."?A&&re==U.length&&H.push(""):Ce==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),A&&re==U.length&&H.push("")):(H.push(Ce),A=!0)}A=H.join("/")}else A=U}return v?m.h=A:v=c.i.toString()!=="",v?Ko(m,Bu(c.i)):v=!!c.m,v&&(m.m=c.m),m};function Ct(c){return new En(c)}function qt(c,m,v){c.j=v?bi(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function Er(c,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);c.u=m}else c.u=null}function Ko(c,m,v){m instanceof br?(c.i=m,Ra(c.i,c.l)):(v||(m=Cs(m,Tr)),c.i=new br(m,c.l))}function Xe(c,m,v){c.i.set(m,v)}function xs(c){return Xe(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function bi(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Cs(c,m,v){return typeof c=="string"?(c=encodeURI(c).replace(m,cn),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function cn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Sa=/[#\/\?@]/g,Pu=/[#\?:]/g,Qo=/[#\?]/g,Tr=/[#\?@]/g,zu=/#/g;function br(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function hn(c){c.g||(c.g=new Map,c.h=0,c.i&&Aa(c.i,function(m,v){c.add(decodeURIComponent(m.replace(/\+/g," ")),v)}))}r=br.prototype,r.add=function(c,m){hn(this),this.i=null,c=Ar(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(m),this.h+=1,this};function ju(c,m){hn(c),m=Ar(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Xo(c,m){return hn(c),m=Ar(c,m),c.g.has(m)}r.forEach=function(c,m){hn(this),this.g.forEach(function(v,A){v.forEach(function(U){c.call(m,U,A,this)},this)},this)};function $o(c,m){hn(c);let v=[];if(typeof m=="string")Xo(c,m)&&(v=v.concat(c.g.get(Ar(c,m))));else for(c=Array.from(c.g.values()),m=0;m<c.length;m++)v=v.concat(c[m]);return v}r.set=function(c,m){return hn(this),this.i=null,c=Ar(this,c),Xo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},r.get=function(c,m){return c?(c=$o(this,c),c.length>0?String(c[0]):m):m};function wa(c,m,v){ju(c,m),v.length>0&&(c.i=null,c.g.set(Ar(c,m),P(v)),c.h+=v.length)}r.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(let A=0;A<m.length;A++){var v=m[A];const U=Gi(v);v=$o(this,v);for(let H=0;H<v.length;H++){let re=U;v[H]!==""&&(re+="="+Gi(v[H])),c.push(re)}}return this.i=c.join("&")};function Bu(c){const m=new br;return m.i=c.i,c.g&&(m.g=new Map(c.g),m.h=c.h),m}function Ar(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function Ra(c,m){m&&!c.j&&(hn(c),c.i=null,c.g.forEach(function(v,A){const U=A.toLowerCase();A!=U&&(ju(this,A),wa(this,U,v))},c)),c.j=m}function Wn(c,m){const v=new Qn;if(f.Image){const A=new Image;A.onload=E(On,v,"TestLoadImage: loaded",!0,m,A),A.onerror=E(On,v,"TestLoadImage: error",!1,m,A),A.onabort=E(On,v,"TestLoadImage: abort",!1,m,A),A.ontimeout=E(On,v,"TestLoadImage: timeout",!1,m,A),f.setTimeout(function(){A.ontimeout&&A.ontimeout()},1e4),A.src=c}else m(!1)}function Wo(c,m){const v=new Qn,A=new AbortController,U=setTimeout(()=>{A.abort(),On(v,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:A.signal}).then(H=>{clearTimeout(U),H.ok?On(v,"TestPingServer: ok",!0,m):On(v,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(U),On(v,"TestPingServer: error",!1,m)})}function On(c,m,v,A,U){try{U&&(U.onload=null,U.onerror=null,U.onabort=null,U.ontimeout=null),A(v)}catch{}}function Sr(){this.g=new Cu}function Ai(c){this.i=c.Sb||null,this.h=c.ab||!1}S(Ai,Iu),Ai.prototype.g=function(){return new Is(this.i,this.h)};function Is(c,m){St.call(this),this.H=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}S(Is,St),r=Is.prototype,r.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=m,this.readyState=1,Jn(this)},r.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(m.body=c),(this.H||f).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},r.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,wr(this)),this.readyState=0},r.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Jn(this)),this.g&&(this.readyState=3,Jn(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;xa(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function xa(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}r.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?wr(this):Jn(this),this.readyState==3&&xa(this)}},r.Oa=function(c){this.g&&(this.response=this.responseText=c,wr(this))},r.Na=function(c){this.g&&(this.response=c,wr(this))},r.ga=function(){this.g&&wr(this)};function wr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Jn(c)}r.setRequestHeader=function(c,m){this.A.append(c,m)},r.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var v=m.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=m.next();return c.join(`\r
`)};function Jn(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Is.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Mn(c){let m="";return ge(c,function(v,A){m+=A,m+=":",m+=v,m+=`\r
`}),m}function Ns(c,m,v){e:{for(A in v){var A=!1;break e}A=!0}A||(v=Mn(v),typeof c=="string"?v!=null&&Gi(v):Xe(c,m,v))}function Je(c){St.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}S(Je,St);var Si=/^https?$/i,Jo=["POST","PUT"];r=Je.prototype,r.Fa=function(c){this.H=c},r.ea=function(c,m,v,A){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Bo.g(),this.g.onreadystatechange=w(y(this.Ca,this));try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(H){Ds(this,H);return}if(c=v||"",v=new Map(this.headers),A)if(Object.getPrototypeOf(A)===Object.prototype)for(var U in A)v.set(U,A[U]);else if(typeof A.keys=="function"&&typeof A.get=="function")for(const H of A.keys())v.set(H,A.get(H));else throw Error("Unknown input type for opt_headers: "+String(A));A=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),U=f.FormData&&c instanceof f.FormData,!(Array.prototype.indexOf.call(Jo,m,void 0)>=0)||A||U||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,re]of v)this.g.setRequestHeader(H,re);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(H){Ds(this,H)}};function Ds(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.o=5,Zo(c),Yi(c)}function Zo(c){c.A||(c.A=!0,Pt(c,"complete"),Pt(c,"error"))}r.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Pt(this,"complete"),Pt(this,"abort"),Yi(this))},r.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yi(this,!0)),Je.Z.N.call(this)},r.Ca=function(){this.u||(this.B||this.v||this.j?ks(this):this.Xa())},r.Xa=function(){ks(this)};function ks(c){if(c.h&&typeof u<"u"){if(c.v&&Zn(c)==4)setTimeout(c.Ca.bind(c),0);else if(Pt(c,"readystatechange"),Zn(c)==4){c.h=!1;try{const H=c.ca();e:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var v;if(!(v=m)){var A;if(A=H===0){let re=String(c.D).match(Uu)[1]||null;!re&&f.self&&f.self.location&&(re=f.self.location.protocol.slice(0,-1)),A=!Si.test(re?re.toLowerCase():"")}v=A}if(v)Pt(c,"complete"),Pt(c,"success");else{c.o=6;try{var U=Zn(c)>2?c.g.statusText:""}catch{U=""}c.l=U+" ["+c.ca()+"]",Zo(c)}}finally{Yi(c)}}}}function Yi(c,m){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,m||Pt(c,"ready");try{v.onreadystatechange=null}catch{}}}r.isActive=function(){return!!this.g};function Zn(c){return c.g?c.g.readyState:0}r.ca=function(){try{return Zn(this)>2?this.g.status:-1}catch{return-1}},r.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},r.La=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Ef(m)}};function Yt(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Ki(c){const m={};c=(c.g&&Zn(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let A=0;A<c.length;A++){if(C(c[A]))continue;var v=Mu(c[A]);const U=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=m[U]||[];m[U]=H,H.push(v)}ue(m,function(A){return A.join(", ")})}r.ya=function(){return this.o},r.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function wi(c,m,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||m}function Rr(c){this.za=0,this.i=[],this.j=new Qn,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=wi("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=wi("baseRetryDelayMs",5e3,c),this.Za=wi("retryDelaySeedMs",1e4,c),this.Ta=wi("forwardChannelMaxRetries",2,c),this.va=wi("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new qo(c&&c.concurrentRequestLimit),this.Ba=new Sr,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}r=Rr.prototype,r.ka=8,r.I=1,r.connect=function(c,m,v,A){wt(0),this.W=c,this.H=m||{},v&&A!==void 0&&(this.H.OSID=v,this.H.OAID=A),this.F=this.X,this.J=Qu(this,null,this.W),Ri(this)};function el(c){if(Ca(c),c.I==3){var m=c.V++,v=Ct(c.J);if(Xe(v,"SID",c.M),Xe(v,"RID",m),Xe(v,"TYPE","terminate"),Os(c,v),m=new Xn(c,c.j,m),m.M=2,m.A=xs(Ct(v)),v=!1,f.navigator&&f.navigator.sendBeacon)try{v=f.navigator.sendBeacon(m.A.toString(),"")}catch{}!v&&f.Image&&(new Image().src=m.A,v=!0),v||(m.g=Xu(m.j,null),m.g.ea(m.A)),m.F=Date.now(),yi(m)}Ku(c)}function xr(c){c.g&&(nl(c),c.g.cancel(),c.g=null)}function Ca(c){xr(c),c.v&&(f.clearTimeout(c.v),c.v=null),Na(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&f.clearTimeout(c.m),c.m=null)}function Ri(c){if(!Ho(c.h)&&!c.m){c.m=!0;var m=c.Ea;xe||x(),me||(xe(),me=!0),N.add(m,c),c.D=0}}function Ia(c,m){return Ei(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=m.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=pi(y(c.Ea,c,m),Yu(c,c.D)),c.D++,!0)}r.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const U=new Xn(this,this.j,c);let H=this.o;if(this.U&&(H?(H=O(H),te(H,this.U)):H=this.U),this.u!==null||this.R||(U.J=H,H=null),this.S)e:{for(var m=0,v=0;v<this.i.length;v++){t:{var A=this.i[v];if("__data__"in A.map&&(A=A.map.__data__,typeof A=="string")){A=A.length;break t}A=void 0}if(A===void 0)break;if(m+=A,m>4096){m=v;break e}if(m===4096||v===this.i.length-1){m=v+1;break e}}m=1e3}else m=1e3;m=qu(this,U,m),v=Ct(this.J),Xe(v,"RID",c),Xe(v,"CVER",22),this.G&&Xe(v,"X-HTTP-Session-Id",this.G),Os(this,v),H&&(this.R?m="headers="+Gi(Mn(H))+"&"+m:this.u&&Ns(v,this.u,H)),Fo(this.h,U),this.Ra&&Xe(v,"TYPE","init"),this.S?(Xe(v,"$req",m),Xe(v,"SID","null"),U.U=!0,gi(U,v,null)):gi(U,v,m),this.I=2}}else this.I==3&&(c?tl(this,c):this.i.length==0||Ho(this.h)||tl(this))};function tl(c,m){var v;m?v=m.l:v=c.V++;const A=Ct(c.J);Xe(A,"SID",c.M),Xe(A,"RID",v),Xe(A,"AID",c.K),Os(c,A),c.u&&c.o&&Ns(A,c.u,c.o),v=new Xn(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),m&&(c.i=m.G.concat(c.i)),m=qu(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Fo(c.h,v),gi(v,A,m)}function Os(c,m){c.H&&ge(c.H,function(v,A){Xe(m,A,v)}),c.l&&ge({},function(v,A){Xe(m,A,v)})}function qu(c,m,v){v=Math.min(c.i.length,v);const A=c.l?y(c.l.Ka,c.l,c):null;e:{var U=c.i;let Ce=-1;for(;;){const vt=["count="+v];Ce==-1?v>0?(Ce=U[0].g,vt.push("ofs="+Ce)):Ce=0:vt.push("ofs="+Ce);let Ye=!0;for(let ct=0;ct<v;ct++){var H=U[ct].g;const Vn=U[ct].map;if(H-=Ce,H<0)Ce=Math.max(0,U[ct].g-100),Ye=!1;else try{H="req"+H+"_"||"";try{var re=Vn instanceof Map?Vn:Object.entries(Vn);for(const[Ci,ei]of re){let ti=ei;p(ei)&&(ti=vr(ei)),vt.push(H+Ci+"="+encodeURIComponent(ti))}}catch(Ci){throw vt.push(H+"type="+encodeURIComponent("_badmap")),Ci}}catch{A&&A(Vn)}}if(Ye){re=vt.join("&");break e}}re=void 0}return c=c.i.splice(0,v),m.G=c,re}function Hu(c){if(!c.g&&!c.v){c.Y=1;var m=c.Da;xe||x(),me||(xe(),me=!0),N.add(m,c),c.A=0}}function Ms(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=pi(y(c.Da,c),Yu(c,c.A)),c.A++,!0)}r.Da=function(){if(this.v=null,Fu(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=pi(y(this.Wa,this),c)}},r.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,wt(10),xr(this),Fu(this))};function nl(c){c.B!=null&&(f.clearTimeout(c.B),c.B=null)}function Fu(c){c.g=new Xn(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var m=Ct(c.na);Xe(m,"RID","rpc"),Xe(m,"SID",c.M),Xe(m,"AID",c.K),Xe(m,"CI",c.F?"0":"1"),!c.F&&c.ia&&Xe(m,"TO",c.ia),Xe(m,"TYPE","xmlhttp"),Os(c,m),c.u&&c.o&&Ns(m,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=xs(Ct(m)),v.u=null,v.R=!0,Ta(v,c)}r.Va=function(){this.C!=null&&(this.C=null,xr(this),Ms(this),wt(19))};function Na(c){c.C!=null&&(f.clearTimeout(c.C),c.C=null)}function Gu(c,m){var v=null;if(c.g==m){Na(c),nl(c),c.g=null;var A=2}else if(Ti(c.h,m))v=m.G,Go(c.h,m),A=1;else return;if(c.I!=0){if(m.o)if(A==1){v=m.u?m.u.length:0,m=Date.now()-m.F;var U=c.D;A=Ea(),Pt(A,new di(A,v)),Ri(c)}else Hu(c);else if(U=m.m,U==3||U==0&&m.X>0||!(A==1&&Ia(c,m)||A==2&&Ms(c)))switch(v&&v.length>0&&(m=c.h,m.i=m.i.concat(v)),U){case 1:xi(c,5);break;case 4:xi(c,10);break;case 3:xi(c,6);break;default:xi(c,2)}}}function Yu(c,m){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*m}function xi(c,m){if(c.j.info("Error code "+m),m==2){var v=y(c.bb,c),A=c.Ua;const U=!A;A=new En(A||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||qt(A,"https"),xs(A),U?Wn(A.toString(),v):Wo(A.toString(),v)}else wt(2);c.I=0,c.l&&c.l.pa(m),Ku(c),Ca(c)}r.bb=function(c){c?(this.j.info("Successfully pinged google.com"),wt(2)):(this.j.info("Failed to ping google.com"),wt(1))};function Ku(c){if(c.I=0,c.ja=[],c.l){const m=Yo(c.h);(m.length!=0||c.i.length!=0)&&(K(c.ja,m),K(c.ja,c.i),c.h.i.length=0,P(c.i),c.i.length=0),c.l.oa()}}function Qu(c,m,v){var A=v instanceof En?Ct(v):new En(v);if(A.g!="")m&&(A.g=m+"."+A.g),Er(A,A.u);else{var U=f.location;A=U.protocol,m=m?m+"."+U.hostname:U.hostname,U=+U.port;const H=new En(null);A&&qt(H,A),m&&(H.g=m),U&&Er(H,U),v&&(H.h=v),A=H}return v=c.G,m=c.wa,v&&m&&Xe(A,v,m),Xe(A,"VER",c.ka),Os(c,A),A}function Xu(c,m,v){if(m&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Aa&&!c.ma?new Je(new Ai({ab:v})):new Je(c.ma),m.Fa(c.L),m}r.isActive=function(){return!!this.l&&this.l.isActive(this)};function $u(){}r=$u.prototype,r.ra=function(){},r.qa=function(){},r.pa=function(){},r.oa=function(){},r.isActive=function(){return!0},r.Ka=function(){};function Cr(){}Cr.prototype.g=function(c,m){return new on(c,m)};function on(c,m){St.call(this),this.g=new Rr(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(c?c["X-WebChannel-Client-Profile"]=m.sa:c={"X-WebChannel-Client-Profile":m.sa}),this.g.U=c,(c=m&&m.Qb)&&!C(c)&&(this.g.u=c),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!C(m)&&(this.g.G=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Qi(this)}S(on,St),on.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},on.prototype.close=function(){el(this.g)},on.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=vr(c),c=v);m.i.push(new xt(m.Ya++,c)),m.I==3&&Ri(m)},on.prototype.N=function(){this.g.l=null,delete this.j,el(this.g),delete this.g,on.Z.N.call(this)};function Wu(c){Gt.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const v in m){c=v;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}S(Wu,Gt);function Ju(){Dn.call(this),this.status=1}S(Ju,Dn);function Qi(c){this.g=c}S(Qi,$u),Qi.prototype.ra=function(){Pt(this.g,"a")},Qi.prototype.qa=function(c){Pt(this.g,new Wu(c))},Qi.prototype.pa=function(c){Pt(this.g,new Ju)},Qi.prototype.oa=function(){Pt(this.g,"b")},Cr.prototype.createWebChannel=Cr.prototype.g,on.prototype.send=on.prototype.o,on.prototype.open=on.prototype.m,on.prototype.close=on.prototype.close,RT=function(){return new Cr},wT=function(){return Ea()},ST=_t,sm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},ws.NO_ERROR=0,ws.TIMEOUT=8,ws.HTTP_ERROR=6,bh=ws,jo.COMPLETE="complete",AT=jo,Nu.EventType=Kn,Kn.OPEN="a",Kn.CLOSE="b",Kn.ERROR="c",Kn.MESSAGE="d",St.prototype.listen=St.prototype.J,Kl=Nu,Je.prototype.listenOnce=Je.prototype.K,Je.prototype.getLastError=Je.prototype.Ha,Je.prototype.getLastErrorCode=Je.prototype.ya,Je.prototype.getStatus=Je.prototype.ca,Je.prototype.getResponseJson=Je.prototype.La,Je.prototype.getResponseText=Je.prototype.la,Je.prototype.send=Je.prototype.ea,Je.prototype.setWithCredentials=Je.prototype.Fa,bT=Je}).apply(typeof sh<"u"?sh:typeof self<"u"?self:typeof window<"u"?window:{});class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");let No="12.8.0";function O4(r){No=r}const la=new Mm("@firebase/firestore");function oo(){return la.logLevel}function he(r,...e){if(la.logLevel<=Le.DEBUG){const n=e.map(Gm);la.debug(`Firestore (${No}): ${r}`,...n)}}function gr(r,...e){if(la.logLevel<=Le.ERROR){const n=e.map(Gm);la.error(`Firestore (${No}): ${r}`,...n)}}function To(r,...e){if(la.logLevel<=Le.WARN){const n=e.map(Gm);la.warn(`Firestore (${No}): ${r}`,...n)}}function Gm(r){if(typeof r=="string")return r;try{return(function(n){return JSON.stringify(n)})(r)}catch{return r}}function be(r,e,n){let s="Unexpected state";typeof e=="string"?s=e:n=e,xT(r,s,n)}function xT(r,e,n){let s=`FIRESTORE (${No}) INTERNAL ASSERTION FAILED: ${e} (ID: ${r.toString(16)})`;if(n!==void 0)try{s+=" CONTEXT: "+JSON.stringify(n)}catch{s+=" CONTEXT: "+n}throw gr(s),new Error(s)}function Qe(r,e,n,s){let o="Unexpected state";typeof n=="string"?o=n:s=n,r||xT(e,o,s)}function Re(r,e){return r}const $={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ce extends Hi{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ea{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}class CT{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class M4{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(nn.UNAUTHENTICATED)))}shutdown(){}}class V4{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class L4{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Qe(this.o===void 0,42304);let s=this.i;const o=g=>this.i!==s?(s=this.i,n(g)):Promise.resolve();let u=new ea;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new ea,e.enqueueRetryable((()=>o(this.currentUser)))};const f=()=>{const g=u;e.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},p=g=>{he("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),f())};this.t.onInit((g=>p(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?p(g):(he("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new ea)}}),0),f()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((s=>this.i!==e?(he("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Qe(typeof s.accessToken=="string",31837,{l:s}),new CT(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string",2055,{h:e}),new nn(e)}}class U4{constructor(e,n,s){this.P=e,this.T=n,this.I=s,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class P4{constructor(e,n,s){this.P=e,this.T=n,this.I=s}getToken(){return Promise.resolve(new U4(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(nn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Q0{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class z4{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Cn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Qe(this.o===void 0,3512);const s=u=>{u.error!=null&&he("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const f=u.token!==this.m;return this.m=u.token,he("FirebaseAppCheckTokenProvider",`Received ${f?"new":"existing"} token.`),f?n(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable((()=>s(u)))};const o=u=>{he("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):he("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Q0(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Qe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Q0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function j4(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(r);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let s=0;s<r;s++)n[s]=Math.floor(256*Math.random());return n}class Ym{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=j4(40);for(let u=0;u<o.length;++u)s.length<20&&o[u]<n&&(s+=e.charAt(o[u]%62))}return s}}function Ue(r,e){return r<e?-1:r>e?1:0}function am(r,e){const n=Math.min(r.length,e.length);for(let s=0;s<n;s++){const o=r.charAt(s),u=e.charAt(s);if(o!==u)return Vp(o)===Vp(u)?Ue(o,u):Vp(o)?1:-1}return Ue(r.length,e.length)}const B4=55296,q4=57343;function Vp(r){const e=r.charCodeAt(0);return e>=B4&&e<=q4}function bo(r,e,n){return r.length===e.length&&r.every(((s,o)=>n(s,e[o])))}const X0="__name__";class Oi{constructor(e,n,s){n===void 0?n=0:n>e.length&&be(637,{offset:n,range:e.length}),s===void 0?s=e.length-n:s>e.length-n&&be(1746,{length:s,range:e.length-n}),this.segments=e,this.offset=n,this.len=s}get length(){return this.len}isEqual(e){return Oi.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Oi?e.forEach((s=>{n.push(s)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,s=this.limit();n<s;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const s=Math.min(e.length,n.length);for(let o=0;o<s;o++){const u=Oi.compareSegments(e.get(o),n.get(o));if(u!==0)return u}return Ue(e.length,n.length)}static compareSegments(e,n){const s=Oi.isNumericId(e),o=Oi.isNumericId(n);return s&&!o?-1:!s&&o?1:s&&o?Oi.extractNumericId(e).compare(Oi.extractNumericId(n)):am(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return os.fromString(e.substring(4,e.length-2))}}class it extends Oi{construct(e,n,s){return new it(e,n,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const s of e){if(s.indexOf("//")>=0)throw new ce($.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);n.push(...s.split("/").filter((o=>o.length>0)))}return new it(n)}static emptyPath(){return new it([])}}const H4=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jt extends Oi{construct(e,n,s){return new Jt(e,n,s)}static isValidIdentifier(e){return H4.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===X0}static keyField(){return new Jt([X0])}static fromServerFormat(e){const n=[];let s="",o=0;const u=()=>{if(s.length===0)throw new ce($.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(s),s=""};let f=!1;for(;o<e.length;){const p=e[o];if(p==="\\"){if(o+1===e.length)throw new ce($.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const g=e[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new ce($.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=g,o+=2}else p==="`"?(f=!f,o++):p!=="."||f?(s+=p,o++):(u(),o++)}if(u(),f)throw new ce($.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jt(n)}static emptyPath(){return new Jt([])}}class _e{constructor(e){this.path=e}static fromPath(e){return new _e(it.fromString(e))}static fromName(e){return new _e(it.fromString(e).popFirst(5))}static empty(){return new _e(it.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&it.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return it.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _e(new it(e.slice()))}}function IT(r,e,n){if(!n)throw new ce($.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function F4(r,e,n,s){if(e===!0&&s===!0)throw new ce($.INVALID_ARGUMENT,`${r} and ${n} cannot be used together.`)}function $0(r){if(!_e.isDocumentKey(r))throw new ce($.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function W0(r){if(_e.isDocumentKey(r))throw new ce($.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function NT(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}function ef(r){if(r===void 0)return"undefined";if(r===null)return"null";if(typeof r=="string")return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if(typeof r=="number"||typeof r=="boolean")return""+r;if(typeof r=="object"){if(r instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(r);return e?`a custom ${e} object`:"an object"}}return typeof r=="function"?"a function":be(12329,{type:typeof r})}function dr(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new ce($.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=ef(r);throw new ce($.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return r}function Lt(r,e){const n={typeString:r};return e&&(n.value=e),n}function Tu(r,e){if(!NT(r))throw new ce($.INVALID_ARGUMENT,"JSON must be an object");let n;for(const s in e)if(e[s]){const o=e[s].typeString,u="value"in e[s]?{value:e[s].value}:void 0;if(!(s in r)){n=`JSON missing required field: '${s}'`;break}const f=r[s];if(o&&typeof f!==o){n=`JSON field '${s}' must be a ${o}.`;break}if(u!==void 0&&f!==u.value){n=`Expected '${s}' field to equal '${u.value}'`;break}}if(n)throw new ce($.INVALID_ARGUMENT,n);return!0}const J0=-62135596800,Z0=1e6;class ot{static now(){return ot.fromMillis(Date.now())}static fromDate(e){return ot.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),s=Math.floor((e-1e3*n)*Z0);return new ot(n,s)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ce($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ce($.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<J0)throw new ce($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ce($.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Z0}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ot._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Tu(e,ot._jsonSchema))return new ot(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-J0;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ot._jsonSchemaVersion="firestore/timestamp/1.0",ot._jsonSchema={type:Lt("string",ot._jsonSchemaVersion),seconds:Lt("number"),nanoseconds:Lt("number")};class Ae{static fromTimestamp(e){return new Ae(e)}static min(){return new Ae(new ot(0,0))}static max(){return new Ae(new ot(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const au=-1;function G4(r,e){const n=r.toTimestamp().seconds,s=r.toTimestamp().nanoseconds+1,o=Ae.fromTimestamp(s===1e9?new ot(n+1,0):new ot(n,s));return new cs(o,_e.empty(),e)}function Y4(r){return new cs(r.readTime,r.key,au)}class cs{constructor(e,n,s){this.readTime=e,this.documentKey=n,this.largestBatchId=s}static min(){return new cs(Ae.min(),_e.empty(),au)}static max(){return new cs(Ae.max(),_e.empty(),au)}}function K4(r,e){let n=r.readTime.compareTo(e.readTime);return n!==0?n:(n=_e.comparator(r.documentKey,e.documentKey),n!==0?n:Ue(r.largestBatchId,e.largestBatchId))}const Q4="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class X4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}async function Do(r){if(r.code!==$.FAILED_PRECONDITION||r.message!==Q4)throw r;he("LocalStore","Unexpectedly lost primary lease")}class W{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&be(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new W(((s,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(s,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(s,o)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof W?n:W.resolve(n)}catch(n){return W.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):W.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):W.reject(n)}static resolve(e){return new W(((n,s)=>{n(e)}))}static reject(e){return new W(((n,s)=>{s(e)}))}static waitFor(e){return new W(((n,s)=>{let o=0,u=0,f=!1;e.forEach((p=>{++o,p.next((()=>{++u,f&&u===o&&n()}),(g=>s(g)))})),f=!0,u===o&&n()}))}static or(e){let n=W.resolve(!1);for(const s of e)n=n.next((o=>o?W.resolve(o):s()));return n}static forEach(e,n){const s=[];return e.forEach(((o,u)=>{s.push(n.call(this,o,u))})),this.waitFor(s)}static mapArray(e,n){return new W(((s,o)=>{const u=e.length,f=new Array(u);let p=0;for(let g=0;g<u;g++){const y=g;n(e[y]).next((E=>{f[y]=E,++p,p===u&&s(f)}),(E=>o(E)))}}))}static doWhile(e,n){return new W(((s,o)=>{const u=()=>{e()===!0?n().next((()=>{u()}),o):s()};u()}))}}function $4(r){const e=r.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ko(r){return r.name==="IndexedDbTransactionError"}class tf{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>n.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}tf.ce=-1;const Km=-1;function nf(r){return r==null}function Lh(r){return r===0&&1/r==-1/0}function W4(r){return typeof r=="number"&&Number.isInteger(r)&&!Lh(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}const DT="";function J4(r){let e="";for(let n=0;n<r.length;n++)e.length>0&&(e=e1(e)),e=Z4(r.get(n),e);return e1(e)}function Z4(r,e){let n=e;const s=r.length;for(let o=0;o<s;o++){const u=r.charAt(o);switch(u){case"\0":n+="";break;case DT:n+="";break;default:n+=u}}return n}function e1(r){return r+DT+""}function t1(r){let e=0;for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e++;return e}function _s(r,e){for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&e(n,r[n])}function kT(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class dt{constructor(e,n){this.comparator=e,this.root=n||Wt.EMPTY}insert(e,n){return new dt(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(e){return new dt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return n.value;s<0?n=n.left:s>0&&(n=n.right)}return null}indexOf(e){let n=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return n+s.left.size;o<0?s=s.left:(n+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,s)=>(e(n,s),!1)))}toString(){const e=[];return this.inorderTraversal(((n,s)=>(e.push(`${n}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ah(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ah(this.root,e,this.comparator,!1)}getReverseIterator(){return new ah(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ah(this.root,e,this.comparator,!0)}}class ah{constructor(e,n,s,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=n?s(e.key,n):1,n&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(u===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Wt{constructor(e,n,s,o,u){this.key=e,this.value=n,this.color=s??Wt.RED,this.left=o??Wt.EMPTY,this.right=u??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,s,o,u){return new Wt(e??this.key,n??this.value,s??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const u=s(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,n,s),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let s,o=this;if(n(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(e,o.key)===0){if(o.right.isEmpty())return Wt.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw be(43730,{key:this.key,value:this.value});if(this.right.isRed())throw be(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw be(27949);return e+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw be(57766)}get value(){throw be(16141)}get color(){throw be(16727)}get left(){throw be(29726)}get right(){throw be(36894)}copy(e,n,s,o,u){return this}insert(e,n,s){return new Wt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class jt{constructor(e){this.comparator=e,this.data=new dt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,s)=>(e(n),!1)))}forEachInRange(e,n){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;n(o.key)}}forEachWhile(e,n){let s;for(s=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new n1(this.data.getIterator())}getIteratorFrom(e){return new n1(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((s=>{n=n.add(s)})),n}isEqual(e){if(!(e instanceof jt)||this.size!==e.size)return!1;const n=this.data.getIterator(),s=e.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new jt(this.comparator);return n.data=e,n}}class n1{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class In{constructor(e){this.fields=e,e.sort(Jt.comparator)}static empty(){return new In([])}unionWith(e){let n=new jt(Jt.comparator);for(const s of this.fields)n=n.add(s);for(const s of e)n=n.add(s);return new In(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return bo(this.fields,e.fields,((n,s)=>n.isEqual(s)))}}class OT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new OT("Invalid base64 string: "+u):u}})(e);return new Zt(n)}static fromUint8Array(e){const n=(function(o){let u="";for(let f=0;f<o.length;++f)u+=String.fromCharCode(o[f]);return u})(e);return new Zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const eN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function hs(r){if(Qe(!!r,39018),typeof r=="string"){let e=0;const n=eN.exec(r);if(Qe(!!n,46558,{timestamp:r}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(r);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:bt(r.seconds),nanos:bt(r.nanos)}}function bt(r){return typeof r=="number"?r:typeof r=="string"?Number(r):0}function fs(r){return typeof r=="string"?Zt.fromBase64String(r):Zt.fromUint8Array(r)}const MT="server_timestamp",VT="__type__",LT="__previous_value__",UT="__local_write_time__";function Qm(r){return(r?.mapValue?.fields||{})[VT]?.stringValue===MT}function rf(r){const e=r.mapValue.fields[LT];return Qm(e)?rf(e):e}function ou(r){const e=hs(r.mapValue.fields[UT].timestampValue);return new ot(e.seconds,e.nanos)}class tN{constructor(e,n,s,o,u,f,p,g,y,E,S){this.databaseId=e,this.appId=n,this.persistenceKey=s,this.host=o,this.ssl=u,this.forceLongPolling=f,this.autoDetectLongPolling=p,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=E,this.apiKey=S}}const Uh="(default)";class lu{constructor(e,n){this.projectId=e,this.database=n||Uh}static empty(){return new lu("","")}get isDefaultDatabase(){return this.database===Uh}isEqual(e){return e instanceof lu&&e.projectId===this.projectId&&e.database===this.database}}function nN(r,e){if(!Object.prototype.hasOwnProperty.apply(r.options,["projectId"]))throw new ce($.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new lu(r.options.projectId,e)}const PT="__type__",iN="__max__",oh={mapValue:{}},zT="__vector__",Ph="value";function ds(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?Qm(r)?4:sN(r)?9007199254740991:rN(r)?10:11:be(28295,{value:r})}function qi(r,e){if(r===e)return!0;const n=ds(r);if(n!==ds(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return ou(r).isEqual(ou(e));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const f=hs(o.timestampValue),p=hs(u.timestampValue);return f.seconds===p.seconds&&f.nanos===p.nanos})(r,e);case 5:return r.stringValue===e.stringValue;case 6:return(function(o,u){return fs(o.bytesValue).isEqual(fs(u.bytesValue))})(r,e);case 7:return r.referenceValue===e.referenceValue;case 8:return(function(o,u){return bt(o.geoPointValue.latitude)===bt(u.geoPointValue.latitude)&&bt(o.geoPointValue.longitude)===bt(u.geoPointValue.longitude)})(r,e);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return bt(o.integerValue)===bt(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const f=bt(o.doubleValue),p=bt(u.doubleValue);return f===p?Lh(f)===Lh(p):isNaN(f)&&isNaN(p)}return!1})(r,e);case 9:return bo(r.arrayValue.values||[],e.arrayValue.values||[],qi);case 10:case 11:return(function(o,u){const f=o.mapValue.fields||{},p=u.mapValue.fields||{};if(t1(f)!==t1(p))return!1;for(const g in f)if(f.hasOwnProperty(g)&&(p[g]===void 0||!qi(f[g],p[g])))return!1;return!0})(r,e);default:return be(52216,{left:r})}}function uu(r,e){return(r.values||[]).find((n=>qi(n,e)))!==void 0}function Ao(r,e){if(r===e)return 0;const n=ds(r),s=ds(e);if(n!==s)return Ue(n,s);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ue(r.booleanValue,e.booleanValue);case 2:return(function(u,f){const p=bt(u.integerValue||u.doubleValue),g=bt(f.integerValue||f.doubleValue);return p<g?-1:p>g?1:p===g?0:isNaN(p)?isNaN(g)?0:-1:1})(r,e);case 3:return i1(r.timestampValue,e.timestampValue);case 4:return i1(ou(r),ou(e));case 5:return am(r.stringValue,e.stringValue);case 6:return(function(u,f){const p=fs(u),g=fs(f);return p.compareTo(g)})(r.bytesValue,e.bytesValue);case 7:return(function(u,f){const p=u.split("/"),g=f.split("/");for(let y=0;y<p.length&&y<g.length;y++){const E=Ue(p[y],g[y]);if(E!==0)return E}return Ue(p.length,g.length)})(r.referenceValue,e.referenceValue);case 8:return(function(u,f){const p=Ue(bt(u.latitude),bt(f.latitude));return p!==0?p:Ue(bt(u.longitude),bt(f.longitude))})(r.geoPointValue,e.geoPointValue);case 9:return r1(r.arrayValue,e.arrayValue);case 10:return(function(u,f){const p=u.fields||{},g=f.fields||{},y=p[Ph]?.arrayValue,E=g[Ph]?.arrayValue,S=Ue(y?.values?.length||0,E?.values?.length||0);return S!==0?S:r1(y,E)})(r.mapValue,e.mapValue);case 11:return(function(u,f){if(u===oh.mapValue&&f===oh.mapValue)return 0;if(u===oh.mapValue)return 1;if(f===oh.mapValue)return-1;const p=u.fields||{},g=Object.keys(p),y=f.fields||{},E=Object.keys(y);g.sort(),E.sort();for(let S=0;S<g.length&&S<E.length;++S){const w=am(g[S],E[S]);if(w!==0)return w;const P=Ao(p[g[S]],y[E[S]]);if(P!==0)return P}return Ue(g.length,E.length)})(r.mapValue,e.mapValue);default:throw be(23264,{he:n})}}function i1(r,e){if(typeof r=="string"&&typeof e=="string"&&r.length===e.length)return Ue(r,e);const n=hs(r),s=hs(e),o=Ue(n.seconds,s.seconds);return o!==0?o:Ue(n.nanos,s.nanos)}function r1(r,e){const n=r.values||[],s=e.values||[];for(let o=0;o<n.length&&o<s.length;++o){const u=Ao(n[o],s[o]);if(u)return u}return Ue(n.length,s.length)}function So(r){return om(r)}function om(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?(function(n){const s=hs(n);return`time(${s.seconds},${s.nanos})`})(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?(function(n){return fs(n).toBase64()})(r.bytesValue):"referenceValue"in r?(function(n){return _e.fromName(n).toString()})(r.referenceValue):"geoPointValue"in r?(function(n){return`geo(${n.latitude},${n.longitude})`})(r.geoPointValue):"arrayValue"in r?(function(n){let s="[",o=!0;for(const u of n.values||[])o?o=!1:s+=",",s+=om(u);return s+"]"})(r.arrayValue):"mapValue"in r?(function(n){const s=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const f of s)u?u=!1:o+=",",o+=`${f}:${om(n.fields[f])}`;return o+"}"})(r.mapValue):be(61005,{value:r})}function Ah(r){switch(ds(r)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rf(r);return e?16+Ah(e):16;case 5:return 2*r.stringValue.length;case 6:return fs(r.bytesValue).approximateByteSize();case 7:return r.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,u)=>o+Ah(u)),0)})(r.arrayValue);case 10:case 11:return(function(s){let o=0;return _s(s.fields,((u,f)=>{o+=u.length+Ah(f)})),o})(r.mapValue);default:throw be(13486,{value:r})}}function s1(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function lm(r){return!!r&&"integerValue"in r}function Xm(r){return!!r&&"arrayValue"in r}function a1(r){return!!r&&"nullValue"in r}function o1(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function Sh(r){return!!r&&"mapValue"in r}function rN(r){return(r?.mapValue?.fields||{})[PT]?.stringValue===zT}function Zl(r){if(r.geoPointValue)return{geoPointValue:{...r.geoPointValue}};if(r.timestampValue&&typeof r.timestampValue=="object")return{timestampValue:{...r.timestampValue}};if(r.mapValue){const e={mapValue:{fields:{}}};return _s(r.mapValue.fields,((n,s)=>e.mapValue.fields[n]=Zl(s))),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(r.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Zl(r.arrayValue.values[n]);return e}return{...r}}function sN(r){return(((r.mapValue||{}).fields||{}).__type__||{}).stringValue===iN}class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let s=0;s<e.length-1;++s)if(n=(n.mapValue.fields||{})[e.get(s)],!Sh(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zl(n)}setAll(e){let n=Jt.emptyPath(),s={},o=[];e.forEach(((f,p)=>{if(!n.isImmediateParentOf(p)){const g=this.getFieldsMap(n);this.applyChanges(g,s,o),s={},o=[],n=p.popLast()}f?s[p.lastSegment()]=Zl(f):o.push(p.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,s,o)}delete(e){const n=this.field(e.popLast());Sh(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return qi(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=n.mapValue.fields[e.get(s)];Sh(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[e.get(s)]=o),n=o}return n.mapValue.fields}applyChanges(e,n,s){_s(n,((o,u)=>e[o]=u));for(const o of s)delete e[o]}clone(){return new _n(Zl(this.value))}}function jT(r){const e=[];return _s(r.fields,((n,s)=>{const o=new Jt([n]);if(Sh(s)){const u=jT(s.mapValue).fields;if(u.length===0)e.push(o);else for(const f of u)e.push(o.child(f))}else e.push(o)})),new In(e)}class rn{constructor(e,n,s,o,u,f,p){this.key=e,this.documentType=n,this.version=s,this.readTime=o,this.createTime=u,this.data=f,this.documentState=p}static newInvalidDocument(e){return new rn(e,0,Ae.min(),Ae.min(),Ae.min(),_n.empty(),0)}static newFoundDocument(e,n,s,o){return new rn(e,1,n,Ae.min(),s,o,0)}static newNoDocument(e,n){return new rn(e,2,n,Ae.min(),Ae.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new rn(e,3,n,Ae.min(),Ae.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Ae.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ae.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof rn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class zh{constructor(e,n){this.position=e,this.inclusive=n}}function l1(r,e,n){let s=0;for(let o=0;o<r.position.length;o++){const u=e[o],f=r.position[o];if(u.field.isKeyField()?s=_e.comparator(_e.fromName(f.referenceValue),n.key):s=Ao(f,n.data.field(u.field)),u.dir==="desc"&&(s*=-1),s!==0)break}return s}function u1(r,e){if(r===null)return e===null;if(e===null||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let n=0;n<r.position.length;n++)if(!qi(r.position[n],e.position[n]))return!1;return!0}class cu{constructor(e,n="asc"){this.field=e,this.dir=n}}function aN(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class BT{}class Mt extends BT{constructor(e,n,s){super(),this.field=e,this.op=n,this.value=s}static create(e,n,s){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,s):new lN(e,n,s):n==="array-contains"?new hN(e,s):n==="in"?new fN(e,s):n==="not-in"?new dN(e,s):n==="array-contains-any"?new pN(e,s):new Mt(e,n,s)}static createKeyFieldInFilter(e,n,s){return n==="in"?new uN(e,s):new cN(e,s)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Ao(n,this.value)):n!==null&&ds(this.value)===ds(n)&&this.matchesComparison(Ao(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return be(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ci extends BT{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new ci(e,n)}matches(e){return qT(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function qT(r){return r.op==="and"}function HT(r){return oN(r)&&qT(r)}function oN(r){for(const e of r.filters)if(e instanceof ci)return!1;return!0}function um(r){if(r instanceof Mt)return r.field.canonicalString()+r.op.toString()+So(r.value);if(HT(r))return r.filters.map((e=>um(e))).join(",");{const e=r.filters.map((n=>um(n))).join(",");return`${r.op}(${e})`}}function FT(r,e){return r instanceof Mt?(function(s,o){return o instanceof Mt&&s.op===o.op&&s.field.isEqual(o.field)&&qi(s.value,o.value)})(r,e):r instanceof ci?(function(s,o){return o instanceof ci&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((u,f,p)=>u&&FT(f,o.filters[p])),!0):!1})(r,e):void be(19439)}function GT(r){return r instanceof Mt?(function(n){return`${n.field.canonicalString()} ${n.op} ${So(n.value)}`})(r):r instanceof ci?(function(n){return n.op.toString()+" {"+n.getFilters().map(GT).join(" ,")+"}"})(r):"Filter"}class lN extends Mt{constructor(e,n,s){super(e,n,s),this.key=_e.fromName(s.referenceValue)}matches(e){const n=_e.comparator(e.key,this.key);return this.matchesComparison(n)}}class uN extends Mt{constructor(e,n){super(e,"in",n),this.keys=YT("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class cN extends Mt{constructor(e,n){super(e,"not-in",n),this.keys=YT("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function YT(r,e){return(e.arrayValue?.values||[]).map((n=>_e.fromName(n.referenceValue)))}class hN extends Mt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Xm(n)&&uu(n.arrayValue,this.value)}}class fN extends Mt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&uu(this.value.arrayValue,n)}}class dN extends Mt{constructor(e,n){super(e,"not-in",n)}matches(e){if(uu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!uu(this.value.arrayValue,n)}}class pN extends Mt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Xm(n)||!n.arrayValue.values)&&n.arrayValue.values.some((s=>uu(this.value.arrayValue,s)))}}class mN{constructor(e,n=null,s=[],o=[],u=null,f=null,p=null){this.path=e,this.collectionGroup=n,this.orderBy=s,this.filters=o,this.limit=u,this.startAt=f,this.endAt=p,this.Te=null}}function c1(r,e=null,n=[],s=[],o=null,u=null,f=null){return new mN(r,e,n,s,o,u,f)}function $m(r){const e=Re(r);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((s=>um(s))).join(","),n+="|ob:",n+=e.orderBy.map((s=>(function(u){return u.field.canonicalString()+u.dir})(s))).join(","),nf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((s=>So(s))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((s=>So(s))).join(",")),e.Te=n}return e.Te}function Wm(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<r.orderBy.length;n++)if(!aN(r.orderBy[n],e.orderBy[n]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let n=0;n<r.filters.length;n++)if(!FT(r.filters[n],e.filters[n]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!u1(r.startAt,e.startAt)&&u1(r.endAt,e.endAt)}function cm(r){return _e.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}class Oo{constructor(e,n=null,s=[],o=[],u=null,f="F",p=null,g=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=s,this.filters=o,this.limit=u,this.limitType=f,this.startAt=p,this.endAt=g,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function gN(r,e,n,s,o,u,f,p){return new Oo(r,e,n,s,o,u,f,p)}function Jm(r){return new Oo(r)}function h1(r){return r.filters.length===0&&r.limit===null&&r.startAt==null&&r.endAt==null&&(r.explicitOrderBy.length===0||r.explicitOrderBy.length===1&&r.explicitOrderBy[0].field.isKeyField())}function yN(r){return _e.isDocumentKey(r.path)&&r.collectionGroup===null&&r.filters.length===0}function KT(r){return r.collectionGroup!==null}function eu(r){const e=Re(r);if(e.Ie===null){e.Ie=[];const n=new Set;for(const u of e.explicitOrderBy)e.Ie.push(u),n.add(u.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(f){let p=new jt(Jt.comparator);return f.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(p=p.add(y.field))}))})),p})(e).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||e.Ie.push(new cu(u,s))})),n.has(Jt.keyField().canonicalString())||e.Ie.push(new cu(Jt.keyField(),s))}return e.Ie}function Pi(r){const e=Re(r);return e.Ee||(e.Ee=_N(e,eu(r))),e.Ee}function _N(r,e){if(r.limitType==="F")return c1(r.path,r.collectionGroup,e,r.filters,r.limit,r.startAt,r.endAt);{e=e.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new cu(o.field,u)}));const n=r.endAt?new zh(r.endAt.position,r.endAt.inclusive):null,s=r.startAt?new zh(r.startAt.position,r.startAt.inclusive):null;return c1(r.path,r.collectionGroup,e,r.filters,r.limit,n,s)}}function hm(r,e){const n=r.filters.concat([e]);return new Oo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),n,r.limit,r.limitType,r.startAt,r.endAt)}function vN(r,e){const n=r.explicitOrderBy.concat([e]);return new Oo(r.path,r.collectionGroup,n,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}function fm(r,e,n){return new Oo(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,n,r.startAt,r.endAt)}function sf(r,e){return Wm(Pi(r),Pi(e))&&r.limitType===e.limitType}function QT(r){return`${$m(Pi(r))}|lt:${r.limitType}`}function lo(r){return`Query(target=${(function(n){let s=n.path.canonicalString();return n.collectionGroup!==null&&(s+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(s+=`, filters: [${n.filters.map((o=>GT(o))).join(", ")}]`),nf(n.limit)||(s+=", limit: "+n.limit),n.orderBy.length>0&&(s+=`, orderBy: [${n.orderBy.map((o=>(function(f){return`${f.field.canonicalString()} (${f.dir})`})(o))).join(", ")}]`),n.startAt&&(s+=", startAt: ",s+=n.startAt.inclusive?"b:":"a:",s+=n.startAt.position.map((o=>So(o))).join(",")),n.endAt&&(s+=", endAt: ",s+=n.endAt.inclusive?"a:":"b:",s+=n.endAt.position.map((o=>So(o))).join(",")),`Target(${s})`})(Pi(r))}; limitType=${r.limitType})`}function af(r,e){return e.isFoundDocument()&&(function(s,o){const u=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(u):_e.isDocumentKey(s.path)?s.path.isEqual(u):s.path.isImmediateParentOf(u)})(r,e)&&(function(s,o){for(const u of eu(s))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(r,e)&&(function(s,o){for(const u of s.filters)if(!u.matches(o))return!1;return!0})(r,e)&&(function(s,o){return!(s.startAt&&!(function(f,p,g){const y=l1(f,p,g);return f.inclusive?y<=0:y<0})(s.startAt,eu(s),o)||s.endAt&&!(function(f,p,g){const y=l1(f,p,g);return f.inclusive?y>=0:y>0})(s.endAt,eu(s),o))})(r,e)}function EN(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function XT(r){return(e,n)=>{let s=!1;for(const o of eu(r)){const u=TN(o,e,n);if(u!==0)return u;s=s||o.field.isKeyField()}return 0}}function TN(r,e,n){const s=r.field.isKeyField()?_e.comparator(e.key,n.key):(function(u,f,p){const g=f.data.field(u),y=p.data.field(u);return g!==null&&y!==null?Ao(g,y):be(42886)})(r.field,e,n);switch(r.dir){case"asc":return s;case"desc":return-1*s;default:return be(19790,{direction:r.dir})}}class pa{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s!==void 0){for(const[o,u]of s)if(this.equalsFn(o,e))return u}}has(e){return this.get(e)!==void 0}set(e,n){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,n]);o.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[n]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){_s(this.inner,((n,s)=>{for(const[o,u]of s)e(o,u)}))}isEmpty(){return kT(this.inner)}size(){return this.innerSize}}const bN=new dt(_e.comparator);function yr(){return bN}const $T=new dt(_e.comparator);function Ql(...r){let e=$T;for(const n of r)e=e.insert(n.key,n);return e}function WT(r){let e=$T;return r.forEach(((n,s)=>e=e.insert(n,s.overlayedDocument))),e}function Zs(){return tu()}function JT(){return tu()}function tu(){return new pa((r=>r.toString()),((r,e)=>r.isEqual(e)))}const AN=new dt(_e.comparator),SN=new jt(_e.comparator);function Pe(...r){let e=SN;for(const n of r)e=e.add(n);return e}const wN=new jt(Ue);function RN(){return wN}function Zm(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lh(e)?"-0":e}}function ZT(r){return{integerValue:""+r}}function xN(r,e){return W4(e)?ZT(e):Zm(r,e)}class of{constructor(){this._=void 0}}function CN(r,e,n){return r instanceof hu?(function(o,u){const f={fields:{[VT]:{stringValue:MT},[UT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Qm(u)&&(u=rf(u)),u&&(f.fields[LT]=u),{mapValue:f}})(n,e):r instanceof fu?tb(r,e):r instanceof du?nb(r,e):(function(o,u){const f=eb(o,u),p=f1(f)+f1(o.Ae);return lm(f)&&lm(o.Ae)?ZT(p):Zm(o.serializer,p)})(r,e)}function IN(r,e,n){return r instanceof fu?tb(r,e):r instanceof du?nb(r,e):n}function eb(r,e){return r instanceof jh?(function(s){return lm(s)||(function(u){return!!u&&"doubleValue"in u})(s)})(e)?e:{integerValue:0}:null}class hu extends of{}class fu extends of{constructor(e){super(),this.elements=e}}function tb(r,e){const n=ib(e);for(const s of r.elements)n.some((o=>qi(o,s)))||n.push(s);return{arrayValue:{values:n}}}class du extends of{constructor(e){super(),this.elements=e}}function nb(r,e){let n=ib(e);for(const s of r.elements)n=n.filter((o=>!qi(o,s)));return{arrayValue:{values:n}}}class jh extends of{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function f1(r){return bt(r.integerValue||r.doubleValue)}function ib(r){return Xm(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class NN{constructor(e,n){this.field=e,this.transform=n}}function DN(r,e){return r.field.isEqual(e.field)&&(function(s,o){return s instanceof fu&&o instanceof fu||s instanceof du&&o instanceof du?bo(s.elements,o.elements,qi):s instanceof jh&&o instanceof jh?qi(s.Ae,o.Ae):s instanceof hu&&o instanceof hu})(r.transform,e.transform)}class kN{constructor(e,n){this.version=e,this.transformResults=n}}class oi{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new oi}static exists(e){return new oi(void 0,e)}static updateTime(e){return new oi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function wh(r,e){return r.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(r.updateTime):r.exists===void 0||r.exists===e.isFoundDocument()}class lf{}function rb(r,e){if(!r.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return r.isNoDocument()?new ab(r.key,oi.none()):new bu(r.key,r.data,oi.none());{const n=r.data,s=_n.empty();let o=new jt(Jt.comparator);for(let u of e.fields)if(!o.has(u)){let f=n.field(u);f===null&&u.length>1&&(u=u.popLast(),f=n.field(u)),f===null?s.delete(u):s.set(u,f),o=o.add(u)}return new vs(r.key,s,new In(o.toArray()),oi.none())}}function ON(r,e,n){r instanceof bu?(function(o,u,f){const p=o.value.clone(),g=p1(o.fieldTransforms,u,f.transformResults);p.setAll(g),u.convertToFoundDocument(f.version,p).setHasCommittedMutations()})(r,e,n):r instanceof vs?(function(o,u,f){if(!wh(o.precondition,u))return void u.convertToUnknownDocument(f.version);const p=p1(o.fieldTransforms,u,f.transformResults),g=u.data;g.setAll(sb(o)),g.setAll(p),u.convertToFoundDocument(f.version,g).setHasCommittedMutations()})(r,e,n):(function(o,u,f){u.convertToNoDocument(f.version).setHasCommittedMutations()})(0,e,n)}function nu(r,e,n,s){return r instanceof bu?(function(u,f,p,g){if(!wh(u.precondition,f))return p;const y=u.value.clone(),E=m1(u.fieldTransforms,g,f);return y.setAll(E),f.convertToFoundDocument(f.version,y).setHasLocalMutations(),null})(r,e,n,s):r instanceof vs?(function(u,f,p,g){if(!wh(u.precondition,f))return p;const y=m1(u.fieldTransforms,g,f),E=f.data;return E.setAll(sb(u)),E.setAll(y),f.convertToFoundDocument(f.version,E).setHasLocalMutations(),p===null?null:p.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((S=>S.field)))})(r,e,n,s):(function(u,f,p){return wh(u.precondition,f)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):p})(r,e,n)}function MN(r,e){let n=null;for(const s of r.fieldTransforms){const o=e.data.field(s.field),u=eb(s.transform,o||null);u!=null&&(n===null&&(n=_n.empty()),n.set(s.field,u))}return n||null}function d1(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&bo(s,o,((u,f)=>DN(u,f)))})(r.fieldTransforms,e.fieldTransforms)&&(r.type===0?r.value.isEqual(e.value):r.type!==1||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask))}class bu extends lf{constructor(e,n,s,o=[]){super(),this.key=e,this.value=n,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class vs extends lf{constructor(e,n,s,o,u=[]){super(),this.key=e,this.data=n,this.fieldMask=s,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function sb(r){const e=new Map;return r.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const s=r.data.field(n);e.set(n,s)}})),e}function p1(r,e,n){const s=new Map;Qe(r.length===n.length,32656,{Ve:n.length,de:r.length});for(let o=0;o<n.length;o++){const u=r[o],f=u.transform,p=e.data.field(u.field);s.set(u.field,IN(f,p,n[o]))}return s}function m1(r,e,n){const s=new Map;for(const o of r){const u=o.transform,f=n.data.field(o.field);s.set(o.field,CN(u,f,e))}return s}class ab extends lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class VN extends lf{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class LN{constructor(e,n,s,o){this.batchId=e,this.localWriteTime=n,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,n){const s=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&ON(u,e,s[o])}}applyToLocalView(e,n){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(n=nu(s,e,n,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(n=nu(s,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const s=JT();return this.mutations.forEach((o=>{const u=e.get(o.key),f=u.overlayedDocument;let p=this.applyToLocalView(f,u.mutatedFields);p=n.has(o.key)?null:p;const g=rb(f,p);g!==null&&s.set(o.key,g),f.isValidDocument()||f.convertToNoDocument(Ae.min())})),s}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),Pe())}isEqual(e){return this.batchId===e.batchId&&bo(this.mutations,e.mutations,((n,s)=>d1(n,s)))&&bo(this.baseMutations,e.baseMutations,((n,s)=>d1(n,s)))}}class eg{constructor(e,n,s,o){this.batch=e,this.commitVersion=n,this.mutationResults=s,this.docVersions=o}static from(e,n,s){Qe(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return AN})();const u=e.mutations;for(let f=0;f<u.length;f++)o=o.insert(u[f].key,s[f].version);return new eg(e,n,s,o)}}class UN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}class PN{constructor(e,n){this.count=e,this.unchangedNames=n}}var Ot,He;function zN(r){switch(r){case $.OK:return be(64938);case $.CANCELLED:case $.UNKNOWN:case $.DEADLINE_EXCEEDED:case $.RESOURCE_EXHAUSTED:case $.INTERNAL:case $.UNAVAILABLE:case $.UNAUTHENTICATED:return!1;case $.INVALID_ARGUMENT:case $.NOT_FOUND:case $.ALREADY_EXISTS:case $.PERMISSION_DENIED:case $.FAILED_PRECONDITION:case $.ABORTED:case $.OUT_OF_RANGE:case $.UNIMPLEMENTED:case $.DATA_LOSS:return!0;default:return be(15467,{code:r})}}function ob(r){if(r===void 0)return gr("GRPC error has no .code"),$.UNKNOWN;switch(r){case Ot.OK:return $.OK;case Ot.CANCELLED:return $.CANCELLED;case Ot.UNKNOWN:return $.UNKNOWN;case Ot.DEADLINE_EXCEEDED:return $.DEADLINE_EXCEEDED;case Ot.RESOURCE_EXHAUSTED:return $.RESOURCE_EXHAUSTED;case Ot.INTERNAL:return $.INTERNAL;case Ot.UNAVAILABLE:return $.UNAVAILABLE;case Ot.UNAUTHENTICATED:return $.UNAUTHENTICATED;case Ot.INVALID_ARGUMENT:return $.INVALID_ARGUMENT;case Ot.NOT_FOUND:return $.NOT_FOUND;case Ot.ALREADY_EXISTS:return $.ALREADY_EXISTS;case Ot.PERMISSION_DENIED:return $.PERMISSION_DENIED;case Ot.FAILED_PRECONDITION:return $.FAILED_PRECONDITION;case Ot.ABORTED:return $.ABORTED;case Ot.OUT_OF_RANGE:return $.OUT_OF_RANGE;case Ot.UNIMPLEMENTED:return $.UNIMPLEMENTED;case Ot.DATA_LOSS:return $.DATA_LOSS;default:return be(39323,{code:r})}}(He=Ot||(Ot={}))[He.OK=0]="OK",He[He.CANCELLED=1]="CANCELLED",He[He.UNKNOWN=2]="UNKNOWN",He[He.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",He[He.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",He[He.NOT_FOUND=5]="NOT_FOUND",He[He.ALREADY_EXISTS=6]="ALREADY_EXISTS",He[He.PERMISSION_DENIED=7]="PERMISSION_DENIED",He[He.UNAUTHENTICATED=16]="UNAUTHENTICATED",He[He.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",He[He.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",He[He.ABORTED=10]="ABORTED",He[He.OUT_OF_RANGE=11]="OUT_OF_RANGE",He[He.UNIMPLEMENTED=12]="UNIMPLEMENTED",He[He.INTERNAL=13]="INTERNAL",He[He.UNAVAILABLE=14]="UNAVAILABLE",He[He.DATA_LOSS=15]="DATA_LOSS";function jN(){return new TextEncoder}const BN=new os([4294967295,4294967295],0);function g1(r){const e=jN().encode(r),n=new TT;return n.update(e),new Uint8Array(n.digest())}function y1(r){const e=new DataView(r.buffer),n=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new os([n,s],0),new os([o,u],0)]}class tg{constructor(e,n,s){if(this.bitmap=e,this.padding=n,this.hashCount=s,n<0||n>=8)throw new Xl(`Invalid padding: ${n}`);if(s<0)throw new Xl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new Xl(`Invalid hash count: ${s}`);if(e.length===0&&n!==0)throw new Xl(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=os.fromNumber(this.ge)}ye(e,n,s){let o=e.add(n.multiply(os.fromNumber(s)));return o.compare(BN)===1&&(o=new os([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=g1(e),[s,o]=y1(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);if(!this.we(f))return!1}return!0}static create(e,n,s){const o=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),f=new tg(u,o,n);return s.forEach((p=>f.insert(p))),f}insert(e){if(this.ge===0)return;const n=g1(e),[s,o]=y1(n);for(let u=0;u<this.hashCount;u++){const f=this.ye(s,o,u);this.be(f)}}be(e){const n=Math.floor(e/8),s=e%8;this.bitmap[n]|=1<<s}}class Xl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class uf{constructor(e,n,s,o,u){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,n,s){const o=new Map;return o.set(e,Au.createSynthesizedTargetChangeForCurrentChange(e,n,s)),new uf(Ae.min(),o,new dt(Ue),yr(),Pe())}}class Au{constructor(e,n,s,o,u){this.resumeToken=e,this.current=n,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,n,s){return new Au(s,n,Pe(),Pe(),Pe())}}class Rh{constructor(e,n,s,o){this.Se=e,this.removedTargetIds=n,this.key=s,this.De=o}}class lb{constructor(e,n){this.targetId=e,this.Ce=n}}class ub{constructor(e,n,s=Zt.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=n,this.resumeToken=s,this.cause=o}}class _1{constructor(){this.ve=0,this.Fe=v1(),this.Me=Zt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=Pe(),n=Pe(),s=Pe();return this.Fe.forEach(((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:n=n.add(o);break;case 1:s=s.add(o);break;default:be(38017,{changeType:u})}})),new Au(this.Me,this.xe,e,n,s)}Ke(){this.Oe=!1,this.Fe=v1()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Qe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class qN{constructor(e){this.Ge=e,this.ze=new Map,this.je=yr(),this.He=lh(),this.Je=lh(),this.Ze=new dt(Ue)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const s=this.nt(n);switch(e.state){case 0:this.rt(n)&&s.Le(e.resumeToken);break;case 1:s.We(),s.Ne||s.Ke(),s.Le(e.resumeToken);break;case 2:s.We(),s.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(s.Qe(),s.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),s.Le(e.resumeToken));break;default:be(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((s,o)=>{this.rt(o)&&n(o)}))}st(e){const n=e.targetId,s=e.Ce.count,o=this.ot(n);if(o){const u=o.target;if(cm(u))if(s===0){const f=new _e(u.path);this.et(n,f,rn.newNoDocument(f,Ae.min()))}else Qe(s===1,20013,{expectedCount:s});else{const f=this._t(n);if(f!==s){const p=this.ut(e),g=p?this.ct(p,e,f):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,y)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:u=0}=n;let f,p;try{f=fs(s).toUint8Array()}catch(g){if(g instanceof OT)return To("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{p=new tg(f,o,u)}catch(g){return To(g instanceof Xl?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return p.ge===0?null:p}ct(e,n,s){return n.Ce.count===s-this.Pt(e,n.targetId)?0:2}Pt(e,n){const s=this.Ge.getRemoteKeysForTarget(n);let o=0;return s.forEach((u=>{const f=this.Ge.ht(),p=`projects/${f.projectId}/databases/${f.database}/documents/${u.path.canonicalString()}`;e.mightContain(p)||(this.et(n,u,null),o++)})),o}Tt(e){const n=new Map;this.ze.forEach(((u,f)=>{const p=this.ot(f);if(p){if(u.current&&cm(p.target)){const g=new _e(p.target.path);this.It(g).has(f)||this.Et(f,g)||this.et(f,g,rn.newNoDocument(g,e))}u.Be&&(n.set(f,u.ke()),u.Ke())}}));let s=Pe();this.Je.forEach(((u,f)=>{let p=!0;f.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(p=!1,!1)})),p&&(s=s.add(u))})),this.je.forEach(((u,f)=>f.setReadTime(e)));const o=new uf(e,n,this.Ze,this.je,s);return this.je=yr(),this.He=lh(),this.Je=lh(),this.Ze=new dt(Ue),o}Ye(e,n){if(!this.rt(e))return;const s=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,s),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,n)?o.qe(n,1):o.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),s&&(this.je=this.je.insert(n,s))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new _1,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new jt(Ue),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new jt(Ue),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||he("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new _1),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function lh(){return new dt(_e.comparator)}function v1(){return new dt(_e.comparator)}const HN={asc:"ASCENDING",desc:"DESCENDING"},FN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},GN={and:"AND",or:"OR"};class YN{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function dm(r,e){return r.useProto3Json||nf(e)?e:{value:e}}function Bh(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function cb(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function KN(r,e){return Bh(r,e.toTimestamp())}function zi(r){return Qe(!!r,49232),Ae.fromTimestamp((function(n){const s=hs(n);return new ot(s.seconds,s.nanos)})(r))}function ng(r,e){return pm(r,e).canonicalString()}function pm(r,e){const n=(function(o){return new it(["projects",o.projectId,"databases",o.database])})(r).child("documents");return e===void 0?n:n.child(e)}function hb(r){const e=it.fromString(r);return Qe(gb(e),10190,{key:e.toString()}),e}function mm(r,e){return ng(r.databaseId,e.path)}function Lp(r,e){const n=hb(e);if(n.get(1)!==r.databaseId.projectId)throw new ce($.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+r.databaseId.projectId);if(n.get(3)!==r.databaseId.database)throw new ce($.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+r.databaseId.database);return new _e(db(n))}function fb(r,e){return ng(r.databaseId,e)}function QN(r){const e=hb(r);return e.length===4?it.emptyPath():db(e)}function gm(r){return new it(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function db(r){return Qe(r.length>4&&r.get(4)==="documents",29091,{key:r.toString()}),r.popFirst(5)}function E1(r,e,n){return{name:mm(r,e),fields:n.value.mapValue.fields}}function XN(r,e){let n;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:be(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],u=(function(y,E){return y.useProto3Json?(Qe(E===void 0||typeof E=="string",58123),Zt.fromBase64String(E||"")):(Qe(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Zt.fromUint8Array(E||new Uint8Array))})(r,e.targetChange.resumeToken),f=e.targetChange.cause,p=f&&(function(y){const E=y.code===void 0?$.UNKNOWN:ob(y.code);return new ce(E,y.message||"")})(f);n=new ub(s,o,u,p||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=Lp(r,s.document.name),u=zi(s.document.updateTime),f=s.document.createTime?zi(s.document.createTime):Ae.min(),p=new _n({mapValue:{fields:s.document.fields}}),g=rn.newFoundDocument(o,u,f,p),y=s.targetIds||[],E=s.removedTargetIds||[];n=new Rh(y,E,g.key,g)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=Lp(r,s.document),u=s.readTime?zi(s.readTime):Ae.min(),f=rn.newNoDocument(o,u),p=s.removedTargetIds||[];n=new Rh([],p,f.key,f)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=Lp(r,s.document),u=s.removedTargetIds||[];n=new Rh([],u,o,null)}else{if(!("filter"in e))return be(11601,{Vt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:u}=s,f=new PN(o,u),p=s.targetId;n=new lb(p,f)}}return n}function $N(r,e){let n;if(e instanceof bu)n={update:E1(r,e.key,e.value)};else if(e instanceof ab)n={delete:mm(r,e.key)};else if(e instanceof vs)n={update:E1(r,e.key,e.data),updateMask:sD(e.fieldMask)};else{if(!(e instanceof VN))return be(16599,{dt:e.type});n={verify:mm(r,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((s=>(function(u,f){const p=f.transform;if(p instanceof hu)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(p instanceof fu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:p.elements}};if(p instanceof du)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:p.elements}};if(p instanceof jh)return{fieldPath:f.field.canonicalString(),increment:p.Ae};throw be(20930,{transform:f.transform})})(0,s)))),e.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:KN(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:be(27497)})(r,e.precondition)),n}function WN(r,e){return r&&r.length>0?(Qe(e!==void 0,14353),r.map((n=>(function(o,u){let f=o.updateTime?zi(o.updateTime):zi(u);return f.isEqual(Ae.min())&&(f=zi(u)),new kN(f,o.transformResults||[])})(n,e)))):[]}function JN(r,e){return{documents:[fb(r,e.path)]}}function ZN(r,e){const n={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),n.structuredQuery.from=[{collectionId:s.lastSegment()}]),n.parent=fb(r,o);const u=(function(y){if(y.length!==0)return mb(ci.create(y,"and"))})(e.filters);u&&(n.structuredQuery.where=u);const f=(function(y){if(y.length!==0)return y.map((E=>(function(w){return{field:uo(w.field),direction:nD(w.dir)}})(E)))})(e.orderBy);f&&(n.structuredQuery.orderBy=f);const p=dm(r,e.limit);return p!==null&&(n.structuredQuery.limit=p),e.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:n,parent:o}}function eD(r){let e=QN(r.parent);const n=r.structuredQuery,s=n.from?n.from.length:0;let o=null;if(s>0){Qe(s===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:e=e.child(E.collectionId)}let u=[];n.where&&(u=(function(S){const w=pb(S);return w instanceof ci&&HT(w)?w.getFilters():[w]})(n.where));let f=[];n.orderBy&&(f=(function(S){return S.map((w=>(function(K){return new cu(co(K.field),(function(Z){switch(Z){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(K.direction))})(w)))})(n.orderBy));let p=null;n.limit&&(p=(function(S){let w;return w=typeof S=="object"?S.value:S,nf(w)?null:w})(n.limit));let g=null;n.startAt&&(g=(function(S){const w=!!S.before,P=S.values||[];return new zh(P,w)})(n.startAt));let y=null;return n.endAt&&(y=(function(S){const w=!S.before,P=S.values||[];return new zh(P,w)})(n.endAt)),gN(e,o,f,u,p,"F",g,y)}function tD(r,e){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return be(28987,{purpose:o})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function pb(r){return r.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const s=co(n.unaryFilter.field);return Mt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=co(n.unaryFilter.field);return Mt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=co(n.unaryFilter.field);return Mt.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=co(n.unaryFilter.field);return Mt.create(f,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return be(61313);default:return be(60726)}})(r):r.fieldFilter!==void 0?(function(n){return Mt.create(co(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return be(58110);default:return be(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(r):r.compositeFilter!==void 0?(function(n){return ci.create(n.compositeFilter.filters.map((s=>pb(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return be(1026)}})(n.compositeFilter.op))})(r):be(30097,{filter:r})}function nD(r){return HN[r]}function iD(r){return FN[r]}function rD(r){return GN[r]}function uo(r){return{fieldPath:r.canonicalString()}}function co(r){return Jt.fromServerFormat(r.fieldPath)}function mb(r){return r instanceof Mt?(function(n){if(n.op==="=="){if(o1(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NAN"}};if(a1(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(o1(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NAN"}};if(a1(n.value))return{unaryFilter:{field:uo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:uo(n.field),op:iD(n.op),value:n.value}}})(r):r instanceof ci?(function(n){const s=n.getFilters().map((o=>mb(o)));return s.length===1?s[0]:{compositeFilter:{op:rD(n.op),filters:s}}})(r):be(54877,{filter:r})}function sD(r){const e=[];return r.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function gb(r){return r.length>=4&&r.get(0)==="projects"&&r.get(2)==="databases"}function yb(r){return!!r&&typeof r._toProto=="function"&&r._protoValueType==="ProtoValue"}class is{constructor(e,n,s,o,u=Ae.min(),f=Ae.min(),p=Zt.EMPTY_BYTE_STRING,g=null){this.target=e,this.targetId=n,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=f,this.resumeToken=p,this.expectedCount=g}withSequenceNumber(e){return new is(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new is(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class aD{constructor(e){this.yt=e}}function oD(r){const e=eD({parent:r.parent,structuredQuery:r.structuredQuery});return r.limitType==="LAST"?fm(e,e.limit,"L"):e}class lD{constructor(){this.Sn=new uD}addToCollectionParentIndex(e,n){return this.Sn.add(n),W.resolve()}getCollectionParents(e,n){return W.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return W.resolve()}deleteFieldIndex(e,n){return W.resolve()}deleteAllFieldIndexes(e){return W.resolve()}createTargetIndexes(e,n){return W.resolve()}getDocumentsMatchingTarget(e,n){return W.resolve(null)}getIndexType(e,n){return W.resolve(0)}getFieldIndexes(e,n){return W.resolve([])}getNextCollectionGroupToUpdate(e){return W.resolve(null)}getMinOffset(e,n){return W.resolve(cs.min())}getMinOffsetFromCollectionGroup(e,n){return W.resolve(cs.min())}updateCollectionGroup(e,n,s){return W.resolve()}updateIndexEntries(e,n){return W.resolve()}}class uD{constructor(){this.index={}}add(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n]||new jt(it.comparator),u=!o.has(s);return this.index[n]=o.add(s),u}has(e){const n=e.lastSegment(),s=e.popLast(),o=this.index[n];return o&&o.has(s)}getEntries(e){return(this.index[e]||new jt(it.comparator)).toArray()}}const T1={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},_b=41943040;class yn{static withCacheSize(e){return new yn(e,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=s}}yn.DEFAULT_COLLECTION_PERCENTILE=10,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,yn.DEFAULT=new yn(_b,yn.DEFAULT_COLLECTION_PERCENTILE,yn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),yn.DISABLED=new yn(-1,0,0);class wo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new wo(0)}static ar(){return new wo(-1)}}const b1="LruGarbageCollector",cD=1048576;function A1([r,e],[n,s]){const o=Ue(r,n);return o===0?Ue(e,s):o}class hD{constructor(e){this.Pr=e,this.buffer=new jt(A1),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const s=this.buffer.last();A1(n,s)<0&&(this.buffer=this.buffer.delete(s).add(n))}}get maxValue(){return this.buffer.last()[0]}}class fD{constructor(e,n,s){this.garbageCollector=e,this.asyncQueue=n,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){he(b1,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ko(n)?he(b1,"Ignoring IndexedDB error during garbage collection: ",n):await Do(n)}await this.Ar(3e5)}))}}class dD{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((s=>Math.floor(n/100*s)))}nthSequenceNumber(e,n){if(n===0)return W.resolve(tf.ce);const s=new hD(n);return this.Vr.forEachTarget(e,(o=>s.Er(o.sequenceNumber))).next((()=>this.Vr.mr(e,(o=>s.Er(o))))).next((()=>s.maxValue))}removeTargets(e,n,s){return this.Vr.removeTargets(e,n,s)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(he("LruGarbageCollector","Garbage collection skipped; disabled"),W.resolve(T1)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(he("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),T1):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let s,o,u,f,p,g,y;const E=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((S=>(S>this.params.maximumSequenceNumbersToCollect?(he("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),o=this.params.maximumSequenceNumbersToCollect):o=S,f=Date.now(),this.nthSequenceNumber(e,o)))).next((S=>(s=S,p=Date.now(),this.removeTargets(e,s,n)))).next((S=>(u=S,g=Date.now(),this.removeOrphanedDocuments(e,s)))).next((S=>(y=Date.now(),oo()<=Le.DEBUG&&he("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${f-E}ms
	Determined least recently used ${o} in `+(p-f)+`ms
	Removed ${u} targets in `+(g-p)+`ms
	Removed ${S} documents in `+(y-g)+`ms
Total Duration: ${y-E}ms`),W.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:S}))))}}function pD(r,e){return new dD(r,e)}class mD{constructor(){this.changes=new pa((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,rn.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const s=this.changes.get(n);return s!==void 0?W.resolve(s):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class gD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}class yD{constructor(e,n,s,o){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,n){let s=null;return this.documentOverlayCache.getOverlay(e,n).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,n)))).next((o=>(s!==null&&nu(s.mutation,o,In.empty(),ot.now()),o)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.getLocalViewOfDocuments(e,s,Pe()).next((()=>s))))}getLocalViewOfDocuments(e,n,s=Pe()){const o=Zs();return this.populateOverlays(e,o,n).next((()=>this.computeViews(e,n,o,s).next((u=>{let f=Ql();return u.forEach(((p,g)=>{f=f.insert(p,g.overlayedDocument)})),f}))))}getOverlayedDocuments(e,n){const s=Zs();return this.populateOverlays(e,s,n).next((()=>this.computeViews(e,n,s,Pe())))}populateOverlays(e,n,s){const o=[];return s.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(e,o).next((u=>{u.forEach(((f,p)=>{n.set(f,p)}))}))}computeViews(e,n,s,o){let u=yr();const f=tu(),p=(function(){return tu()})();return n.forEach(((g,y)=>{const E=s.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof vs)?u=u.insert(y.key,y):E!==void 0?(f.set(y.key,E.mutation.getFieldMask()),nu(E.mutation,y,E.mutation.getFieldMask(),ot.now())):f.set(y.key,In.empty())})),this.recalculateAndSaveOverlays(e,u).next((g=>(g.forEach(((y,E)=>f.set(y,E))),n.forEach(((y,E)=>p.set(y,new gD(E,f.get(y)??null)))),p)))}recalculateAndSaveOverlays(e,n){const s=tu();let o=new dt(((f,p)=>f-p)),u=Pe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((f=>{for(const p of f)p.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let E=s.get(g)||In.empty();E=p.applyToLocalView(y,E),s.set(g,E);const S=(o.get(p.batchId)||Pe()).add(g);o=o.insert(p.batchId,S)}))})).next((()=>{const f=[],p=o.getReverseIterator();for(;p.hasNext();){const g=p.getNext(),y=g.key,E=g.value,S=JT();E.forEach((w=>{if(!u.has(w)){const P=rb(n.get(w),s.get(w));P!==null&&S.set(w,P),u=u.add(w)}})),f.push(this.documentOverlayCache.saveOverlays(e,y,S))}return W.waitFor(f)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,n,s,o){return yN(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):KT(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,s,o):this.getDocumentsMatchingCollectionQuery(e,n,s,o)}getNextDocuments(e,n,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,s,o).next((u=>{const f=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,s.largestBatchId,o-u.size):W.resolve(Zs());let p=au,g=u;return f.next((y=>W.forEach(y,((E,S)=>(p<S.largestBatchId&&(p=S.largestBatchId),u.get(E)?W.resolve():this.remoteDocumentCache.getEntry(e,E).next((w=>{g=g.insert(E,w)}))))).next((()=>this.populateOverlays(e,y,u))).next((()=>this.computeViews(e,g,y,Pe()))).next((E=>({batchId:p,changes:WT(E)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new _e(n)).next((s=>{let o=Ql();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,n,s,o){const u=n.collectionGroup;let f=Ql();return this.indexManager.getCollectionParents(e,u).next((p=>W.forEach(p,(g=>{const y=(function(S,w){return new Oo(w,null,S.explicitOrderBy.slice(),S.filters.slice(),S.limit,S.limitType,S.startAt,S.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((E=>{E.forEach(((S,w)=>{f=f.insert(S,w)}))}))})).next((()=>f))))}getDocumentsMatchingCollectionQuery(e,n,s,o){let u;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,s.largestBatchId).next((f=>(u=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,s,u,o)))).next((f=>{u.forEach(((g,y)=>{const E=y.getKey();f.get(E)===null&&(f=f.insert(E,rn.newInvalidDocument(E)))}));let p=Ql();return f.forEach(((g,y)=>{const E=u.get(g);E!==void 0&&nu(E.mutation,y,In.empty(),ot.now()),af(n,y)&&(p=p.insert(g,y))})),p}))}}class _D{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return W.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:zi(o.createTime)}})(n)),W.resolve()}getNamedQuery(e,n){return W.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(o){return{name:o.name,query:oD(o.bundledQuery),readTime:zi(o.readTime)}})(n)),W.resolve()}}class vD{constructor(){this.overlays=new dt(_e.comparator),this.Lr=new Map}getOverlay(e,n){return W.resolve(this.overlays.get(n))}getOverlays(e,n){const s=Zs();return W.forEach(n,(o=>this.getOverlay(e,o).next((u=>{u!==null&&s.set(o,u)})))).next((()=>s))}saveOverlays(e,n,s){return s.forEach(((o,u)=>{this.bt(e,n,u)})),W.resolve()}removeOverlaysForBatchId(e,n,s){const o=this.Lr.get(s);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.Lr.delete(s)),W.resolve()}getOverlaysForCollection(e,n,s){const o=Zs(),u=n.length+1,f=new _e(n.child("")),p=this.overlays.getIteratorFrom(f);for(;p.hasNext();){const g=p.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>s&&o.set(g.getKey(),g)}return W.resolve(o)}getOverlaysForCollectionGroup(e,n,s,o){let u=new dt(((y,E)=>y-E));const f=this.overlays.getIterator();for(;f.hasNext();){const y=f.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>s){let E=u.get(y.largestBatchId);E===null&&(E=Zs(),u=u.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const p=Zs(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,E)=>p.set(y,E))),!(p.size()>=o)););return W.resolve(p)}bt(e,n,s){const o=this.overlays.get(s.key);if(o!==null){const f=this.Lr.get(o.largestBatchId).delete(s.key);this.Lr.set(o.largestBatchId,f)}this.overlays=this.overlays.insert(s.key,new UN(n,s));let u=this.Lr.get(n);u===void 0&&(u=Pe(),this.Lr.set(n,u)),this.Lr.set(n,u.add(s.key))}}class ED{constructor(){this.sessionToken=Zt.EMPTY_BYTE_STRING}getSessionToken(e){return W.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,W.resolve()}}class ig{constructor(){this.kr=new jt(Ft.Kr),this.qr=new jt(Ft.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const s=new Ft(e,n);this.kr=this.kr.add(s),this.qr=this.qr.add(s)}$r(e,n){e.forEach((s=>this.addReference(s,n)))}removeReference(e,n){this.Wr(new Ft(e,n))}Qr(e,n){e.forEach((s=>this.removeReference(s,n)))}Gr(e){const n=new _e(new it([])),s=new Ft(n,e),o=new Ft(n,e+1),u=[];return this.qr.forEachInRange([s,o],(f=>{this.Wr(f),u.push(f.key)})),u}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new _e(new it([])),s=new Ft(n,e),o=new Ft(n,e+1);let u=Pe();return this.qr.forEachInRange([s,o],(f=>{u=u.add(f.key)})),u}containsKey(e){const n=new Ft(e,0),s=this.kr.firstAfterOrEqual(n);return s!==null&&e.isEqual(s.key)}}class Ft{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return _e.comparator(e.key,n.key)||Ue(e.Hr,n.Hr)}static Ur(e,n){return Ue(e.Hr,n.Hr)||_e.comparator(e.key,n.key)}}class TD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new jt(Ft.Kr)}checkEmpty(e){return W.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,s,o){const u=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const f=new LN(u,n,s,o);this.mutationQueue.push(f);for(const p of o)this.Jr=this.Jr.add(new Ft(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return W.resolve(f)}lookupMutationBatch(e,n){return W.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const s=n+1,o=this.Xr(s),u=o<0?0:o;return W.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return W.resolve(this.mutationQueue.length===0?Km:this.Yn-1)}getAllMutationBatches(e){return W.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const s=new Ft(n,0),o=new Ft(n,Number.POSITIVE_INFINITY),u=[];return this.Jr.forEachInRange([s,o],(f=>{const p=this.Zr(f.Hr);u.push(p)})),W.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,n){let s=new jt(Ue);return n.forEach((o=>{const u=new Ft(o,0),f=new Ft(o,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([u,f],(p=>{s=s.add(p.Hr)}))})),W.resolve(this.Yr(s))}getAllMutationBatchesAffectingQuery(e,n){const s=n.path,o=s.length+1;let u=s;_e.isDocumentKey(u)||(u=u.child(""));const f=new Ft(new _e(u),0);let p=new jt(Ue);return this.Jr.forEachWhile((g=>{const y=g.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(p=p.add(g.Hr)),!0)}),f),W.resolve(this.Yr(p))}Yr(e){const n=[];return e.forEach((s=>{const o=this.Zr(s);o!==null&&n.push(o)})),n}removeMutationBatch(e,n){Qe(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Jr;return W.forEach(n.mutations,(o=>{const u=new Ft(o.key,n.batchId);return s=s.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Jr=s}))}nr(e){}containsKey(e,n){const s=new Ft(n,0),o=this.Jr.firstAfterOrEqual(s);return W.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,W.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}class bD{constructor(e){this.ti=e,this.docs=(function(){return new dt(_e.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const s=n.key,o=this.docs.get(s),u=o?o.size:0,f=this.ti(n);return this.docs=this.docs.insert(s,{document:n.mutableCopy(),size:f}),this.size+=f-u,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const s=this.docs.get(n);return W.resolve(s?s.document.mutableCopy():rn.newInvalidDocument(n))}getEntries(e,n){let s=yr();return n.forEach((o=>{const u=this.docs.get(o);s=s.insert(o,u?u.document.mutableCopy():rn.newInvalidDocument(o))})),W.resolve(s)}getDocumentsMatchingQuery(e,n,s,o){let u=yr();const f=n.path,p=new _e(f.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(p);for(;g.hasNext();){const{key:y,value:{document:E}}=g.getNext();if(!f.isPrefixOf(y.path))break;y.path.length>f.length+1||K4(Y4(E),s)<=0||(o.has(E.key)||af(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return W.resolve(u)}getAllFromCollectionGroup(e,n,s,o){be(9500)}ni(e,n){return W.forEach(this.docs,(s=>n(s)))}newChangeBuffer(e){return new AD(this)}getSize(e){return W.resolve(this.size)}}class AD extends mD{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?n.push(this.Mr.addEntry(e,o)):this.Mr.removeEntry(s)})),W.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}class SD{constructor(e){this.persistence=e,this.ri=new pa((n=>$m(n)),Wm),this.lastRemoteSnapshotVersion=Ae.min(),this.highestTargetId=0,this.ii=0,this.si=new ig,this.targetCount=0,this.oi=wo._r()}forEachTarget(e,n){return this.ri.forEach(((s,o)=>n(o))),W.resolve()}getLastRemoteSnapshotVersion(e){return W.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return W.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),W.resolve(this.highestTargetId)}setTargetsMetadata(e,n,s){return s&&(this.lastRemoteSnapshotVersion=s),n>this.ii&&(this.ii=n),W.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new wo(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,W.resolve()}updateTargetData(e,n){return this.lr(n),W.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,W.resolve()}removeTargets(e,n,s){let o=0;const u=[];return this.ri.forEach(((f,p)=>{p.sequenceNumber<=n&&s.get(p.targetId)===null&&(this.ri.delete(f),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),o++)})),W.waitFor(u).next((()=>o))}getTargetCount(e){return W.resolve(this.targetCount)}getTargetData(e,n){const s=this.ri.get(n)||null;return W.resolve(s)}addMatchingKeys(e,n,s){return this.si.$r(n,s),W.resolve()}removeMatchingKeys(e,n,s){this.si.Qr(n,s);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((f=>{u.push(o.markPotentiallyOrphaned(e,f))})),W.waitFor(u)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),W.resolve()}getMatchingKeysForTargetId(e,n){const s=this.si.jr(n);return W.resolve(s)}containsKey(e,n){return W.resolve(this.si.containsKey(n))}}class vb{constructor(e,n){this._i={},this.overlays={},this.ai=new tf(0),this.ui=!1,this.ui=!0,this.ci=new ED,this.referenceDelegate=e(this),this.li=new SD(this),this.indexManager=new lD,this.remoteDocumentCache=(function(o){return new bD(o)})((s=>this.referenceDelegate.hi(s))),this.serializer=new aD(n),this.Pi=new _D(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new vD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let s=this._i[e.toKey()];return s||(s=new TD(n,this.referenceDelegate),this._i[e.toKey()]=s),s}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,s){he("MemoryPersistence","Starting transaction:",e);const o=new wD(this.ai.next());return this.referenceDelegate.Ti(),s(o).next((u=>this.referenceDelegate.Ii(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ei(e,n){return W.or(Object.values(this._i).map((s=>()=>s.containsKey(e,n))))}}class wD extends X4{constructor(e){super(),this.currentSequenceNumber=e}}class rg{constructor(e){this.persistence=e,this.Ri=new ig,this.Ai=null}static Vi(e){return new rg(e)}get di(){if(this.Ai)return this.Ai;throw be(60996)}addReference(e,n,s){return this.Ri.addReference(s,n),this.di.delete(s.toString()),W.resolve()}removeReference(e,n,s){return this.Ri.removeReference(s,n),this.di.add(s.toString()),W.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),W.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((o=>this.di.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,n.targetId).next((o=>{o.forEach((u=>this.di.add(u.toString())))})).next((()=>s.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return W.forEach(this.di,(s=>{const o=_e.fromPath(s);return this.mi(e,o).next((u=>{u||n.removeEntry(o,Ae.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((s=>{s?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return W.or([()=>W.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class qh{constructor(e,n){this.persistence=e,this.fi=new pa((s=>J4(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=pD(this,n)}static Vi(e,n){return new qh(e,n)}Ti(){}Ii(e){return W.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>n.next((o=>s+o))))}pr(e){let n=0;return this.mr(e,(s=>{n++})).next((()=>n))}mr(e,n){return W.forEach(this.fi,((s,o)=>this.wr(e,s,o).next((u=>u?W.resolve():n(o)))))}removeTargets(e,n,s){return this.persistence.getTargetCache().removeTargets(e,n,s)}removeOrphanedDocuments(e,n){let s=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ni(e,(f=>this.wr(e,f,n).next((p=>{p||(s++,u.removeEntry(f,Ae.min()))})))).next((()=>u.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),W.resolve()}removeTarget(e,n){const s=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),W.resolve()}removeReference(e,n,s){return this.fi.set(s,e.currentSequenceNumber),W.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),W.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Ah(e.data.value)),n}wr(e,n,s){return W.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const o=this.fi.get(n);return W.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class sg{constructor(e,n,s,o){this.targetId=e,this.fromCache=n,this.Ts=s,this.Is=o}static Es(e,n){let s=Pe(),o=Pe();for(const u of n.docChanges)switch(u.type){case 0:s=s.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new sg(e,n.fromCache,s,o)}}class RD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class xD{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return QR()?8:$4(sn())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,s,o){const u={result:null};return this.gs(e,n).next((f=>{u.result=f})).next((()=>{if(!u.result)return this.ps(e,n,o,s).next((f=>{u.result=f}))})).next((()=>{if(u.result)return;const f=new RD;return this.ys(e,n,f).next((p=>{if(u.result=p,this.As)return this.ws(e,n,f,p.size)}))})).next((()=>u.result))}ws(e,n,s,o){return s.documentReadCount<this.Vs?(oo()<=Le.DEBUG&&he("QueryEngine","SDK will not create cache indexes for query:",lo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),W.resolve()):(oo()<=Le.DEBUG&&he("QueryEngine","Query:",lo(n),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.ds*o?(oo()<=Le.DEBUG&&he("QueryEngine","The SDK decides to create cache indexes for query:",lo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pi(n))):W.resolve())}gs(e,n){if(h1(n))return W.resolve(null);let s=Pi(n);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=fm(n,null,"F"),s=Pi(n)),this.indexManager.getDocumentsMatchingTarget(e,s).next((u=>{const f=Pe(...u);return this.fs.getDocuments(e,f).next((p=>this.indexManager.getMinOffset(e,s).next((g=>{const y=this.bs(n,p);return this.Ss(n,y,f,g.readTime)?this.gs(e,fm(n,null,"F")):this.Ds(e,y,n,g)}))))})))))}ps(e,n,s,o){return h1(n)||o.isEqual(Ae.min())?W.resolve(null):this.fs.getDocuments(e,s).next((u=>{const f=this.bs(n,u);return this.Ss(n,f,s,o)?W.resolve(null):(oo()<=Le.DEBUG&&he("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),lo(n)),this.Ds(e,f,n,G4(o,au)).next((p=>p)))}))}bs(e,n){let s=new jt(XT(e));return n.forEach(((o,u)=>{af(e,u)&&(s=s.add(u))})),s}Ss(e,n,s,o){if(e.limit===null)return!1;if(s.size!==n.size)return!0;const u=e.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}ys(e,n,s){return oo()<=Le.DEBUG&&he("QueryEngine","Using full collection scan to execute query:",lo(n)),this.fs.getDocumentsMatchingQuery(e,n,cs.min(),s)}Ds(e,n,s,o){return this.fs.getDocumentsMatchingQuery(e,s,o).next((u=>(n.forEach((f=>{u=u.insert(f.key,f)})),u)))}}const ag="LocalStore",CD=3e8;class ID{constructor(e,n,s,o){this.persistence=e,this.Cs=n,this.serializer=o,this.vs=new dt(Ue),this.Fs=new pa((u=>$m(u)),Wm),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(s)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new yD(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function ND(r,e,n,s){return new ID(r,e,n,s)}async function Eb(r,e){const n=Re(r);return await n.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return n.mutationQueue.getAllMutationBatches(s).next((u=>(o=u,n.Os(e),n.mutationQueue.getAllMutationBatches(s)))).next((u=>{const f=[],p=[];let g=Pe();for(const y of o){f.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}for(const y of u){p.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}return n.localDocuments.getDocuments(s,g).next((y=>({Ns:y,removedBatchIds:f,addedBatchIds:p})))}))}))}function DD(r,e){const n=Re(r);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),u=n.xs.newChangeBuffer({trackRemovals:!0});return(function(p,g,y,E){const S=y.batch,w=S.keys();let P=W.resolve();return w.forEach((K=>{P=P.next((()=>E.getEntry(g,K))).next((J=>{const Z=y.docVersions.get(K);Qe(Z!==null,48541),J.version.compareTo(Z)<0&&(S.applyToRemoteDocument(J,y),J.isValidDocument()&&(J.setReadTime(y.commitVersion),E.addEntry(J)))}))})),P.next((()=>p.mutationQueue.removeMutationBatch(g,S)))})(n,s,e,u).next((()=>u.apply(s))).next((()=>n.mutationQueue.performConsistencyCheck(s))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(p){let g=Pe();for(let y=0;y<p.mutationResults.length;++y)p.mutationResults[y].transformResults.length>0&&(g=g.add(p.batch.mutations[y].key));return g})(e)))).next((()=>n.localDocuments.getDocuments(s,o)))}))}function Tb(r){const e=Re(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function kD(r,e){const n=Re(r),s=e.snapshotVersion;let o=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const f=n.xs.newChangeBuffer({trackRemovals:!0});o=n.vs;const p=[];e.targetChanges.forEach(((E,S)=>{const w=o.get(S);if(!w)return;p.push(n.li.removeMatchingKeys(u,E.removedDocuments,S).next((()=>n.li.addMatchingKeys(u,E.addedDocuments,S))));let P=w.withSequenceNumber(u.currentSequenceNumber);e.targetMismatches.get(S)!==null?P=P.withResumeToken(Zt.EMPTY_BYTE_STRING,Ae.min()).withLastLimboFreeSnapshotVersion(Ae.min()):E.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(E.resumeToken,s)),o=o.insert(S,P),(function(J,Z,oe){return J.resumeToken.approximateByteSize()===0||Z.snapshotVersion.toMicroseconds()-J.snapshotVersion.toMicroseconds()>=CD?!0:oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0})(w,P,E)&&p.push(n.li.updateTargetData(u,P))}));let g=yr(),y=Pe();if(e.documentUpdates.forEach((E=>{e.resolvedLimboDocuments.has(E)&&p.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),p.push(OD(u,f,e.documentUpdates).next((E=>{g=E.Bs,y=E.Ls}))),!s.isEqual(Ae.min())){const E=n.li.getLastRemoteSnapshotVersion(u).next((S=>n.li.setTargetsMetadata(u,u.currentSequenceNumber,s)));p.push(E)}return W.waitFor(p).next((()=>f.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.vs=o,u)))}function OD(r,e,n){let s=Pe(),o=Pe();return n.forEach((u=>s=s.add(u))),e.getEntries(r,s).next((u=>{let f=yr();return n.forEach(((p,g)=>{const y=u.get(p);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(p)),g.isNoDocument()&&g.version.isEqual(Ae.min())?(e.removeEntry(p,g.readTime),f=f.insert(p,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(g),f=f.insert(p,g)):he(ag,"Ignoring outdated watch update for ",p,". Current version:",y.version," Watch version:",g.version)})),{Bs:f,Ls:o}}))}function MD(r,e){const n=Re(r);return n.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Km),n.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function VD(r,e){const n=Re(r);return n.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return n.li.getTargetData(s,e).next((u=>u?(o=u,W.resolve(o)):n.li.allocateTargetId(s).next((f=>(o=new is(e,f,"TargetPurposeListen",s.currentSequenceNumber),n.li.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=n.vs.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.vs=n.vs.insert(s.targetId,s),n.Fs.set(e,s.targetId)),s}))}async function ym(r,e,n){const s=Re(r),o=s.vs.get(e),u=n?"readwrite":"readwrite-primary";try{n||await s.persistence.runTransaction("Release target",u,(f=>s.persistence.referenceDelegate.removeTarget(f,o)))}catch(f){if(!ko(f))throw f;he(ag,`Failed to update sequence numbers for target ${e}: ${f}`)}s.vs=s.vs.remove(e),s.Fs.delete(o.target)}function S1(r,e,n){const s=Re(r);let o=Ae.min(),u=Pe();return s.persistence.runTransaction("Execute query","readwrite",(f=>(function(g,y,E){const S=Re(g),w=S.Fs.get(E);return w!==void 0?W.resolve(S.vs.get(w)):S.li.getTargetData(y,E)})(s,f,Pi(e)).next((p=>{if(p)return o=p.lastLimboFreeSnapshotVersion,s.li.getMatchingKeysForTargetId(f,p.targetId).next((g=>{u=g}))})).next((()=>s.Cs.getDocumentsMatchingQuery(f,e,n?o:Ae.min(),n?u:Pe()))).next((p=>(LD(s,EN(e),p),{documents:p,ks:u})))))}function LD(r,e,n){let s=r.Ms.get(e)||Ae.min();n.forEach(((o,u)=>{u.readTime.compareTo(s)>0&&(s=u.readTime)})),r.Ms.set(e,s)}class w1{constructor(){this.activeTargetIds=RN()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class UD{constructor(){this.vo=new w1,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,s){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,s){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new w1,Promise.resolve()}handleUserChange(e,n,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class PD{Mo(e){}shutdown(){}}const R1="ConnectivityMonitor";class x1{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){he(R1,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){he(R1,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}let uh=null;function _m(){return uh===null?uh=(function(){return 268435456+Math.round(2147483648*Math.random())})():uh++,"0x"+uh.toString(16)}const Up="RestConnection",zD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class jD{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${s}/databases/${o}`,this.$o=this.databaseId.database===Uh?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Wo(e,n,s,o,u){const f=_m(),p=this.Qo(e,n.toUriEncodedString());he(Up,`Sending RPC '${e}' ${f}:`,p,s);const g={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(g,o,u);const{host:y}=new URL(p),E=gs(y);return this.zo(e,p,g,s,E).then((S=>(he(Up,`Received RPC '${e}' ${f}: `,S),S)),(S=>{throw To(Up,`RPC '${e}' ${f} failed with error: `,S,"url: ",p,"request:",s),S}))}jo(e,n,s,o,u,f){return this.Wo(e,n,s,o,u)}Go(e,n,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+No})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>e[u]=o)),s&&s.headers.forEach(((o,u)=>e[u]=o))}Qo(e,n){const s=zD[e];let o=`${this.qo}/v1/${n}:${s}`;return this.databaseInfo.apiKey&&(o=`${o}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),o}terminate(){}}class BD{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}const tn="WebChannelConnection",ql=(r,e,n)=>{r.listen(e,(s=>{try{n(s)}catch(o){setTimeout((()=>{throw o}),0)}}))};class _o extends jD{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!_o.c_){const e=wT();ql(e,ST.STAT_EVENT,(n=>{n.stat===sm.PROXY?he(tn,"STAT_EVENT: detected buffering proxy"):n.stat===sm.NOPROXY&&he(tn,"STAT_EVENT: detected no buffering proxy")})),_o.c_=!0}}zo(e,n,s,o,u){const f=_m();return new Promise(((p,g)=>{const y=new bT;y.setWithCredentials(!0),y.listenOnce(AT.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case bh.NO_ERROR:const S=y.getResponseJson();he(tn,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(S)),p(S);break;case bh.TIMEOUT:he(tn,`RPC '${e}' ${f} timed out`),g(new ce($.DEADLINE_EXCEEDED,"Request time out"));break;case bh.HTTP_ERROR:const w=y.getStatus();if(he(tn,`RPC '${e}' ${f} failed with status:`,w,"response text:",y.getResponseText()),w>0){let P=y.getResponseJson();Array.isArray(P)&&(P=P[0]);const K=P?.error;if(K&&K.status&&K.message){const J=(function(oe){const le=oe.toLowerCase().replace(/_/g,"-");return Object.values($).indexOf(le)>=0?le:$.UNKNOWN})(K.status);g(new ce(J,K.message))}else g(new ce($.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new ce($.UNAVAILABLE,"Connection failed."));break;default:be(9055,{l_:e,streamId:f,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{he(tn,`RPC '${e}' ${f} completed.`)}}));const E=JSON.stringify(o);he(tn,`RPC '${e}' ${f} sending request:`,o),y.send(n,"POST",E,s,15)}))}T_(e,n,s){const o=_m(),u=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],f=this.createWebChannelTransport(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&(p.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Go(p.initMessageHeaders,n,s),p.encodeInitMessageHeaders=!0;const y=u.join("");he(tn,`Creating RPC '${e}' stream ${o}: ${y}`,p);const E=f.createWebChannel(y,p);this.I_(E);let S=!1,w=!1;const P=new BD({Ho:K=>{w?he(tn,`Not sending because RPC '${e}' stream ${o} is closed:`,K):(S||(he(tn,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),he(tn,`RPC '${e}' stream ${o} sending:`,K),E.send(K))},Jo:()=>E.close()});return ql(E,Kl.EventType.OPEN,(()=>{w||(he(tn,`RPC '${e}' stream ${o} transport opened.`),P.i_())})),ql(E,Kl.EventType.CLOSE,(()=>{w||(w=!0,he(tn,`RPC '${e}' stream ${o} transport closed`),P.o_(),this.E_(E))})),ql(E,Kl.EventType.ERROR,(K=>{w||(w=!0,To(tn,`RPC '${e}' stream ${o} transport errored. Name:`,K.name,"Message:",K.message),P.o_(new ce($.UNAVAILABLE,"The operation could not be completed")))})),ql(E,Kl.EventType.MESSAGE,(K=>{if(!w){const J=K.data[0];Qe(!!J,16349);const Z=J,oe=Z?.error||Z[0]?.error;if(oe){he(tn,`RPC '${e}' stream ${o} received error:`,oe);const le=oe.status;let se=(function(me){const N=Ot[me];if(N!==void 0)return ob(N)})(le),pe=oe.message;se===void 0&&(se=$.INTERNAL,pe="Unknown error status: "+le+" with message "+oe.message),w=!0,P.o_(new ce(se,pe)),E.close()}else he(tn,`RPC '${e}' stream ${o} received:`,J),P.__(J)}})),_o.u_(),setTimeout((()=>{P.s_()}),0),P}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,s){super.Go(e,n,s),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return RT()}}function qD(r){return new _o(r)}function Pp(){return typeof document<"u"?document:null}function cf(r){return new YN(r,!0)}_o.c_=!1;class bb{constructor(e,n,s=1e3,o=1.5,u=6e4){this.Ci=e,this.timerId=n,this.R_=s,this.A_=o,this.V_=u,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-s);o>0&&he("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${s} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}const C1="PersistentStream";class Ab{constructor(e,n,s,o,u,f,p,g){this.Ci=e,this.b_=s,this.S_=o,this.connection=u,this.authCredentialsProvider=f,this.appCheckCredentialsProvider=p,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new bb(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===$.RESOURCE_EXHAUSTED?(gr(n.toString()),gr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===$.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===n&&this.G_(s,o)}),(s=>{e((()=>{const o=new ce($.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,n){const s=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{s((()=>this.listener.Zo()))})),this.stream.Yo((()=>{s((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.H_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return he(C1,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(he(C1,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class HD extends Ab{constructor(e,n,s,o,u,f){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=XN(this.serializer,e),s=(function(u){if(!("targetChange"in u))return Ae.min();const f=u.targetChange;return f.targetIds&&f.targetIds.length?Ae.min():f.readTime?zi(f.readTime):Ae.min()})(e);return this.listener.J_(n,s)}Z_(e){const n={};n.database=gm(this.serializer),n.addTarget=(function(u,f){let p;const g=f.target;if(p=cm(g)?{documents:JN(u,g)}:{query:ZN(u,g).ft},p.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){p.resumeToken=cb(u,f.resumeToken);const y=dm(u,f.expectedCount);y!==null&&(p.expectedCount=y)}else if(f.snapshotVersion.compareTo(Ae.min())>0){p.readTime=Bh(u,f.snapshotVersion.toTimestamp());const y=dm(u,f.expectedCount);y!==null&&(p.expectedCount=y)}return p})(this.serializer,e);const s=tD(this.serializer,e);s&&(n.labels=s),this.K_(n)}X_(e){const n={};n.database=gm(this.serializer),n.removeTarget=e,this.K_(n)}}class FD extends Ab{constructor(e,n,s,o,u,f){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,s,o,f),this.serializer=u}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Qe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Qe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Qe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=WN(e.writeResults,e.commitTime),s=zi(e.commitTime);return this.listener.na(s,n)}ra(){const e={};e.database=gm(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((s=>$N(this.serializer,s)))};this.K_(n)}}class GD{}class YD extends GD{constructor(e,n,s,o){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new ce($.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,f])=>this.connection.Wo(e,pm(n,s),o,u,f))).catch((u=>{throw u.name==="FirebaseError"?(u.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new ce($.UNKNOWN,u.toString())}))}jo(e,n,s,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([f,p])=>this.connection.jo(e,pm(n,s),o,f,p,u))).catch((f=>{throw f.name==="FirebaseError"?(f.code===$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new ce($.UNKNOWN,f.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function KD(r,e,n,s){return new YD(r,e,n,s)}class QD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gr(n),this.aa=!1):he("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}const ua="RemoteStore";class XD{constructor(e,n,s,o,u){this.localStore=e,this.datastore=n,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=u,this.Aa.Mo((f=>{s.enqueueAndForget((async()=>{ma(this)&&(he(ua,"Restarting streams for network reachability change."),await(async function(g){const y=Re(g);y.Ea.add(4),await Su(y),y.Va.set("Unknown"),y.Ea.delete(4),await hf(y)})(this))}))})),this.Va=new QD(s,o)}}async function hf(r){if(ma(r))for(const e of r.Ra)await e(!0)}async function Su(r){for(const e of r.Ra)await e(!1)}function Sb(r,e){const n=Re(r);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),cg(n)?ug(n):Mo(n).O_()&&lg(n,e))}function og(r,e){const n=Re(r),s=Mo(n);n.Ia.delete(e),s.O_()&&wb(n,e),n.Ia.size===0&&(s.O_()?s.L_():ma(n)&&n.Va.set("Unknown"))}function lg(r,e){if(r.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ae.min())>0){const n=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Mo(r).Z_(e)}function wb(r,e){r.da.$e(e),Mo(r).X_(e)}function ug(r){r.da=new qN({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),At:e=>r.Ia.get(e)||null,ht:()=>r.datastore.serializer.databaseId}),Mo(r).start(),r.Va.ua()}function cg(r){return ma(r)&&!Mo(r).x_()&&r.Ia.size>0}function ma(r){return Re(r).Ea.size===0}function Rb(r){r.da=void 0}async function $D(r){r.Va.set("Online")}async function WD(r){r.Ia.forEach(((e,n)=>{lg(r,e)}))}async function JD(r,e){Rb(r),cg(r)?(r.Va.ha(e),ug(r)):r.Va.set("Unknown")}async function ZD(r,e,n){if(r.Va.set("Online"),e instanceof ub&&e.state===2&&e.cause)try{await(async function(o,u){const f=u.cause;for(const p of u.targetIds)o.Ia.has(p)&&(await o.remoteSyncer.rejectListen(p,f),o.Ia.delete(p),o.da.removeTarget(p))})(r,e)}catch(s){he(ua,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Hh(r,s)}else if(e instanceof Rh?r.da.Xe(e):e instanceof lb?r.da.st(e):r.da.tt(e),!n.isEqual(Ae.min()))try{const s=await Tb(r.localStore);n.compareTo(s)>=0&&await(function(u,f){const p=u.da.Tt(f);return p.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(y);E&&u.Ia.set(y,E.withResumeToken(g.resumeToken,f))}})),p.targetMismatches.forEach(((g,y)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(Zt.EMPTY_BYTE_STRING,E.snapshotVersion)),wb(u,g);const S=new is(E.target,g,y,E.sequenceNumber);lg(u,S)})),u.remoteSyncer.applyRemoteEvent(p)})(r,n)}catch(s){he(ua,"Failed to raise snapshot:",s),await Hh(r,s)}}async function Hh(r,e,n){if(!ko(e))throw e;r.Ea.add(1),await Su(r),r.Va.set("Offline"),n||(n=()=>Tb(r.localStore)),r.asyncQueue.enqueueRetryable((async()=>{he(ua,"Retrying IndexedDB access"),await n(),r.Ea.delete(1),await hf(r)}))}function xb(r,e){return e().catch((n=>Hh(r,n,e)))}async function ff(r){const e=Re(r),n=ps(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Km;for(;ek(e);)try{const o=await MD(e.localStore,s);if(o===null){e.Ta.length===0&&n.L_();break}s=o.batchId,tk(e,o)}catch(o){await Hh(e,o)}Cb(e)&&Ib(e)}function ek(r){return ma(r)&&r.Ta.length<10}function tk(r,e){r.Ta.push(e);const n=ps(r);n.O_()&&n.Y_&&n.ea(e.mutations)}function Cb(r){return ma(r)&&!ps(r).x_()&&r.Ta.length>0}function Ib(r){ps(r).start()}async function nk(r){ps(r).ra()}async function ik(r){const e=ps(r);for(const n of r.Ta)e.ea(n.mutations)}async function rk(r,e,n){const s=r.Ta.shift(),o=eg.from(s,e,n);await xb(r,(()=>r.remoteSyncer.applySuccessfulWrite(o))),await ff(r)}async function sk(r,e){e&&ps(r).Y_&&await(async function(s,o){if((function(f){return zN(f)&&f!==$.ABORTED})(o.code)){const u=s.Ta.shift();ps(s).B_(),await xb(s,(()=>s.remoteSyncer.rejectFailedWrite(u.batchId,o))),await ff(s)}})(r,e),Cb(r)&&Ib(r)}async function I1(r,e){const n=Re(r);n.asyncQueue.verifyOperationInProgress(),he(ua,"RemoteStore received new credentials");const s=ma(n);n.Ea.add(3),await Su(n),s&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await hf(n)}async function ak(r,e){const n=Re(r);e?(n.Ea.delete(2),await hf(n)):e||(n.Ea.add(2),await Su(n),n.Va.set("Unknown"))}function Mo(r){return r.ma||(r.ma=(function(n,s,o){const u=Re(n);return u.sa(),new HD(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Zo:$D.bind(null,r),Yo:WD.bind(null,r),t_:JD.bind(null,r),J_:ZD.bind(null,r)}),r.Ra.push((async e=>{e?(r.ma.B_(),cg(r)?ug(r):r.Va.set("Unknown")):(await r.ma.stop(),Rb(r))}))),r.ma}function ps(r){return r.fa||(r.fa=(function(n,s,o){const u=Re(n);return u.sa(),new FD(s,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(r.datastore,r.asyncQueue,{Zo:()=>Promise.resolve(),Yo:nk.bind(null,r),t_:sk.bind(null,r),ta:ik.bind(null,r),na:rk.bind(null,r)}),r.Ra.push((async e=>{e?(r.fa.B_(),await ff(r)):(await r.fa.stop(),r.Ta.length>0&&(he(ua,`Stopping write stream with ${r.Ta.length} pending writes`),r.Ta=[]))}))),r.fa}class hg{constructor(e,n,s,o,u){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=s,this.op=o,this.removalCallback=u,this.deferred=new ea,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((f=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,s,o,u){const f=Date.now()+s,p=new hg(e,n,f,o,u);return p.start(s),p}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ce($.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fg(r,e){if(gr("AsyncQueue",`${e}: ${r}`),ko(r))return new ce($.UNAVAILABLE,`${e}: ${r}`);throw r}class vo{static emptySet(e){return new vo(e.comparator)}constructor(e){this.comparator=e?(n,s)=>e(n,s)||_e.comparator(n.key,s.key):(n,s)=>_e.comparator(n.key,s.key),this.keyedMap=Ql(),this.sortedSet=new dt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,s)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=s.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const s=new vo;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=n,s}}class N1{constructor(){this.ga=new dt(_e.comparator)}track(e){const n=e.doc.key,s=this.ga.get(n);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(n,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(n,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(n):e.type===1&&s.type===2?this.ga=this.ga.insert(n,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):be(63341,{Vt:e,pa:s}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,s)=>{e.push(s)})),e}}class Ro{constructor(e,n,s,o,u,f,p,g,y){this.query=e,this.docs=n,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=u,this.fromCache=f,this.syncStateChanged=p,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(e,n,s,o,u){const f=[];return n.forEach((p=>{f.push({type:0,doc:p})})),new Ro(e,n,vo.emptySet(n),f,s,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&sf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,s=e.docChanges;if(n.length!==s.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==s[o].type||!n[o].doc.isEqual(s[o].doc))return!1;return!0}}class ok{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class lk{constructor(){this.queries=D1(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,s){const o=Re(n),u=o.queries;o.queries=D1(),u.forEach(((f,p)=>{for(const g of p.ba)g.onError(s)}))})(this,new ce($.ABORTED,"Firestore shutting down"))}}function D1(){return new pa((r=>QT(r)),sf)}async function uk(r,e){const n=Re(r);let s=3;const o=e.query;let u=n.queries.get(o);u?!u.Sa()&&e.Da()&&(s=2):(u=new ok,s=e.Da()?0:1);try{switch(s){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(f){const p=fg(f,`Initialization of query '${lo(e.query)}' failed`);return void e.onError(p)}n.queries.set(o,u),u.ba.push(e),e.va(n.onlineState),u.wa&&e.Fa(u.wa)&&dg(n)}async function ck(r,e){const n=Re(r),s=e.query;let o=3;const u=n.queries.get(s);if(u){const f=u.ba.indexOf(e);f>=0&&(u.ba.splice(f,1),u.ba.length===0?o=e.Da()?0:1:!u.Sa()&&e.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(s),n.onUnlisten(s,!0);case 1:return n.queries.delete(s),n.onUnlisten(s,!1);case 2:return n.onLastRemoteStoreUnlisten(s);default:return}}function hk(r,e){const n=Re(r);let s=!1;for(const o of e){const u=o.query,f=n.queries.get(u);if(f){for(const p of f.ba)p.Fa(o)&&(s=!0);f.wa=o}}s&&dg(n)}function fk(r,e,n){const s=Re(r),o=s.queries.get(e);if(o)for(const u of o.ba)u.onError(n);s.queries.delete(e)}function dg(r){r.Ca.forEach((e=>{e.next()}))}var vm,k1;(k1=vm||(vm={})).Ma="default",k1.Cache="cache";class dk{constructor(e,n,s){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Ro(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const s=n!=="Offline";return(!this.options.Ka||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Ro.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vm.Cache}}class Nb{constructor(e){this.key=e}}class Db{constructor(e){this.key=e}}class pk{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=Pe(),this.mutatedKeys=Pe(),this.eu=XT(e),this.tu=new vo(this.eu)}get nu(){return this.Za}ru(e,n){const s=n?n.iu:new N1,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,f=o,p=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((E,S)=>{const w=o.get(E),P=af(this.query,S)?S:null,K=!!w&&this.mutatedKeys.has(w.key),J=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let Z=!1;w&&P?w.data.isEqual(P.data)?K!==J&&(s.track({type:3,doc:P}),Z=!0):this.su(w,P)||(s.track({type:2,doc:P}),Z=!0,(g&&this.eu(P,g)>0||y&&this.eu(P,y)<0)&&(p=!0)):!w&&P?(s.track({type:0,doc:P}),Z=!0):w&&!P&&(s.track({type:1,doc:w}),Z=!0,(g||y)&&(p=!0)),Z&&(P?(f=f.add(P),u=J?u.add(E):u.delete(E)):(f=f.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;f.size>this.query.limit;){const E=this.query.limitType==="F"?f.last():f.first();f=f.delete(E.key),u=u.delete(E.key),s.track({type:1,doc:E})}return{tu:f,iu:s,Ss:p,mutatedKeys:u}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,s,o){const u=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const f=e.iu.ya();f.sort(((E,S)=>(function(P,K){const J=Z=>{switch(Z){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return be(20277,{Vt:Z})}};return J(P)-J(K)})(E.type,S.type)||this.eu(E.doc,S.doc))),this.ou(s),o=o??!1;const p=n&&!o?this._u():[],g=this.Ya.size===0&&this.current&&!o?1:0,y=g!==this.Xa;return this.Xa=g,f.length!==0||y?{snapshot:new Ro(this.query,e.tu,u,f,e.mutatedKeys,g===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:p}:{au:p}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new N1,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=Pe(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Ya=this.Ya.add(s.key))}));const n=[];return e.forEach((s=>{this.Ya.has(s)||n.push(new Db(s))})),this.Ya.forEach((s=>{e.has(s)||n.push(new Nb(s))})),n}cu(e){this.Za=e.ks,this.Ya=Pe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Ro.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const pg="SyncEngine";class mk{constructor(e,n,s){this.query=e,this.targetId=n,this.view=s}}class gk{constructor(e){this.key=e,this.hu=!1}}class yk{constructor(e,n,s,o,u,f){this.localStore=e,this.remoteStore=n,this.eventManager=s,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=f,this.Pu={},this.Tu=new pa((p=>QT(p)),sf),this.Iu=new Map,this.Eu=new Set,this.Ru=new dt(_e.comparator),this.Au=new Map,this.Vu=new ig,this.du={},this.mu=new Map,this.fu=wo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _k(r,e,n=!0){const s=Ub(r);let o;const u=s.Tu.get(e);return u?(s.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await kb(s,e,n,!0),o}async function vk(r,e){const n=Ub(r);await kb(n,e,!0,!1)}async function kb(r,e,n,s){const o=await VD(r.localStore,Pi(e)),u=o.targetId,f=r.sharedClientState.addLocalQueryTarget(u,n);let p;return s&&(p=await Ek(r,e,u,f==="current",o.resumeToken)),r.isPrimaryClient&&n&&Sb(r.remoteStore,o),p}async function Ek(r,e,n,s,o){r.pu=(S,w,P)=>(async function(J,Z,oe,le){let se=Z.view.ru(oe);se.Ss&&(se=await S1(J.localStore,Z.query,!1).then((({documents:N})=>Z.view.ru(N,se))));const pe=le&&le.targetChanges.get(Z.targetId),xe=le&&le.targetMismatches.get(Z.targetId)!=null,me=Z.view.applyChanges(se,J.isPrimaryClient,pe,xe);return M1(J,Z.targetId,me.au),me.snapshot})(r,S,w,P);const u=await S1(r.localStore,e,!0),f=new pk(e,u.ks),p=f.ru(u.documents),g=Au.createSynthesizedTargetChangeForCurrentChange(n,s&&r.onlineState!=="Offline",o),y=f.applyChanges(p,r.isPrimaryClient,g);M1(r,n,y.au);const E=new mk(e,n,f);return r.Tu.set(e,E),r.Iu.has(n)?r.Iu.get(n).push(e):r.Iu.set(n,[e]),y.snapshot}async function Tk(r,e,n){const s=Re(r),o=s.Tu.get(e),u=s.Iu.get(o.targetId);if(u.length>1)return s.Iu.set(o.targetId,u.filter((f=>!sf(f,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await ym(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),n&&og(s.remoteStore,o.targetId),Em(s,o.targetId)})).catch(Do)):(Em(s,o.targetId),await ym(s.localStore,o.targetId,!0))}async function bk(r,e){const n=Re(r),s=n.Tu.get(e),o=n.Iu.get(s.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(s.targetId),og(n.remoteStore,s.targetId))}async function Ak(r,e,n){const s=Nk(r);try{const o=await(function(f,p){const g=Re(f),y=ot.now(),E=p.reduce(((P,K)=>P.add(K.key)),Pe());let S,w;return g.persistence.runTransaction("Locally write mutations","readwrite",(P=>{let K=yr(),J=Pe();return g.xs.getEntries(P,E).next((Z=>{K=Z,K.forEach(((oe,le)=>{le.isValidDocument()||(J=J.add(oe))}))})).next((()=>g.localDocuments.getOverlayedDocuments(P,K))).next((Z=>{S=Z;const oe=[];for(const le of p){const se=MN(le,S.get(le.key).overlayedDocument);se!=null&&oe.push(new vs(le.key,se,jT(se.value.mapValue),oi.exists(!0)))}return g.mutationQueue.addMutationBatch(P,y,oe,p)})).next((Z=>{w=Z;const oe=Z.applyToLocalDocumentSet(S,J);return g.documentOverlayCache.saveOverlays(P,Z.batchId,oe)}))})).then((()=>({batchId:w.batchId,changes:WT(S)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(f,p,g){let y=f.du[f.currentUser.toKey()];y||(y=new dt(Ue)),y=y.insert(p,g),f.du[f.currentUser.toKey()]=y})(s,o.batchId,n),await wu(s,o.changes),await ff(s.remoteStore)}catch(o){const u=fg(o,"Failed to persist write");n.reject(u)}}async function Ob(r,e){const n=Re(r);try{const s=await kD(n.localStore,e);e.targetChanges.forEach(((o,u)=>{const f=n.Au.get(u);f&&(Qe(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?f.hu=!0:o.modifiedDocuments.size>0?Qe(f.hu,14607):o.removedDocuments.size>0&&(Qe(f.hu,42227),f.hu=!1))})),await wu(n,s,e)}catch(s){await Do(s)}}function O1(r,e,n){const s=Re(r);if(s.isPrimaryClient&&n===0||!s.isPrimaryClient&&n===1){const o=[];s.Tu.forEach(((u,f)=>{const p=f.view.va(e);p.snapshot&&o.push(p.snapshot)})),(function(f,p){const g=Re(f);g.onlineState=p;let y=!1;g.queries.forEach(((E,S)=>{for(const w of S.ba)w.va(p)&&(y=!0)})),y&&dg(g)})(s.eventManager,e),o.length&&s.Pu.J_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function Sk(r,e,n){const s=Re(r);s.sharedClientState.updateQueryState(e,"rejected",n);const o=s.Au.get(e),u=o&&o.key;if(u){let f=new dt(_e.comparator);f=f.insert(u,rn.newNoDocument(u,Ae.min()));const p=Pe().add(u),g=new uf(Ae.min(),new Map,new dt(Ue),f,p);await Ob(s,g),s.Ru=s.Ru.remove(u),s.Au.delete(e),mg(s)}else await ym(s.localStore,e,!1).then((()=>Em(s,e,n))).catch(Do)}async function wk(r,e){const n=Re(r),s=e.batch.batchId;try{const o=await DD(n.localStore,e);Vb(n,s,null),Mb(n,s),n.sharedClientState.updateMutationState(s,"acknowledged"),await wu(n,o)}catch(o){await Do(o)}}async function Rk(r,e,n){const s=Re(r);try{const o=await(function(f,p){const g=Re(f);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let E;return g.mutationQueue.lookupMutationBatch(y,p).next((S=>(Qe(S!==null,37113),E=S.keys(),g.mutationQueue.removeMutationBatch(y,S)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,E,p))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E))).next((()=>g.localDocuments.getDocuments(y,E)))}))})(s.localStore,e);Vb(s,e,n),Mb(s,e),s.sharedClientState.updateMutationState(e,"rejected",n),await wu(s,o)}catch(o){await Do(o)}}function Mb(r,e){(r.mu.get(e)||[]).forEach((n=>{n.resolve()})),r.mu.delete(e)}function Vb(r,e,n){const s=Re(r);let o=s.du[s.currentUser.toKey()];if(o){const u=o.get(e);u&&(n?u.reject(n):u.resolve(),o=o.remove(e)),s.du[s.currentUser.toKey()]=o}}function Em(r,e,n=null){r.sharedClientState.removeLocalQueryTarget(e);for(const s of r.Iu.get(e))r.Tu.delete(s),n&&r.Pu.yu(s,n);r.Iu.delete(e),r.isPrimaryClient&&r.Vu.Gr(e).forEach((s=>{r.Vu.containsKey(s)||Lb(r,s)}))}function Lb(r,e){r.Eu.delete(e.path.canonicalString());const n=r.Ru.get(e);n!==null&&(og(r.remoteStore,n),r.Ru=r.Ru.remove(e),r.Au.delete(n),mg(r))}function M1(r,e,n){for(const s of n)s instanceof Nb?(r.Vu.addReference(s.key,e),xk(r,s)):s instanceof Db?(he(pg,"Document no longer in limbo: "+s.key),r.Vu.removeReference(s.key,e),r.Vu.containsKey(s.key)||Lb(r,s.key)):be(19791,{wu:s})}function xk(r,e){const n=e.key,s=n.path.canonicalString();r.Ru.get(n)||r.Eu.has(s)||(he(pg,"New document in limbo: "+n),r.Eu.add(s),mg(r))}function mg(r){for(;r.Eu.size>0&&r.Ru.size<r.maxConcurrentLimboResolutions;){const e=r.Eu.values().next().value;r.Eu.delete(e);const n=new _e(it.fromString(e)),s=r.fu.next();r.Au.set(s,new gk(n)),r.Ru=r.Ru.insert(n,s),Sb(r.remoteStore,new is(Pi(Jm(n.path)),s,"TargetPurposeLimboResolution",tf.ce))}}async function wu(r,e,n){const s=Re(r),o=[],u=[],f=[];s.Tu.isEmpty()||(s.Tu.forEach(((p,g)=>{f.push(s.pu(g,e,n).then((y=>{if((y||n)&&s.isPrimaryClient){const E=y?!y.fromCache:n?.targetChanges.get(g.targetId)?.current;s.sharedClientState.updateQueryState(g.targetId,E?"current":"not-current")}if(y){o.push(y);const E=sg.Es(g.targetId,y);u.push(E)}})))})),await Promise.all(f),s.Pu.J_(o),await(async function(g,y){const E=Re(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(S=>W.forEach(y,(w=>W.forEach(w.Ts,(P=>E.persistence.referenceDelegate.addReference(S,w.targetId,P))).next((()=>W.forEach(w.Is,(P=>E.persistence.referenceDelegate.removeReference(S,w.targetId,P)))))))))}catch(S){if(!ko(S))throw S;he(ag,"Failed to update sequence numbers: "+S)}for(const S of y){const w=S.targetId;if(!S.fromCache){const P=E.vs.get(w),K=P.snapshotVersion,J=P.withLastLimboFreeSnapshotVersion(K);E.vs=E.vs.insert(w,J)}}})(s.localStore,u))}async function Ck(r,e){const n=Re(r);if(!n.currentUser.isEqual(e)){he(pg,"User change. New user:",e.toKey());const s=await Eb(n.localStore,e);n.currentUser=e,(function(u,f){u.mu.forEach((p=>{p.forEach((g=>{g.reject(new ce($.CANCELLED,f))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await wu(n,s.Ns)}}function Ik(r,e){const n=Re(r),s=n.Au.get(e);if(s&&s.hu)return Pe().add(s.key);{let o=Pe();const u=n.Iu.get(e);if(!u)return o;for(const f of u){const p=n.Tu.get(f);o=o.unionWith(p.view.nu)}return o}}function Ub(r){const e=Re(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ob.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ik.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Sk.bind(null,e),e.Pu.J_=hk.bind(null,e.eventManager),e.Pu.yu=fk.bind(null,e.eventManager),e}function Nk(r){const e=Re(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Rk.bind(null,e),e}class Fh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=cf(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return ND(this.persistence,new xD,e.initialUser,this.serializer)}Cu(e){return new vb(rg.Vi,this.serializer)}Du(e){return new UD}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fh.provider={build:()=>new Fh};class Dk extends Fh{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Qe(this.persistence.referenceDelegate instanceof qh,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new fD(s,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?yn.withCacheSize(this.cacheSizeBytes):yn.DEFAULT;return new vb((s=>qh.Vi(s,n)),this.serializer)}}class Tm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>O1(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ck.bind(null,this.syncEngine),await ak(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new lk})()}createDatastore(e){const n=cf(e.databaseInfo.databaseId),s=qD(e.databaseInfo);return KD(e.authCredentials,e.appCheckCredentials,s,n)}createRemoteStore(e){return(function(s,o,u,f,p){return new XD(s,o,u,f,p)})(this.localStore,this.datastore,e.asyncQueue,(n=>O1(this.syncEngine,n,0)),(function(){return x1.v()?new x1:new PD})())}createSyncEngine(e,n){return(function(o,u,f,p,g,y,E){const S=new yk(o,u,f,p,g,y);return E&&(S.gu=!0),S})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){await(async function(n){const s=Re(n);he(ua,"RemoteStore shutting down."),s.Ea.add(5),await Su(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}Tm.provider={build:()=>new Tm};class kk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):gr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}const ms="FirestoreClient";class Ok{constructor(e,n,s,o,u){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=s,this._databaseInfo=o,this.user=nn.UNAUTHENTICATED,this.clientId=Ym.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(s,(async f=>{he(ms,"Received user=",f.uid),await this.authCredentialListener(f),this.user=f})),this.appCheckCredentials.start(s,(f=>(he(ms,"Received new app check token=",f),this.appCheckCredentialListener(f,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ea;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const s=fg(n,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function zp(r,e){r.asyncQueue.verifyOperationInProgress(),he(ms,"Initializing OfflineComponentProvider");const n=r.configuration;await e.initialize(n);let s=n.initialUser;r.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Eb(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>r.terminate())),r._offlineComponents=e}async function V1(r,e){r.asyncQueue.verifyOperationInProgress();const n=await Mk(r);he(ms,"Initializing OnlineComponentProvider"),await e.initialize(n,r.configuration),r.setCredentialChangeListener((s=>I1(e.remoteStore,s))),r.setAppCheckTokenChangeListener(((s,o)=>I1(e.remoteStore,o))),r._onlineComponents=e}async function Mk(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){he(ms,"Using user provided OfflineComponentProvider");try{await zp(r,r._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(o){return o.name==="FirebaseError"?o.code===$.FAILED_PRECONDITION||o.code===$.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;To("Error using user provided cache. Falling back to memory cache: "+n),await zp(r,new Fh)}}else he(ms,"Using default OfflineComponentProvider"),await zp(r,new Dk(void 0));return r._offlineComponents}async function Pb(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(he(ms,"Using user provided OnlineComponentProvider"),await V1(r,r._uninitializedComponentsProvider._online)):(he(ms,"Using default OnlineComponentProvider"),await V1(r,new Tm))),r._onlineComponents}function Vk(r){return Pb(r).then((e=>e.syncEngine))}async function L1(r){const e=await Pb(r),n=e.eventManager;return n.onListen=_k.bind(null,e.syncEngine),n.onUnlisten=Tk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=vk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=bk.bind(null,e.syncEngine),n}function Lk(r,e,n,s){const o=new kk(s),u=new dk(e,o,n);return r.asyncQueue.enqueueAndForget((async()=>uk(await L1(r),u))),()=>{o.Nu(),r.asyncQueue.enqueueAndForget((async()=>ck(await L1(r),u)))}}function Uk(r,e){const n=new ea;return r.asyncQueue.enqueueAndForget((async()=>Ak(await Vk(r),e,n))),n.promise}function zb(r){const e={};return r.timeoutSeconds!==void 0&&(e.timeoutSeconds=r.timeoutSeconds),e}const Pk="ComponentProvider",U1=new Map;function zk(r,e,n,s,o){return new tN(r,e,n,o.host,o.ssl,o.experimentalForceLongPolling,o.experimentalAutoDetectLongPolling,zb(o.experimentalLongPollingOptions),o.useFetchStreams,o.isUsingEmulator,s)}const jb="firestore.googleapis.com",P1=!0;class z1{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ce($.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=jb,this.ssl=P1}else this.host=e.host,this.ssl=e.ssl??P1;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=_b;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cD)throw new ce($.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}F4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=zb(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new ce($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new ce($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new ce($.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class df{constructor(e,n,s,o){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new z1({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ce($.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ce($.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new z1(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new M4;switch(s.type){case"firstParty":return new P4(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new ce($.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const s=U1.get(n);s&&(he(Pk,"Removing Datastore"),U1.delete(n),s.terminate())})(this),Promise.resolve()}}function jk(r,e,n,s={}){r=dr(r,df);const o=gs(e),u=r._getSettings(),f={...u,emulatorOptions:r._getEmulatorOptions()},p=`${e}:${n}`;o&&(km(`https://${p}`),Om("Firestore",!0)),u.host!==jb&&u.host!==p&&To("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:p,ssl:o,emulatorOptions:s};if(!ia(g,f)&&(r._setSettings(g),s.mockUserToken)){let y,E;if(typeof s.mockUserToken=="string")y=s.mockUserToken,E=nn.MOCK_USER;else{y=ME(s.mockUserToken,r._app?.options.projectId);const S=s.mockUserToken.sub||s.mockUserToken.user_id;if(!S)throw new ce($.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");E=new nn(S)}r._authCredentials=new V4(new CT(y,E))}}class ga{constructor(e,n,s){this.converter=n,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ga(this.firestore,e,this._query)}}class At{constructor(e,n,s){this.converter=n,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ls(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new At(this.firestore,e,this._key)}toJSON(){return{type:At._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,s){if(Tu(n,At._jsonSchema))return new At(e,s||null,new _e(it.fromString(n.referencePath)))}}At._jsonSchemaVersion="firestore/documentReference/1.0",At._jsonSchema={type:Lt("string",At._jsonSchemaVersion),referencePath:Lt("string")};class ls extends ga{constructor(e,n,s){super(e,n,Jm(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new At(this.firestore,null,new _e(e))}withConverter(e){return new ls(this.firestore,e,this._path)}}function jp(r,e,...n){if(r=lt(r),IT("collection","path",e),r instanceof df){const s=it.fromString(e,...n);return W0(s),new ls(r,null,s)}{if(!(r instanceof At||r instanceof ls))throw new ce($.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(it.fromString(e,...n));return W0(s),new ls(r.firestore,null,s)}}function pu(r,e,...n){if(r=lt(r),arguments.length===1&&(e=Ym.newId()),IT("doc","path",e),r instanceof df){const s=it.fromString(e,...n);return $0(s),new At(r,null,new _e(s))}{if(!(r instanceof At||r instanceof ls))throw new ce($.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=r._path.child(it.fromString(e,...n));return $0(s),new At(r.firestore,r instanceof ls?r.converter:null,new _e(s))}}const j1="AsyncQueue";class B1{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new bb(this,"async_queue_retry"),this._c=()=>{const s=Pp();s&&he(j1,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const n=Pp();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Pp();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new ea;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!ko(e))throw e;he(j1,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,gr("INTERNAL UNHANDLED ERROR: ",q1(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=n,n}enqueueAfterDelay(e,n,s){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const o=hg.createAndSchedule(this,e,n,s,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&be(47125,{Pc:q1(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,s)=>n.targetTimeMs-s.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function q1(r){let e=r.message||"";return r.stack&&(e=r.stack.includes(r.message)?r.stack:r.message+`
`+r.stack),e}class xo extends df{constructor(e,n,s,o){super(e,n,s,o),this.type="firestore",this._queue=new B1,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new B1(e),this._firestoreClient=void 0,await e}}}function Bk(r,e){const n=typeof r=="object"?r:Lm(),s=typeof r=="string"?r:Uh,o=$h(n,"firestore").getImmediate({identifier:s});if(!o._initialized){const u=DE("firestore");u&&jk(o,...u)}return o}function Bb(r){if(r._terminated)throw new ce($.FAILED_PRECONDITION,"The client has already been terminated.");return r._firestoreClient||qk(r),r._firestoreClient}function qk(r){const e=r._freezeSettings(),n=zk(r._databaseId,r._app?.options.appId||"",r._persistenceKey,r._app?.options.apiKey,e);r._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(r._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),r._firestoreClient=new Ok(r._authCredentials,r._appCheckCredentials,r._queue,n,r._componentsProvider&&(function(o){const u=o?._online.build();return{_offline:o?._offline.build(u),_online:u}})(r._componentsProvider))}class Yn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Yn(Zt.fromBase64String(e))}catch(n){throw new ce($.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Yn(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Yn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Tu(e,Yn._jsonSchema))return Yn.fromBase64String(e.bytes)}}Yn._jsonSchemaVersion="firestore/bytes/1.0",Yn._jsonSchema={type:Lt("string",Yn._jsonSchemaVersion),bytes:Lt("string")};class gg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ce($.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class pf{constructor(e){this._methodName=e}}class ji{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ce($.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ce($.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ji._jsonSchemaVersion}}static fromJSON(e){if(Tu(e,ji._jsonSchema))return new ji(e.latitude,e.longitude)}}ji._jsonSchemaVersion="firestore/geoPoint/1.0",ji._jsonSchema={type:Lt("string",ji._jsonSchemaVersion),latitude:Lt("number"),longitude:Lt("number")};class li{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let u=0;u<s.length;++u)if(s[u]!==o[u])return!1;return!0})(this._values,e._values)}toJSON(){return{type:li._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Tu(e,li._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new li(e.vectorValues);throw new ce($.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}li._jsonSchemaVersion="firestore/vectorValue/1.0",li._jsonSchema={type:Lt("string",li._jsonSchemaVersion),vectorValues:Lt("object")};const Hk=/^__.*__$/;class Fk{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return this.fieldMask!==null?new vs(e,this.data,this.fieldMask,n,this.fieldTransforms):new bu(e,this.data,n,this.fieldTransforms)}}class qb{constructor(e,n,s){this.data=e,this.fieldMask=n,this.fieldTransforms=s}toMutation(e,n){return new vs(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Hb(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw be(40011,{dataSource:r})}}class yg{constructor(e,n,s,o,u,f){this.settings=e,this.databaseId=n,this.serializer=s,this.ignoreUndefinedProperties=o,u===void 0&&this.validatePath(),this.fieldTransforms=u||[],this.fieldMask=f||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new yg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePathSegment(e),s}childContextForFieldPath(e){const n=this.path?.child(e),s=this.contextWith({path:n,arrayElement:!1});return s.validatePath(),s}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Gh(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(Hb(this.dataSource)&&Hk.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class Gk{constructor(e,n,s){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=s||cf(e)}createContext(e,n,s,o=!1){return new yg({dataSource:e,methodName:n,targetDoc:s,path:Jt.emptyPath(),arrayElement:!1,hasConverter:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function mf(r){const e=r._freezeSettings(),n=cf(r._databaseId);return new Gk(r._databaseId,!!e.ignoreUndefinedProperties,n)}function Fb(r,e,n,s,o,u={}){const f=r.createContext(u.merge||u.mergeFields?2:0,e,n,o);vg("Data must be an object, but it was:",f,s);const p=Gb(s,f);let g,y;if(u.merge)g=new In(f.fieldMask),y=f.fieldTransforms;else if(u.mergeFields){const E=[];for(const S of u.mergeFields){const w=ca(e,S,n);if(!f.contains(w))throw new ce($.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);Qb(E,w)||E.push(w)}g=new In(E),y=f.fieldTransforms.filter((S=>g.covers(S.field)))}else g=null,y=f.fieldTransforms;return new Fk(new _n(p),g,y)}class gf extends pf{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof gf}}class _g extends pf{_toFieldTransform(e){return new NN(e.path,new hu)}isEqual(e){return e instanceof _g}}function Yk(r,e,n,s){const o=r.createContext(1,e,n);vg("Data must be an object, but it was:",o,s);const u=[],f=_n.empty();_s(s,((g,y)=>{const E=Kb(e,g,n);y=lt(y);const S=o.childContextForFieldPath(E);if(y instanceof gf)u.push(E);else{const w=Ru(y,S);w!=null&&(u.push(E),f.set(E,w))}}));const p=new In(u);return new qb(f,p,o.fieldTransforms)}function Kk(r,e,n,s,o,u){const f=r.createContext(1,e,n),p=[ca(e,s,n)],g=[o];if(u.length%2!=0)throw new ce($.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<u.length;w+=2)p.push(ca(e,u[w])),g.push(u[w+1]);const y=[],E=_n.empty();for(let w=p.length-1;w>=0;--w)if(!Qb(y,p[w])){const P=p[w];let K=g[w];K=lt(K);const J=f.childContextForFieldPath(P);if(K instanceof gf)y.push(P);else{const Z=Ru(K,J);Z!=null&&(y.push(P),E.set(P,Z))}}const S=new In(y);return new qb(E,S,f.fieldTransforms)}function Qk(r,e,n,s=!1){return Ru(n,r.createContext(s?4:3,e))}function Ru(r,e){if(Yb(r=lt(r)))return vg("Unsupported field value:",e,r),Gb(r,e);if(r instanceof pf)return(function(s,o){if(!Hb(o.dataSource))throw o.createError(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.createError(`${s._methodName}() is not currently supported inside arrays`);const u=s._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(r,e),null;if(r===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(s,o){const u=[];let f=0;for(const p of s){let g=Ru(p,o.childContextForArray(f));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),f++}return{arrayValue:{values:u}}})(r,e)}return(function(s,o){if((s=lt(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return xN(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const u=ot.fromDate(s);return{timestampValue:Bh(o.serializer,u)}}if(s instanceof ot){const u=new ot(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Bh(o.serializer,u)}}if(s instanceof ji)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Yn)return{bytesValue:cb(o.serializer,s._byteString)};if(s instanceof At){const u=o.databaseId,f=s.firestore._databaseId;if(!f.isEqual(u))throw o.createError(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:ng(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof li)return(function(f,p){const g=f instanceof li?f.toArray():f;return{mapValue:{fields:{[PT]:{stringValue:zT},[Ph]:{arrayValue:{values:g.map((E=>{if(typeof E!="number")throw p.createError("VectorValues must only contain numeric values.");return Zm(p.serializer,E)}))}}}}}})(s,o);if(yb(s))return s._toProto(o.serializer);throw o.createError(`Unsupported field value: ${ef(s)}`)})(r,e)}function Gb(r,e){const n={};return kT(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_s(r,((s,o)=>{const u=Ru(o,e.childContextForField(s));u!=null&&(n[s]=u)})),{mapValue:{fields:n}}}function Yb(r){return!(typeof r!="object"||r===null||r instanceof Array||r instanceof Date||r instanceof ot||r instanceof ji||r instanceof Yn||r instanceof At||r instanceof pf||r instanceof li||yb(r))}function vg(r,e,n){if(!Yb(n)||!NT(n)){const s=ef(n);throw s==="an object"?e.createError(r+" a custom object"):e.createError(r+" "+s)}}function ca(r,e,n){if((e=lt(e))instanceof gg)return e._internalPath;if(typeof e=="string")return Kb(r,e);throw Gh("Field path arguments must be of type string or ",r,!1,void 0,n)}const Xk=new RegExp("[~\\*/\\[\\]]");function Kb(r,e,n){if(e.search(Xk)>=0)throw Gh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,n);try{return new gg(...e.split("."))._internalPath}catch{throw Gh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,n)}}function Gh(r,e,n,s,o){const u=s&&!s.isEmpty(),f=o!==void 0;let p=`Function ${e}() called with invalid data`;n&&(p+=" (via `toFirestore()`)"),p+=". ";let g="";return(u||f)&&(g+=" (found",u&&(g+=` in field ${s}`),f&&(g+=` in document ${o}`),g+=")"),new ce($.INVALID_ARGUMENT,p+r+g)}function Qb(r,e){return r.some((n=>n.isEqual(e)))}class $k{convertValue(e,n="none"){switch(ds(e)){case 0:return null;case 1:return e.booleanValue;case 2:return bt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw be(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const s={};return _s(e,((o,u)=>{s[o]=this.convertValue(u,n)})),s}convertVectorValue(e){const n=e.fields?.[Ph].arrayValue?.values?.map((s=>bt(s.doubleValue)));return new li(n)}convertGeoPoint(e){return new ji(bt(e.latitude),bt(e.longitude))}convertArray(e,n){return(e.values||[]).map((s=>this.convertValue(s,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const s=rf(e);return s==null?null:this.convertValue(s,n);case"estimate":return this.convertTimestamp(ou(e));default:return null}}convertTimestamp(e){const n=hs(e);return new ot(n.seconds,n.nanos)}convertDocumentKey(e,n){const s=it.fromString(e);Qe(gb(s),9688,{name:e});const o=new lu(s.get(1),s.get(3)),u=new _e(s.popFirst(5));return o.isEqual(n)||gr(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}class Xb extends $k{constructor(e){super(),this.firestore=e}convertBytes(e){return new Yn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new At(this.firestore,null,n)}}function Eg(){return new _g("serverTimestamp")}const H1="@firebase/firestore",F1="4.10.0";function G1(r){return(function(n,s){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of s)if(u in o&&typeof o[u]=="function")return!0;return!1})(r,["next","error","complete"])}class $b{constructor(e,n,s,o,u){this._firestore=e,this._userDataWriter=n,this._key=s,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new At(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Wk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){return this._document?.data.clone().value.mapValue.fields??void 0}get(e){if(this._document){const n=this._document.data.field(ca("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Wk extends $b{data(){return super.data()}}function Jk(r){if(r.limitType==="L"&&r.explicitOrderBy.length===0)throw new ce($.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Tg{}class Wb extends Tg{}function Y1(r,e,...n){let s=[];e instanceof Tg&&s.push(e),s=s.concat(n),(function(u){const f=u.filter((g=>g instanceof bg)).length,p=u.filter((g=>g instanceof yf)).length;if(f>1||f>0&&p>0)throw new ce($.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)r=o._apply(r);return r}class yf extends Wb{constructor(e,n,s){super(),this._field=e,this._op=n,this._value=s,this.type="where"}static _create(e,n,s){return new yf(e,n,s)}_apply(e){const n=this._parse(e);return Jb(e._query,n),new ga(e.firestore,e.converter,hm(e._query,n))}_parse(e){const n=mf(e.firestore);return(function(u,f,p,g,y,E,S){let w;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new ce($.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){Q1(S,E);const K=[];for(const J of S)K.push(K1(g,u,J));w={arrayValue:{values:K}}}else w=K1(g,u,S)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||Q1(S,E),w=Qk(p,f,S,E==="in"||E==="not-in");return Mt.create(y,E,w)})(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Zk(r,e,n){const s=e,o=ca("where",r);return yf._create(o,s,n)}class bg extends Tg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new bg(e,n)}_parse(e){const n=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return n.length===1?n[0]:ci.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:((function(o,u){let f=o;const p=u.getFlattenedFilters();for(const g of p)Jb(f,g),f=hm(f,g)})(e._query,n),new ga(e.firestore,e.converter,hm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Ag extends Wb{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Ag(e,n)}_apply(e){const n=(function(o,u,f){if(o.startAt!==null)throw new ce($.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new ce($.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new cu(u,f)})(e._query,this._field,this._direction);return new ga(e.firestore,e.converter,vN(e._query,n))}}function eO(r,e="asc"){const n=e,s=ca("orderBy",r);return Ag._create(s,n)}function K1(r,e,n){if(typeof(n=lt(n))=="string"){if(n==="")throw new ce($.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KT(e)&&n.indexOf("/")!==-1)throw new ce($.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const s=e.path.child(it.fromString(n));if(!_e.isDocumentKey(s))throw new ce($.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return s1(r,new _e(s))}if(n instanceof At)return s1(r,n._key);throw new ce($.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ef(n)}.`)}function Q1(r,e){if(!Array.isArray(r)||r.length===0)throw new ce($.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function Jb(r,e){const n=(function(o,u){for(const f of o)for(const p of f.getFlattenedFilters())if(u.indexOf(p.op)>=0)return p.op;return null})(r.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(n!==null)throw n===e.op?new ce($.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new ce($.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function Zb(r,e,n){let s;return s=r?n&&(n.merge||n.mergeFields)?r.toFirestore(e,n):r.toFirestore(e):e,s}class $l{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ta extends $b{constructor(e,n,s,o,u,f){super(e,n,s,o,f),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const s=this._document.data.field(ca("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ce($.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=ta._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}ta._jsonSchemaVersion="firestore/documentSnapshot/1.0",ta._jsonSchema={type:Lt("string",ta._jsonSchemaVersion),bundleSource:Lt("string","DocumentSnapshot"),bundleName:Lt("string"),bundle:Lt("string")};class xh extends ta{data(e={}){return super.data(e)}}class Eo{constructor(e,n,s,o){this._firestore=e,this._userDataWriter=n,this._snapshot=o,this.metadata=new $l(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((s=>{e.call(n,new xh(this._firestore,this._userDataWriter,s.key,s,new $l(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new ce($.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let f=0;return o._snapshot.docChanges.map((p=>{const g=new xh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new $l(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);return p.doc,{type:"added",doc:g,oldIndex:-1,newIndex:f++}}))}{let f=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((p=>u||p.type!==3)).map((p=>{const g=new xh(o._firestore,o._userDataWriter,p.doc.key,p.doc,new $l(o._snapshot.mutatedKeys.has(p.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return p.type!==0&&(y=f.indexOf(p.doc.key),f=f.delete(p.doc.key)),p.type!==1&&(f=f.add(p.doc),E=f.indexOf(p.doc.key)),{type:tO(p.type),doc:g,oldIndex:y,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ce($.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Eo._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ym.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],s=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),s.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tO(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return be(61501,{type:r})}}Eo._jsonSchemaVersion="firestore/querySnapshot/1.0",Eo._jsonSchema={type:Lt("string",Eo._jsonSchemaVersion),bundleSource:Lt("string","QuerySnapshot"),bundleName:Lt("string"),bundle:Lt("string")};function eA(r,e,n){r=dr(r,At);const s=dr(r.firestore,xo),o=Zb(r.converter,e,n),u=mf(s);return Sg(s,[Fb(u,"setDoc",r._key,o,r.converter!==null,n).toMutation(r._key,oi.none())])}function X1(r,e,n,...s){r=dr(r,At);const o=dr(r.firestore,xo),u=mf(o);let f;return f=typeof(e=lt(e))=="string"||e instanceof gg?Kk(u,"updateDoc",r._key,e,n,s):Yk(u,"updateDoc",r._key,e),Sg(o,[f.toMutation(r._key,oi.exists(!0))])}function nO(r,e){const n=dr(r.firestore,xo),s=pu(r),o=Zb(r.converter,e),u=mf(r.firestore);return Sg(n,[Fb(u,"addDoc",s._key,o,r.converter!==null,{}).toMutation(s._key,oi.exists(!1))]).then((()=>s))}function $1(r,...e){r=lt(r);let n={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||G1(e[s])||(n=e[s++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(G1(e[s])){const y=e[s];e[s]=y.next?.bind(y),e[s+1]=y.error?.bind(y),e[s+2]=y.complete?.bind(y)}let u,f,p;if(r instanceof At)f=dr(r.firestore,xo),p=Jm(r._key.path),u={next:y=>{e[s]&&e[s](iO(f,r,y))},error:e[s+1],complete:e[s+2]};else{const y=dr(r,ga);f=dr(y.firestore,xo),p=y._query;const E=new Xb(f);u={next:S=>{e[s]&&e[s](new Eo(f,E,y,S))},error:e[s+1],complete:e[s+2]},Jk(r._query)}const g=Bb(f);return Lk(g,p,o,u)}function Sg(r,e){const n=Bb(r);return Uk(n,e)}function iO(r,e,n){const s=n.docs.get(e._key),o=new Xb(r);return new ta(r,o,e._key,s,new $l(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){O4(fa),ra(new us("firestore",((s,{instanceIdentifier:o,options:u})=>{const f=s.getProvider("app").getImmediate(),p=new xo(new L4(s.getProvider("auth-internal")),new z4(f,s.getProvider("app-check-internal")),nN(f,o),f);return u={useFetchStreams:n,...u},p._setSettings(u),p}),"PUBLIC").setMultipleInstances(!0)),Vi(H1,F1,e),Vi(H1,F1,"esm2020")})();const tA="firebasestorage.googleapis.com",nA="storageBucket",rO=120*1e3,sO=600*1e3;class yt extends Hi{constructor(e,n,s=0){super(Bp(e),`Firebase Storage: ${n} (${Bp(e)})`),this.status_=s,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Bp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var gt;(function(r){r.UNKNOWN="unknown",r.OBJECT_NOT_FOUND="object-not-found",r.BUCKET_NOT_FOUND="bucket-not-found",r.PROJECT_NOT_FOUND="project-not-found",r.QUOTA_EXCEEDED="quota-exceeded",r.UNAUTHENTICATED="unauthenticated",r.UNAUTHORIZED="unauthorized",r.UNAUTHORIZED_APP="unauthorized-app",r.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",r.INVALID_CHECKSUM="invalid-checksum",r.CANCELED="canceled",r.INVALID_EVENT_NAME="invalid-event-name",r.INVALID_URL="invalid-url",r.INVALID_DEFAULT_BUCKET="invalid-default-bucket",r.NO_DEFAULT_BUCKET="no-default-bucket",r.CANNOT_SLICE_BLOB="cannot-slice-blob",r.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",r.NO_DOWNLOAD_URL="no-download-url",r.INVALID_ARGUMENT="invalid-argument",r.INVALID_ARGUMENT_COUNT="invalid-argument-count",r.APP_DELETED="app-deleted",r.INVALID_ROOT_OPERATION="invalid-root-operation",r.INVALID_FORMAT="invalid-format",r.INTERNAL_ERROR="internal-error",r.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(gt||(gt={}));function Bp(r){return"storage/"+r}function wg(){const r="An unknown error occurred, please check the error payload for server response.";return new yt(gt.UNKNOWN,r)}function aO(r){return new yt(gt.OBJECT_NOT_FOUND,"Object '"+r+"' does not exist.")}function oO(r){return new yt(gt.QUOTA_EXCEEDED,"Quota for bucket '"+r+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function lO(){const r="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new yt(gt.UNAUTHENTICATED,r)}function uO(){return new yt(gt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function cO(r){return new yt(gt.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")}function hO(){return new yt(gt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function fO(){return new yt(gt.CANCELED,"User canceled the upload/download.")}function dO(r){return new yt(gt.INVALID_URL,"Invalid URL '"+r+"'.")}function pO(r){return new yt(gt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.")}function mO(){return new yt(gt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+nA+"' property when initializing the app?")}function gO(){return new yt(gt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yO(){return new yt(gt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function _O(r){return new yt(gt.UNSUPPORTED_ENVIRONMENT,`${r} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function bm(r){return new yt(gt.INVALID_ARGUMENT,r)}function iA(){return new yt(gt.APP_DELETED,"The Firebase app was deleted.")}function vO(r){return new yt(gt.INVALID_ROOT_OPERATION,"The operation '"+r+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function iu(r,e){return new yt(gt.INVALID_FORMAT,"String does not match format '"+r+"': "+e)}function Hl(r){throw new yt(gt.INTERNAL_ERROR,"Internal error: "+r)}class Nn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let s;try{s=Nn.makeFromUrl(e,n)}catch{return new Nn(e,"")}if(s.path==="")return s;throw pO(e)}static makeFromUrl(e,n){let s=null;const o="([A-Za-z0-9.\\-_]+)";function u(pe){pe.path.charAt(pe.path.length-1)==="/"&&(pe.path_=pe.path_.slice(0,-1))}const f="(/(.*))?$",p=new RegExp("^gs://"+o+f,"i"),g={bucket:1,path:3};function y(pe){pe.path_=decodeURIComponent(pe.path)}const E="v[A-Za-z0-9_]+",S=n.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",P=new RegExp(`^https?://${S}/${E}/b/${o}/o${w}`,"i"),K={bucket:1,path:3},J=n===tA?"(?:storage.googleapis.com|storage.cloud.google.com)":n,Z="([^?#]*)",oe=new RegExp(`^https?://${J}/${o}/${Z}`,"i"),se=[{regex:p,indices:g,postModify:u},{regex:P,indices:K,postModify:y},{regex:oe,indices:{bucket:1,path:2},postModify:y}];for(let pe=0;pe<se.length;pe++){const xe=se[pe],me=xe.regex.exec(e);if(me){const N=me[xe.indices.bucket];let x=me[xe.indices.path];x||(x=""),s=new Nn(N,x),xe.postModify(s);break}}if(s==null)throw dO(e);return s}}class EO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function TO(r,e,n){let s=1,o=null,u=null,f=!1,p=0;function g(){return p===2}let y=!1;function E(...Z){y||(y=!0,e.apply(null,Z))}function S(Z){o=setTimeout(()=>{o=null,r(P,g())},Z)}function w(){u&&clearTimeout(u)}function P(Z,...oe){if(y){w();return}if(Z){w(),E.call(null,Z,...oe);return}if(g()||f){w(),E.call(null,Z,...oe);return}s<64&&(s*=2);let se;p===1?(p=2,se=0):se=(s+Math.random())*1e3,S(se)}let K=!1;function J(Z){K||(K=!0,w(),!y&&(o!==null?(Z||(p=2),clearTimeout(o),S(0)):Z||(p=1)))}return S(0),u=setTimeout(()=>{f=!0,J(!0)},n),J}function bO(r){r(!1)}function AO(r){return r!==void 0}function SO(r){return typeof r=="object"&&!Array.isArray(r)}function Rg(r){return typeof r=="string"||r instanceof String}function W1(r){return xg()&&r instanceof Blob}function xg(){return typeof Blob<"u"}function J1(r,e,n,s){if(s<e)throw bm(`Invalid value for '${r}'. Expected ${e} or greater.`);if(s>n)throw bm(`Invalid value for '${r}'. Expected ${n} or less.`)}function Cg(r,e,n){let s=e;return n==null&&(s=`https://${e}`),`${n}://${s}/v0${r}`}function rA(r){const e=encodeURIComponent;let n="?";for(const s in r)if(r.hasOwnProperty(s)){const o=e(s)+"="+e(r[s]);n=n+o+"&"}return n=n.slice(0,-1),n}var na;(function(r){r[r.NO_ERROR=0]="NO_ERROR",r[r.NETWORK_ERROR=1]="NETWORK_ERROR",r[r.ABORT=2]="ABORT"})(na||(na={}));function wO(r,e){const n=r>=500&&r<600,o=[408,429].indexOf(r)!==-1,u=e.indexOf(r)!==-1;return n||o||u}class RO{constructor(e,n,s,o,u,f,p,g,y,E,S,w=!0,P=!1){this.url_=e,this.method_=n,this.headers_=s,this.body_=o,this.successCodes_=u,this.additionalRetryCodes_=f,this.callback_=p,this.errorCallback_=g,this.timeout_=y,this.progressCallback_=E,this.connectionFactory_=S,this.retry=w,this.isUsingEmulator=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((K,J)=>{this.resolve_=K,this.reject_=J,this.start_()})}start_(){const e=(s,o)=>{if(o){s(!1,new ch(!1,null,!0));return}const u=this.connectionFactory_();this.pendingConnection_=u;const f=p=>{const g=p.loaded,y=p.lengthComputable?p.total:-1;this.progressCallback_!==null&&this.progressCallback_(g,y)};this.progressCallback_!==null&&u.addUploadProgressListener(f),u.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&u.removeUploadProgressListener(f),this.pendingConnection_=null;const p=u.getErrorCode()===na.NO_ERROR,g=u.getStatus();if(!p||wO(g,this.additionalRetryCodes_)&&this.retry){const E=u.getErrorCode()===na.ABORT;s(!1,new ch(!1,null,E));return}const y=this.successCodes_.indexOf(g)!==-1;s(!0,new ch(y,u))})},n=(s,o)=>{const u=this.resolve_,f=this.reject_,p=o.connection;if(o.wasSuccessCode)try{const g=this.callback_(p,p.getResponse());AO(g)?u(g):u()}catch(g){f(g)}else if(p!==null){const g=wg();g.serverResponse=p.getErrorText(),this.errorCallback_?f(this.errorCallback_(p,g)):f(g)}else if(o.canceled){const g=this.appDelete_?iA():fO();f(g)}else{const g=hO();f(g)}};this.canceled_?n(!1,new ch(!1,null,!0)):this.backoffId_=TO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&bO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ch{constructor(e,n,s){this.wasSuccessCode=e,this.connection=n,this.canceled=!!s}}function xO(r,e){e!==null&&e.length>0&&(r.Authorization="Firebase "+e)}function CO(r,e){r["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function IO(r,e){e&&(r["X-Firebase-GMPID"]=e)}function NO(r,e){e!==null&&(r["X-Firebase-AppCheck"]=e)}function DO(r,e,n,s,o,u,f=!0,p=!1){const g=rA(r.urlParams),y=r.url+g,E=Object.assign({},r.headers);return IO(E,e),xO(E,n),CO(E,u),NO(E,s),new RO(y,r.method,E,r.body,r.successCodes,r.additionalRetryCodes,r.handler,r.errorHandler,r.timeout,r.progressCallback,o,f,p)}function kO(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function OO(...r){const e=kO();if(e!==void 0){const n=new e;for(let s=0;s<r.length;s++)n.append(r[s]);return n.getBlob()}else{if(xg())return new Blob(r);throw new yt(gt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function MO(r,e,n){return r.webkitSlice?r.webkitSlice(e,n):r.mozSlice?r.mozSlice(e,n):r.slice?r.slice(e,n):null}function VO(r){if(typeof atob>"u")throw _O("base-64");return atob(r)}const Mi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class qp{constructor(e,n){this.data=e,this.contentType=n||null}}function LO(r,e){switch(r){case Mi.RAW:return new qp(sA(e));case Mi.BASE64:case Mi.BASE64URL:return new qp(aA(r,e));case Mi.DATA_URL:return new qp(PO(e),zO(e))}throw wg()}function sA(r){const e=[];for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);if(s<=127)e.push(s);else if(s<=2047)e.push(192|s>>6,128|s&63);else if((s&64512)===55296)if(!(n<r.length-1&&(r.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const u=s,f=r.charCodeAt(++n);s=65536|(u&1023)<<10|f&1023,e.push(240|s>>18,128|s>>12&63,128|s>>6&63,128|s&63)}else(s&64512)===56320?e.push(239,191,189):e.push(224|s>>12,128|s>>6&63,128|s&63)}return new Uint8Array(e)}function UO(r){let e;try{e=decodeURIComponent(r)}catch{throw iu(Mi.DATA_URL,"Malformed data URL.")}return sA(e)}function aA(r,e){switch(r){case Mi.BASE64:{const o=e.indexOf("-")!==-1,u=e.indexOf("_")!==-1;if(o||u)throw iu(r,"Invalid character '"+(o?"-":"_")+"' found: is it base64url encoded?");break}case Mi.BASE64URL:{const o=e.indexOf("+")!==-1,u=e.indexOf("/")!==-1;if(o||u)throw iu(r,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=VO(e)}catch(o){throw o.message.includes("polyfill")?o:iu(r,"Invalid character found")}const s=new Uint8Array(n.length);for(let o=0;o<n.length;o++)s[o]=n.charCodeAt(o);return s}class oA{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw iu(Mi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const s=n[1]||null;s!=null&&(this.base64=jO(s,";base64"),this.contentType=this.base64?s.substring(0,s.length-7):s),this.rest=e.substring(e.indexOf(",")+1)}}function PO(r){const e=new oA(r);return e.base64?aA(Mi.BASE64,e.rest):UO(e.rest)}function zO(r){return new oA(r).contentType}function jO(r,e){return r.length>=e.length?r.substring(r.length-e.length)===e:!1}class ns{constructor(e,n){let s=0,o="";W1(e)?(this.data_=e,s=e.size,o=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),s=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),s=e.length),this.size_=s,this.type_=o}size(){return this.size_}type(){return this.type_}slice(e,n){if(W1(this.data_)){const s=this.data_,o=MO(s,e,n);return o===null?null:new ns(o)}else{const s=new Uint8Array(this.data_.buffer,e,n-e);return new ns(s,!0)}}static getBlob(...e){if(xg()){const n=e.map(s=>s instanceof ns?s.data_:s);return new ns(OO.apply(null,n))}else{const n=e.map(f=>Rg(f)?LO(Mi.RAW,f).data:f.data_);let s=0;n.forEach(f=>{s+=f.byteLength});const o=new Uint8Array(s);let u=0;return n.forEach(f=>{for(let p=0;p<f.length;p++)o[u++]=f[p]}),new ns(o,!0)}}uploadData(){return this.data_}}function lA(r){let e;try{e=JSON.parse(r)}catch{return null}return SO(e)?e:null}function BO(r){if(r.length===0)return null;const e=r.lastIndexOf("/");return e===-1?"":r.slice(0,e)}function qO(r,e){const n=e.split("/").filter(s=>s.length>0).join("/");return r.length===0?n:r+"/"+n}function uA(r){const e=r.lastIndexOf("/",r.length-2);return e===-1?r:r.slice(e+1)}function HO(r,e){return e}class un{constructor(e,n,s,o){this.server=e,this.local=n||e,this.writable=!!s,this.xform=o||HO}}let hh=null;function FO(r){return!Rg(r)||r.length<2?r:uA(r)}function cA(){if(hh)return hh;const r=[];r.push(new un("bucket")),r.push(new un("generation")),r.push(new un("metageneration")),r.push(new un("name","fullPath",!0));function e(u,f){return FO(f)}const n=new un("name");n.xform=e,r.push(n);function s(u,f){return f!==void 0?Number(f):f}const o=new un("size");return o.xform=s,r.push(o),r.push(new un("timeCreated")),r.push(new un("updated")),r.push(new un("md5Hash",null,!0)),r.push(new un("cacheControl",null,!0)),r.push(new un("contentDisposition",null,!0)),r.push(new un("contentEncoding",null,!0)),r.push(new un("contentLanguage",null,!0)),r.push(new un("contentType",null,!0)),r.push(new un("metadata","customMetadata",!0)),hh=r,hh}function GO(r,e){function n(){const s=r.bucket,o=r.fullPath,u=new Nn(s,o);return e._makeStorageReference(u)}Object.defineProperty(r,"ref",{get:n})}function YO(r,e,n){const s={};s.type="file";const o=n.length;for(let u=0;u<o;u++){const f=n[u];s[f.local]=f.xform(s,e[f.server])}return GO(s,r),s}function hA(r,e,n){const s=lA(e);return s===null?null:YO(r,s,n)}function KO(r,e,n,s){const o=lA(e);if(o===null||!Rg(o.downloadTokens))return null;const u=o.downloadTokens;if(u.length===0)return null;const f=encodeURIComponent;return u.split(",").map(y=>{const E=r.bucket,S=r.fullPath,w="/b/"+f(E)+"/o/"+f(S),P=Cg(w,n,s),K=rA({alt:"media",token:y});return P+K})[0]}function QO(r,e){const n={},s=e.length;for(let o=0;o<s;o++){const u=e[o];u.writable&&(n[u.server]=r[u.local])}return JSON.stringify(n)}class fA{constructor(e,n,s,o){this.url=e,this.method=n,this.handler=s,this.timeout=o,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function dA(r){if(!r)throw wg()}function XO(r,e){function n(s,o){const u=hA(r,o,e);return dA(u!==null),u}return n}function $O(r,e){function n(s,o){const u=hA(r,o,e);return dA(u!==null),KO(u,o,r.host,r._protocol)}return n}function pA(r){function e(n,s){let o;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?o=uO():o=lO():n.getStatus()===402?o=oO(r.bucket):n.getStatus()===403?o=cO(r.path):o=s,o.status=n.getStatus(),o.serverResponse=s.serverResponse,o}return e}function WO(r){const e=pA(r);function n(s,o){let u=e(s,o);return s.getStatus()===404&&(u=aO(r.path)),u.serverResponse=o.serverResponse,u}return n}function JO(r,e,n){const s=e.fullServerUrl(),o=Cg(s,r.host,r._protocol),u="GET",f=r.maxOperationRetryTime,p=new fA(o,u,$O(r,n),f);return p.errorHandler=WO(e),p}function ZO(r,e){return r&&r.contentType||e&&e.type()||"application/octet-stream"}function e6(r,e,n){const s=Object.assign({},n);return s.fullPath=r.path,s.size=e.size(),s.contentType||(s.contentType=ZO(null,e)),s}function t6(r,e,n,s,o){const u=e.bucketOnlyServerUrl(),f={"X-Goog-Upload-Protocol":"multipart"};function p(){let se="";for(let pe=0;pe<2;pe++)se=se+Math.random().toString().slice(2);return se}const g=p();f["Content-Type"]="multipart/related; boundary="+g;const y=e6(e,s,o),E=QO(y,n),S="--"+g+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+E+`\r
--`+g+`\r
Content-Type: `+y.contentType+`\r
\r
`,w=`\r
--`+g+"--",P=ns.getBlob(S,s,w);if(P===null)throw gO();const K={name:y.fullPath},J=Cg(u,r.host,r._protocol),Z="POST",oe=r.maxUploadRetryTime,le=new fA(J,Z,XO(r,n),oe);return le.urlParams=K,le.headers=f,le.body=P.uploadData(),le.errorHandler=pA(e),le}class n6{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=na.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=na.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=na.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,s,o,u){if(this.sent_)throw Hl("cannot .send() more than once");if(gs(e)&&s&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),u!==void 0)for(const f in u)u.hasOwnProperty(f)&&this.xhr_.setRequestHeader(f,u[f].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Hl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Hl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Hl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Hl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class i6 extends n6{initXhr(){this.xhr_.responseType="text"}}function mA(){return new i6}class ha{constructor(e,n){this._service=e,n instanceof Nn?this._location=n:this._location=Nn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ha(e,n)}get root(){const e=new Nn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return uA(this._location.path)}get storage(){return this._service}get parent(){const e=BO(this._location.path);if(e===null)return null;const n=new Nn(this._location.bucket,e);return new ha(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw vO(e)}}function r6(r,e,n){r._throwIfRoot("uploadBytes");const s=t6(r.storage,r._location,cA(),new ns(e,!0),n);return r.storage.makeRequestWithTokens(s,mA).then(o=>({metadata:o,ref:r}))}function s6(r){r._throwIfRoot("getDownloadURL");const e=JO(r.storage,r._location,cA());return r.storage.makeRequestWithTokens(e,mA).then(n=>{if(n===null)throw yO();return n})}function a6(r,e){const n=qO(r._location.path,e),s=new Nn(r._location.bucket,n);return new ha(r.storage,s)}function o6(r){return/^[A-Za-z]+:\/\//.test(r)}function l6(r,e){return new ha(r,e)}function gA(r,e){if(r instanceof Ig){const n=r;if(n._bucket==null)throw mO();const s=new ha(n,n._bucket);return e!=null?gA(s,e):s}else return e!==void 0?a6(r,e):r}function u6(r,e){if(e&&o6(e)){if(r instanceof Ig)return l6(r,e);throw bm("To use ref(service, url), the first argument must be a Storage instance.")}else return gA(r,e)}function Z1(r,e){const n=e?.[nA];return n==null?null:Nn.makeFromBucketSpec(n,r)}function c6(r,e,n,s={}){r.host=`${e}:${n}`;const o=gs(e);o&&(km(`https://${r.host}/b`),Om("Storage",!0)),r._isUsingEmulator=!0,r._protocol=o?"https":"http";const{mockUserToken:u}=s;u&&(r._overrideAuthToken=typeof u=="string"?u:ME(u,r.app.options.projectId))}class Ig{constructor(e,n,s,o,u,f=!1){this.app=e,this._authProvider=n,this._appCheckProvider=s,this._url=o,this._firebaseVersion=u,this._isUsingEmulator=f,this._bucket=null,this._host=tA,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=rO,this._maxUploadRetryTime=sO,this._requests=new Set,o!=null?this._bucket=Nn.makeFromBucketSpec(o,this._host):this._bucket=Z1(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Nn.makeFromBucketSpec(this._url,e):this._bucket=Z1(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){J1("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){J1("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Cn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ha(this,e)}_makeRequest(e,n,s,o,u=!0){if(this._deleted)return new EO(iA());{const f=DO(e,this._appId,s,o,n,this._firebaseVersion,u,this._isUsingEmulator);return this._requests.add(f),f.getPromise().then(()=>this._requests.delete(f),()=>this._requests.delete(f)),f}}async makeRequestWithTokens(e,n){const[s,o]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,s,o).getPromise()}}const eE="@firebase/storage",tE="0.14.0";const yA="storage";function h6(r,e,n){return r=lt(r),r6(r,e,n)}function f6(r){return r=lt(r),s6(r)}function d6(r,e){return r=lt(r),u6(r,e)}function p6(r=Lm(),e){r=lt(r);const s=$h(r,yA).getImmediate({identifier:e}),o=DE("storage");return o&&m6(s,...o),s}function m6(r,e,n,s={}){c6(r,e,n,s)}function g6(r,{instanceIdentifier:e}){const n=r.getProvider("app").getImmediate(),s=r.getProvider("auth-internal"),o=r.getProvider("app-check-internal");return new Ig(n,s,o,e,fa)}function y6(){ra(new us(yA,g6,"PUBLIC").setMultipleInstances(!0)),Vi(eE,tE,""),Vi(eE,tE,"esm2020")}y6();const _6={apiKey:"AIzaSyCRvuAwbnzhu8eaeAduM6Ii1Ai0tnLmqRk",authDomain:"pvr-browser.firebaseapp.com",projectId:"pvr-browser",storageBucket:"pvr-browser.firebasestorage.app",messagingSenderId:"38858847560",appId:"1:38858847560:web:9df0eff8e2d123410d2f7d"},Ng=UE(_6),Yh=I4(Ng),Js=Bk(Ng),v6=p6(Ng),_A=ne.createContext(void 0),E6=({children:r})=>{const[e,n]=ne.useState(null),[s,o]=ne.useState(!0);ne.useEffect(()=>yI(Yh,p=>{n(p),o(!1)}),[]);const u=()=>_I(Yh);return T.jsx(_A.Provider,{value:{currentUser:e,loading:s,logout:u},children:r})},_f=()=>{const r=ne.useContext(_A);if(r===void 0)throw new Error("useAuth must be used within an AuthProvider");return r},vA=ne.createContext(void 0),T6=({children:r})=>{const{socket:e}=RE(),{currentUser:n}=_f(),[s,o]=ne.useState(),[u,f]=ne.useState({isReceivingCall:!1,from:"",name:"",signal:null,isVideo:!1}),[p,g]=ne.useState(!1),[y,E]=ne.useState(!1),[S,w]=ne.useState(""),[P,K]=ne.useState(!1),[J,Z]=ne.useState(""),oe=ne.useRef(null),le=ne.useRef(null),se=ne.useRef(null);ne.useEffect(()=>{if(e)return e.on("callUser",({from:R,name:I,signal:D,isVideo:M})=>{console.log("Receiving call from",I),f({isReceivingCall:!0,from:R,name:I,signal:D,isVideo:M}),Z(R)}),e.on("callEnded",()=>{x(!1)}),()=>{e.off("callUser"),e.off("callEnded")}},[e]);const pe=async R=>{try{s&&(console.log("Cleaning up existing stream before requesting new media..."),s.getTracks().forEach(D=>{D.stop(),console.log(`Stopped existing ${D.kind} track`)}),o(void 0),await new Promise(D=>setTimeout(D,100))),console.log(`Requesting media access (video: ${R})...`);const I=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});return R||I.getVideoTracks().forEach(D=>D.enabled=!1),o(I),oe.current&&(oe.current.srcObject=I),console.log("Media stream acquired successfully"),I}catch(I){return console.error("Failed to get local stream",I),alert(`Camera/Microphone Error: ${I instanceof Error?I.message:"Device in use or permission denied"}. Please close any other apps using your camera and try again.`),null}},xe=(R,I,D)=>{const M=new RTCPeerConnection({iceServers:[{urls:"stun:stun.l.google.com:19302"}]});return I.getTracks().forEach(C=>{M.addTrack(C,I)}),M.ontrack=C=>{le.current&&(le.current.srcObject=C.streams[0])},M.onicecandidate=C=>{C.candidate&&e.emit("iceCandidate",{candidate:C.candidate,to:J||(R?D:u.from)})},e.on("iceCandidate",async C=>{try{M.signalingState!=="closed"&&await M.addIceCandidate(new RTCIceCandidate(C))}catch(Be){console.error("Error adding ice candidate",Be)}}),M},me=async(R,I=!0)=>{console.log("Calling user:",R,I?"(Video)":"(Voice)"),K(!0),E(!1),g(!1),Z(R);const D=await pe(I);if(!D)return;const M=xe(!0,D,R);se.current=M;const C=await M.createOffer();await M.setLocalDescription(C),console.log("Emitting callUser event to server"),e.emit("callUser",{userToCall:R,signalData:C,from:n?.uid||"unknown",name:n?.displayName||"Unknown User",isVideo:I}),e.on("callAccepted",async Be=>{g(!0),K(!1);const rt=new RTCSessionDescription(Be);M.signalingState!=="closed"&&await M.setRemoteDescription(rt)})},N=async()=>{g(!0);const R=await pe(u.isVideo);if(!R)return;const I=xe(!1,R);se.current=I,await I.setRemoteDescription(new RTCSessionDescription(u.signal));const D=await I.createAnswer();await I.setLocalDescription(D),e.emit("answerCall",{signal:D,to:u.from})},x=(R=!0)=>{if(console.log("Ending call, cleaning up media..."),R&&J&&e.emit("endCall",{to:J}),se.current)try{se.current.getSenders().forEach(I=>{I.track&&(I.track.stop(),console.log(`Stopped peer ${I.track.kind} track`))})}catch(I){console.warn("Error stopping peer tracks:",I)}s&&s.getTracks().forEach(I=>{I.stop(),console.log(`Stopped local ${I.kind} track (state: ${I.readyState})`)}),oe.current&&(oe.current.srcObject=null,oe.current.load()),le.current&&(le.current.srcObject=null,le.current.load()),se.current&&(se.current.close(),se.current=null),o(void 0),E(!0),f({isReceivingCall:!1,from:"",name:"",signal:null,isVideo:!1}),g(!1),K(!1),Z(""),console.log("Call cleanup complete"),console.log(" Page will refresh in 2 seconds to release camera/microphone..."),setTimeout(()=>{window.location.reload()},2e3)};return T.jsx(vA.Provider,{value:{call:u,callAccepted:p,callEnded:y,myVideo:oe,userVideo:le,stream:s,name:S,setName:w,callUser:me,answerCall:N,leaveCall:x,isCalling:P},children:r})},EA=()=>{const r=ne.useContext(vA);if(!r)throw new Error("useCall must be used within CallProvider");return r},b6=({conversation:r,messages:e,onSendMessage:n,onReact:s,onEdit:o,onDelete:u,onTyping:f,typingUser:p})=>{const{callUser:g}=EA(),[y,E]=ne.useState(""),[S,w]=ne.useState(null),P=ne.useRef(null),K=ne.useRef(null),J=ne.useRef(null),Z=()=>{P.current?.scrollIntoView({behavior:"smooth"})};ne.useEffect(()=>{Z()},[e,S]);const oe=R=>{const I=R.target.files?.[0];if(I){const D=new FileReader;D.onloadend=()=>{w(D.result)},D.readAsDataURL(I)}},le=R=>{E(R),f&&(f(!0),J.current&&clearTimeout(J.current),J.current=setTimeout(()=>{f(!1)},2e3))};if(!r||r.id==="empty")return T.jsxs("main",{style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"var(--spacing-xl)",background:"transparent",textAlign:"center",position:"relative",zIndex:10},children:[T.jsx("div",{style:{width:"80px",height:"80px",backgroundColor:"var(--bg-tertiary)",borderRadius:"24px",display:"flex",alignItems:"center",justifyContent:"center",marginBottom:"var(--spacing-lg)",color:"var(--accent-primary)",border:"1px solid var(--border-color)"},children:T.jsx(wm,{size:40,fill:"currentColor",opacity:.2})}),T.jsx("h2",{style:{fontSize:"var(--font-size-2xl)",fontWeight:700,marginBottom:"var(--spacing-sm)"},children:"Your Messages"}),T.jsx("p",{style:{color:"var(--text-secondary)",maxWidth:"300px",lineHeight:1.6},children:"Select a conversation to start chatting or find someone new to message."})]});const se=()=>{(y.trim()||S)&&(n(y,S||void 0),E(""),w(null),f&&(f(!1),J.current&&clearTimeout(J.current)))},pe=R=>{R.key==="Enter"&&!R.shiftKey&&(R.preventDefault(),se())},xe=R=>{switch(R){case"online":return"#10b981";case"busy":return"#ef4444";case"away":return"#eab308";case"offline":return"#94a3b8";default:return"#94a3b8"}},me=R=>{switch(R){case"online":return"Online";case"busy":return"Do not disturb";case"away":return"Away";case"offline":return"Unavailable";default:return"Unavailable"}},N=xe(r.status),x=me(r.status);return T.jsxs("main",{style:{flex:1,display:"flex",flexDirection:"column",position:"relative",overflow:"hidden"},children:[T.jsxs("div",{style:{padding:"0 var(--spacing-lg)",display:"flex",alignItems:"center",justifyContent:"space-between",backdropFilter:"blur(var(--backdrop-blur))",height:"80px",borderBottom:"1px solid var(--glass-border)",zIndex:20},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"var(--spacing-md)"},children:[T.jsxs("div",{style:{position:"relative"},children:[T.jsx("img",{src:r.avatar,alt:r.name,style:{width:"40px",height:"40px",borderRadius:"50%",objectFit:"cover"}}),T.jsx("div",{style:{position:"absolute",bottom:"0",right:"0",width:"13px",height:"13px",borderRadius:"50%",backgroundColor:N,border:"2.5px solid var(--bg-primary)"}})]}),T.jsxs("div",{children:[T.jsx("h2",{style:{fontSize:"var(--font-size-base)",fontWeight:600},children:r.name}),T.jsx("span",{style:{fontSize:"var(--font-size-xs)",color:N,fontWeight:500},children:x})]})]}),T.jsxs("div",{style:{display:"flex",gap:"var(--spacing-md)"},children:[T.jsx("button",{className:"icon-btn",title:"Voice Call",onClick:()=>r&&g(r.id,!1),children:T.jsx(Rm,{size:20})}),T.jsx("button",{className:"icon-btn",title:"Video Call",onClick:()=>r&&g(r.id,!0),children:T.jsx(hE,{size:20})}),T.jsx("button",{className:"icon-btn",title:"More Options",children:T.jsx(sE,{size:20})})]})]}),T.jsxs("div",{style:{flex:1,padding:"var(--spacing-lg)",overflowY:"auto",display:"flex",flexDirection:"column",gap:"var(--spacing-md)"},children:[T.jsx("div",{style:{alignSelf:"center",margin:"var(--spacing-lg) 0"},children:T.jsx("span",{style:{backgroundColor:"var(--bg-tertiary)",padding:"4px 12px",borderRadius:"var(--radius-full)",fontSize:"var(--font-size-xs)",color:"var(--text-secondary)"},children:"Today"})}),e.map(R=>T.jsx(L2,{id:R.id,isMe:R.sender==="me",text:R.text,timestamp:R.timestamp,image:R.image,reactions:R.reactions,onReact:s,onEdit:o,onDelete:u,isEdited:R.isEdited,status:R.status},R.id)),T.jsx(U2,{userName:p?.userName,isVisible:!!p}),T.jsx("div",{ref:P})]}),T.jsxs("div",{style:{padding:"var(--spacing-md) var(--spacing-xl)",backdropFilter:"blur(var(--backdrop-blur))",marginBottom:"10px",display:"flex",flexDirection:"column",gap:"8px"},children:[S&&T.jsxs("div",{style:{position:"relative",width:"fit-content",marginLeft:"16px",animation:"slideUp 0.2s ease"},children:[T.jsx("img",{src:S,alt:"Preview",style:{height:"100px",borderRadius:"12px",border:"1px solid var(--border-color)"}}),T.jsx("button",{onClick:()=>w(null),style:{position:"absolute",top:"-8px",right:"-8px",background:"var(--bg-elevated)",border:"1px solid var(--border-color)",borderRadius:"50%",width:"24px",height:"24px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},children:""})]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",backgroundColor:"var(--bg-tertiary)",padding:"8px 8px 8px 16px",borderRadius:"20px",border:"1px solid var(--border-color)",transition:"all 0.2s ease",boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.05)"},children:[T.jsx("input",{type:"file",ref:K,style:{display:"none"},accept:"image/*",onChange:oe}),T.jsx("button",{className:"icon-btn",style:{padding:"6px"},title:"Attach Image",onClick:()=>K.current?.click(),children:T.jsx(r2,{size:20})}),T.jsx("input",{type:"text",placeholder:"Type a message...",value:y,onChange:R=>le(R.target.value),onKeyDown:pe,style:{flex:1,background:"transparent",border:"none",color:"var(--text-primary)",outline:"none",fontSize:"0.95rem",fontFamily:"inherit",fontWeight:400}}),T.jsx("button",{className:"icon-btn",style:{padding:"6px"},title:"Emoji",children:T.jsx(lE,{size:20})}),T.jsx("button",{onClick:se,title:"Send Message",style:{backgroundColor:"var(--accent-primary)",color:"white",border:"none",borderRadius:"16px",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:T.jsx(h2,{size:18,fill:"white"})})]})]}),T.jsx("style",{children:`
                @keyframes slideUp {
                    from { opacity: 0; transform: translateY(10px); }
                    to { opacity: 1; transform: translateY(0); }
                }
            `})]})},TA=({isOpen:r,onClose:e,title:n,children:s})=>{const o=ne.useRef(null);ne.useEffect(()=>{const f=p=>{p.key==="Escape"&&e()};return r&&document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",f)}},[r,e]);const u=f=>{o.current&&!o.current.contains(f.target)&&e()};return r?T.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,backdropFilter:"blur(4px)",animation:"fadeIn 0.2s ease-out"},onClick:u,children:[T.jsxs("div",{ref:o,style:{backgroundColor:"var(--bg-secondary)",borderRadius:"var(--radius-lg)",width:"100%",maxWidth:"450px",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",border:"1px solid var(--border-color)",animation:"scaleUp 0.2s ease-out",transformOrigin:"center"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",padding:"var(--spacing-lg)",borderBottom:"1px solid var(--border-color)"},children:[T.jsx("h2",{style:{fontSize:"var(--font-size-lg)",fontWeight:600,color:"var(--text-primary)",margin:0},children:n}),T.jsx("button",{onClick:e,className:"icon-btn",style:{color:"var(--text-secondary)"},children:T.jsx(fE,{size:20})})]}),T.jsx("div",{style:{padding:"var(--spacing-lg)"},children:s})]}),T.jsx("style",{children:`
                @keyframes fadeIn {
                    from { opacity: 0; }
                    to { opacity: 1; }
                }
                @keyframes scaleUp {
                    from { opacity: 0; transform: scale(0.95); }
                    to { opacity: 1; transform: scale(1); }
                }
            `})]}):null},A6=({isOpen:r,onClose:e,onCreateChat:n,onlineUsers:s=[]})=>{const[o,u]=ne.useState(""),f=p=>{p.preventDefault(),o.trim()&&(n(o.trim()),u(""),e())};return T.jsx(TA,{isOpen:r,onClose:e,title:"New Conversation",children:T.jsxs("form",{onSubmit:f,style:{display:"flex",flexDirection:"column",gap:"var(--spacing-md)"},children:[T.jsxs("div",{children:[T.jsx("label",{style:{display:"block",marginBottom:"var(--spacing-xs)",fontSize:"var(--font-size-sm)",fontWeight:500,color:"var(--text-secondary)"},children:"Recipient Name"}),T.jsx("input",{type:"text",value:o,onChange:p=>u(p.target.value),placeholder:"e.g. Alice Smith",className:"input-field",style:{width:"100%"},autoFocus:!0})]}),s.length>0&&T.jsxs("div",{style:{marginTop:"var(--spacing-sm)"},children:[T.jsx("p",{style:{fontSize:"var(--font-size-xs)",color:"var(--text-tertiary)",marginBottom:"8px",fontWeight:600,textTransform:"uppercase"},children:"Online Users"}),T.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:s.map(p=>T.jsxs("button",{type:"button",onClick:()=>{n(p.username),e()},className:"btn btn-secondary",style:{justifyContent:"flex-start",padding:"8px 12px"},children:[T.jsx(Cw,{size:16,style:{color:"#10b981"}}),T.jsx("span",{children:p.username})]},p.userId))})]}),T.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"var(--spacing-md)",marginTop:"var(--spacing-lg)"},children:[T.jsx("button",{type:"button",onClick:e,className:"btn btn-ghost",children:"Cancel"}),T.jsxs("button",{type:"submit",className:"btn btn-primary",disabled:!o.trim(),children:[T.jsx(cE,{size:18}),"Start Chat"]})]})]})})},S6=({isOpen:r,onClose:e,onLogout:n})=>{const{mode:s,color:o,toggleMode:u,setColor:f}=Sm(),{currentUser:p,logout:g}=_f(),[y,E]=ne.useState("main"),[S,w]=ne.useState(p?.displayName||""),[P,K]=ne.useState(p?.photoURL||""),[J,Z]=ne.useState(""),[oe,le]=ne.useState(!1),[se,pe]=ne.useState(!1),[xe,me]=ne.useState({text:"",type:""});ne.useEffect(()=>{r||(E("main"),me({text:"",type:""}))},[r]);const N=async M=>{if(!M.target.files||!M.target.files[0]||!p)return;const C=M.target.files[0];pe(!0),me({text:"",type:""});try{const Be=d6(v6,`avatars/${p.uid}/${Date.now()}_${C.name}`),rt=await h6(Be,C),B=await f6(rt.ref);K(B),me({text:"Image uploaded! Click Save to apply.",type:"success"})}catch(Be){console.error("Upload error:",Be),me({text:"Failed to upload image.",type:"error"})}finally{pe(!1)}},x=async M=>{if(M.preventDefault(),!!p){le(!0),me({text:"",type:""});try{await cT(p,{displayName:S,photoURL:P}),await eA(pu(Js,"users",p.uid),{name:S,avatar:P||`https://ui-avatars.com/api/?name=${encodeURIComponent(S)}`,updatedAt:Eg()},{merge:!0}),me({text:"Profile updated successfully!",type:"success"})}catch(C){me({text:C.message,type:"error"})}finally{le(!1)}}},R=async M=>{if(M.preventDefault(),!!p){le(!0),me({text:"",type:""});try{await dI(p,J),me({text:"Password changed successfully!",type:"success"}),setTimeout(()=>E("main"),1500)}catch{me({text:"Error: Re-login required to change password.",type:"error"})}finally{le(!1)}}},I=()=>{n?n():g(),e()},D=()=>y==="main"?null:T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px",cursor:"pointer",paddingBottom:"12px",borderBottom:"1px solid var(--border-color)"},onClick:()=>E("main"),children:[T.jsx("div",{style:{padding:"6px",borderRadius:"50%",background:"var(--bg-tertiary)"},children:T.jsx(gw,{size:18})}),T.jsx("h3",{style:{fontSize:"18px",fontWeight:600,margin:0},children:y==="preferences"?"Preferences":y==="profile"?"Edit Profile":"Privacy & Safety"})]});return T.jsxs(TA,{isOpen:r,onClose:e,title:y==="main"?"Settings":"",children:[D(),y==="main"&&T.jsxs("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[T.jsxs("div",{style:{flex:1,overflowY:"auto"},children:[T.jsx(Fn,{icon:Hp,label:"Preferences",onClick:()=>E("preferences")}),T.jsx(Fn,{icon:A2,label:"Edit username",onClick:()=>E("profile")}),T.jsx(Fn,{icon:_w,label:"Restricted accounts",onClick:()=>alert("No restricted accounts.")}),T.jsx(Fn,{icon:p2,label:"Privacy and safety",onClick:()=>E("privacy"),hasChevron:!0}),T.jsx(Fn,{icon:Nw,label:"Accessibility",onClick:()=>alert("Accessibility settings coming soon.")}),T.jsx(Fn,{icon:C2,label:"Family Centre"}),T.jsx("div",{style:{height:"1px",background:"var(--border-color)",margin:"12px 0"}}),T.jsx(Fn,{icon:Rw,label:"Help"}),T.jsx(Fn,{icon:T2,label:"Report a Problem"}),T.jsx("div",{style:{height:"1px",background:"var(--border-color)",margin:"12px 0"}}),T.jsx(Fn,{icon:Ap,label:"Terms"}),T.jsx(Fn,{icon:Ap,label:"Privacy Policy"}),T.jsx(Fn,{icon:Ap,label:"Cookie Policy"}),T.jsx("div",{style:{height:"1px",background:"var(--border-color)",margin:"12px 0"}}),T.jsx(Fn,{icon:aE,label:"Log Out",onClick:I,danger:!0})]}),T.jsxs("div",{style:{marginTop:"20px",padding:"16px",borderRadius:"16px",backgroundColor:"var(--bg-tertiary)",display:"flex",alignItems:"center",gap:"16px",cursor:"pointer",transition:"background 0.2s"},onClick:()=>E("profile"),children:[T.jsx("img",{src:p?.photoURL||P||"https://ui-avatars.com/api/?name=User",style:{width:"48px",height:"48px",borderRadius:"50%",objectFit:"cover"},alt:"Current User"}),T.jsxs("div",{style:{flex:1},children:[T.jsx("div",{style:{fontWeight:700,fontSize:"15px"},children:p?.displayName||"User"}),T.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)"},children:p?.email})]}),T.jsx(Hp,{size:18,color:"var(--text-tertiary)"})]})]}),y==="preferences"&&T.jsxs("div",{children:[T.jsxs("div",{style:{marginBottom:"24px"},children:[T.jsx("h4",{style:{fontSize:"13px",fontWeight:600,color:"var(--text-secondary)",marginBottom:"16px",textTransform:"uppercase"},children:"Appearance"}),T.jsxs("div",{style:{display:"flex",gap:"8px",background:"var(--bg-tertiary)",padding:"4px",borderRadius:"24px"},children:[T.jsxs("button",{onClick:()=>s!=="light"&&u(),style:{flex:1,padding:"10px",borderRadius:"20px",background:s==="light"?"var(--bg-elevated)":"transparent",color:s==="light"?"var(--text-primary)":"var(--text-secondary)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:s==="light"?"0 2px 8px rgba(0,0,0,0.1)":"none",fontWeight:500},children:[T.jsx(uE,{size:18})," Light"]}),T.jsxs("button",{onClick:()=>s!=="dark"&&u(),style:{flex:1,padding:"10px",borderRadius:"20px",background:s==="dark"?"var(--bg-elevated)":"transparent",color:s==="dark"?"var(--text-primary)":"var(--text-secondary)",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",boxShadow:s==="dark"?"0 2px 8px rgba(0,0,0,0.1)":"none",fontWeight:500},children:[T.jsx(oE,{size:18})," Dark"]})]})]}),T.jsxs("div",{children:[T.jsx("h4",{style:{fontSize:"13px",fontWeight:600,color:"var(--text-secondary)",marginBottom:"16px",textTransform:"uppercase"},children:"Accent Color"}),T.jsx("div",{style:{display:"flex",gap:"16px",justifyContent:"center",flexWrap:"wrap"},children:[{id:"blue",hex:"#3b82f6"},{id:"purple",hex:"#8b5cf6"},{id:"green",hex:"#10b981"},{id:"red",hex:"#ef4444"},{id:"yellow",hex:"#f59e0b"},{id:"pink",hex:"#ec4899"}].map(M=>T.jsx("button",{onClick:()=>f(M.id),style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:M.hex,border:o===M.id?"4px solid var(--bg-primary)":"none",cursor:"pointer",outline:o===M.id?`2px solid ${M.hex}`:"none",transform:o===M.id?"scale(1.1)":"scale(1)",transition:"all 0.2s"}},M.id))})]})]}),y==="profile"&&T.jsxs("form",{onSubmit:x,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[T.jsx("div",{style:{textAlign:"center"},children:T.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[T.jsx("img",{src:P||`https://ui-avatars.com/api/?name=${encodeURIComponent(S||"User")}`,style:{width:"100px",height:"100px",borderRadius:"50%",objectFit:"cover",border:"4px solid var(--bg-tertiary)"}}),T.jsx("label",{htmlFor:"avatar-upload",style:{position:"absolute",bottom:"0",right:"0",backgroundColor:"var(--accent-primary)",color:"white",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",border:"3px solid var(--bg-primary)"},children:se?T.jsx(fo,{size:16,className:"animate-spin"}):T.jsx(w2,{size:16})}),T.jsx("input",{id:"avatar-upload",type:"file",accept:"image/*",onChange:N,style:{display:"none"},disabled:se})]})}),T.jsxs("div",{children:[T.jsx("label",{style:{fontSize:"13px",fontWeight:600,color:"var(--text-secondary)",marginBottom:"8px",display:"block"},children:"Display Name"}),T.jsx("input",{className:"input-field",value:S,onChange:M=>w(M.target.value),placeholder:"Your Name",required:!0})]}),T.jsxs("div",{style:{marginTop:"10px"},children:[T.jsx("h4",{style:{fontSize:"13px",fontWeight:600,color:"var(--text-tertiary)",textTransform:"uppercase",marginBottom:"12px"},children:"Account Info"}),T.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px",padding:"16px",background:"var(--bg-tertiary)",borderRadius:"12px"},children:[T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"var(--text-secondary)",fontSize:"14px"},children:[T.jsx(qw,{size:16})," ",p?.email]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"var(--text-secondary)",fontSize:"14px"},children:[T.jsx(Ew,{size:16})," Joined: ",p?.metadata.creationTime?new Date(p.metadata.creationTime).toLocaleDateString():"Unknown"]}),T.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",color:"var(--text-secondary)",fontSize:"14px"},children:[T.jsx(Lw,{size:16})," ID: ",p?.uid.slice(0,8),"..."]})]})]}),T.jsx("button",{type:"submit",className:"btn btn-primary",disabled:oe,style:{marginTop:"8px"},children:oe?T.jsx(fo,{className:"animate-spin",size:20}):"Save Changes"})]}),y==="privacy"&&T.jsxs("form",{onSubmit:R,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[T.jsxs("div",{children:[T.jsx("label",{style:{fontSize:"13px",fontWeight:600,color:"var(--text-secondary)",marginBottom:"8px",display:"block"},children:"Change Password"}),T.jsx("input",{className:"input-field",type:"password",placeholder:"New Password",value:J,onChange:M=>Z(M.target.value),required:!0}),T.jsx("p",{style:{fontSize:"12px",color:"var(--text-tertiary)",marginTop:"8px"},children:"Note: Requires recent login. If it fails, please log out and log in again."})]}),T.jsx("button",{type:"submit",className:"btn btn-primary",disabled:oe,children:oe?T.jsx(fo,{className:"animate-spin",size:20}):"Update Password"})]}),xe.text&&T.jsx("div",{style:{marginTop:"16px",padding:"12px",borderRadius:"8px",backgroundColor:xe.type==="error"?"rgba(239, 68, 68, 0.1)":"rgba(16, 185, 129, 0.1)",color:xe.type==="error"?"#ef4444":"#10b981",fontSize:"14px",textAlign:"center",border:xe.type==="error"?"1px solid rgba(239, 68, 68, 0.2)":"1px solid rgba(16, 185, 129, 0.2)"},children:xe.text})]})},Fn=({icon:r,label:e,onClick:n,hasChevron:s,danger:o})=>T.jsxs("div",{onClick:n,style:{display:"flex",alignItems:"center",gap:"16px",padding:"14px 12px",cursor:n?"pointer":"default",borderRadius:"12px",transition:"background 0.2s",color:o?"#ef4444":"var(--text-primary)",fontSize:"15px",fontWeight:500,opacity:n?1:.7},onMouseEnter:u=>n&&(u.currentTarget.style.backgroundColor="var(--bg-tertiary)"),onMouseLeave:u=>n&&(u.currentTarget.style.backgroundColor="transparent"),children:[T.jsx(r,{size:22,strokeWidth:1.5}),T.jsx("span",{style:{flex:1},children:e}),s&&T.jsx(Sw,{size:18,color:"var(--text-tertiary)"})]}),w6=({onSwitchToSignUp:r})=>{const[e,n]=ne.useState(""),[s,o]=ne.useState(""),[u,f]=ne.useState(""),[p,g]=ne.useState(!1),y=async E=>{E.preventDefault(),f(""),g(!0);try{await hI(Yh,e,s)}catch{f("Invalid email or password")}finally{g(!1)}};return T.jsxs("div",{className:"glass-panel",style:{width:"100%",padding:"40px",borderRadius:"24px",border:"1px solid var(--glass-border)",boxShadow:"0 8px 32px rgba(0,0,0,0.12)",backdropFilter:"blur(20px)"},children:[T.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[T.jsx("h2",{style:{fontSize:"24px",fontWeight:700,marginBottom:"8px",color:"var(--text-primary)"},children:"Welcome Back"}),T.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:"Enter your details to sign in."})]}),u&&T.jsx("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"#ef4444",marginBottom:"24px",fontSize:"14px",textAlign:"center",border:"1px solid rgba(239, 68, 68, 0.2)"},children:u}),T.jsxs("form",{onSubmit:y,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[T.jsxs("div",{style:{position:"relative"},children:[T.jsx("div",{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)",pointerEvents:"none"},children:T.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),T.jsx("polyline",{points:"22,6 12,13 2,6"})]})}),T.jsx("input",{type:"email",placeholder:"Email Address",value:e,onChange:E=>n(E.target.value),className:"input-field",style:{paddingLeft:"48px",height:"52px",fontSize:"15px"},required:!0})]}),T.jsxs("div",{style:{position:"relative"},children:[T.jsx("div",{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)",pointerEvents:"none"},children:T.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),T.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),T.jsx("input",{type:"password",placeholder:"Password",value:s,onChange:E=>o(E.target.value),className:"input-field",style:{paddingLeft:"48px",height:"52px",fontSize:"15px"},required:!0})]}),T.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:T.jsx("a",{href:"#",style:{fontSize:"13px",color:"var(--accent-primary)",textDecoration:"none",fontWeight:500},children:"Forgot Password?"})}),T.jsx("button",{type:"submit",className:"btn btn-primary",disabled:p,style:{marginTop:"8px",height:"52px",fontSize:"16px",borderRadius:"16px",background:"linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%)"},children:p?T.jsx(fo,{className:"animate-spin",size:20}):T.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px"},children:["Sign In ",T.jsx(zw,{size:18})]})})]}),T.jsxs("div",{style:{marginTop:"32px",textAlign:"center",fontSize:"14px",color:"var(--text-secondary)"},children:["Don't have an account?"," ",T.jsx("button",{onClick:r,style:{background:"none",border:"none",color:"var(--accent-primary)",cursor:"pointer",fontWeight:600,marginLeft:"4px",fontSize:"14px",padding:0},children:"Create Account"})]})]})},R6=({onSwitchToLogin:r})=>{const[e,n]=ne.useState(""),[s,o]=ne.useState(""),[u,f]=ne.useState(""),[p,g]=ne.useState(""),[y,E]=ne.useState(!1),S=async w=>{w.preventDefault(),g(""),E(!0);try{const P=await cI(Yh,e,s);await cT(P.user,{displayName:u}),await eA(pu(Js,"users",P.user.uid),{uid:P.user.uid,name:u,email:e,avatar:`https://ui-avatars.com/api/?name=${encodeURIComponent(u)}&background=random`,status:"online",lastSeen:Eg()})}catch(P){g(P.message||"Failed to create account")}finally{E(!1)}};return T.jsxs("div",{className:"glass-panel",style:{width:"100%",padding:"40px",borderRadius:"24px",border:"1px solid var(--glass-border)",boxShadow:"0 8px 32px rgba(0,0,0,0.12)",backdropFilter:"blur(20px)"},children:[T.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[T.jsx("h2",{style:{fontSize:"24px",fontWeight:700,marginBottom:"8px",color:"var(--text-primary)"},children:"Create Account"}),T.jsx("p",{style:{color:"var(--text-secondary)",fontSize:"14px"},children:"Join us and start chatting today."})]}),p&&T.jsx("div",{style:{padding:"12px",borderRadius:"12px",backgroundColor:"rgba(239, 68, 68, 0.1)",color:"#ef4444",marginBottom:"24px",fontSize:"14px",textAlign:"center",border:"1px solid rgba(239, 68, 68, 0.2)"},children:p}),T.jsxs("form",{onSubmit:S,style:{display:"flex",flexDirection:"column",gap:"20px"},children:[T.jsxs("div",{style:{position:"relative"},children:[T.jsx("div",{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)",pointerEvents:"none"},children:T.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),T.jsx("circle",{cx:"12",cy:"7",r:"4"})]})}),T.jsx("input",{type:"text",placeholder:"Full Name",value:u,onChange:w=>f(w.target.value),className:"input-field",style:{paddingLeft:"48px",height:"52px",fontSize:"15px"},required:!0})]}),T.jsxs("div",{style:{position:"relative"},children:[T.jsx("div",{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)",pointerEvents:"none"},children:T.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("path",{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}),T.jsx("polyline",{points:"22,6 12,13 2,6"})]})}),T.jsx("input",{type:"email",placeholder:"Email Address",value:e,onChange:w=>n(w.target.value),className:"input-field",style:{paddingLeft:"48px",height:"52px",fontSize:"15px"},required:!0})]}),T.jsxs("div",{style:{position:"relative"},children:[T.jsx("div",{style:{position:"absolute",left:"16px",top:"50%",transform:"translateY(-50%)",color:"var(--text-tertiary)",pointerEvents:"none"},children:T.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[T.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),T.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]})}),T.jsx("input",{type:"password",placeholder:"Password",value:s,onChange:w=>o(w.target.value),className:"input-field",style:{paddingLeft:"48px",height:"52px",fontSize:"15px"},required:!0})]}),T.jsx("button",{type:"submit",className:"btn btn-primary",disabled:y,style:{marginTop:"8px",height:"52px",fontSize:"16px",borderRadius:"16px",background:"linear-gradient(135deg, var(--accent-primary) 0%, var(--accent-secondary) 100%)"},children:y?T.jsx(fo,{className:"animate-spin",size:20}):T.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"8px"},children:["Sign Up ",T.jsx(cE,{size:18})]})})]}),T.jsxs("div",{style:{marginTop:"32px",textAlign:"center",fontSize:"14px",color:"var(--text-secondary)"},children:["Already have an account?"," ",T.jsx("button",{onClick:r,style:{background:"none",border:"none",color:"var(--accent-primary)",cursor:"pointer",fontWeight:600,marginLeft:"4px",fontSize:"14px",padding:0},children:"Sign In"})]})]})},x6=()=>{const[r,e]=ne.useState(!0);return T.jsxs("div",{style:{minHeight:"100vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",background:"var(--bg-primary)",backgroundImage:"radial-gradient(at 0% 0%, var(--accent-primary) 0px, transparent 50%), radial-gradient(at 100% 100%, var(--accent-secondary) 0px, transparent 50%)",position:"relative",overflow:"hidden"},children:[T.jsx("div",{style:{position:"absolute",top:"-20%",left:"-10%",width:"600px",height:"600px",background:"var(--accent-primary)",filter:"blur(120px)",opacity:.1,borderRadius:"50%",zIndex:0}}),T.jsx("div",{style:{position:"absolute",bottom:"-20%",right:"-10%",width:"500px",height:"500px",background:"var(--accent-secondary)",filter:"blur(100px)",opacity:.1,borderRadius:"50%",zIndex:0}}),T.jsxs("div",{style:{position:"relative",zIndex:1,width:"100%",maxWidth:"450px",padding:"var(--spacing-md)"},children:[T.jsxs("div",{style:{marginBottom:"40px",textAlign:"center"},children:[T.jsx("div",{style:{width:"72px",height:"72px",background:"linear-gradient(135deg, var(--accent-primary), var(--accent-secondary))",borderRadius:"20px",display:"flex",alignItems:"center",justifyContent:"center",margin:"0 auto 24px",color:"white",boxShadow:"0 20px 40px -10px rgba(0,0,0,0.2)",transform:"rotate(-5deg)"},children:T.jsx(wm,{size:36,fill:"white"})}),T.jsx("h1",{style:{fontSize:"42px",fontWeight:800,marginBottom:"12px",margin:"0 0 12px 0",letterSpacing:"-1px",color:"var(--text-primary)"},children:"Messenger"}),T.jsx("p",{style:{fontSize:"16px",color:"var(--text-secondary)"},children:"Experience the future of connection."})]}),T.jsx("div",{style:{animation:"fadeInUp 0.4s cubic-bezier(0.16, 1, 0.3, 1)",width:"100%"},children:r?T.jsx(w6,{onSwitchToSignUp:()=>e(!1)}):T.jsx(R6,{onSwitchToLogin:()=>e(!0)})},r?"login":"signup")]}),T.jsx("style",{children:`
                @keyframes fadeInUp {
                    from { opacity: 0; transform: translateY(20px) scale(0.98); }
                    to { opacity: 1; transform: translateY(0) scale(1); }
                }
            `})]})},C6=()=>{const r=new Audio("data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBi2Fzvnci0YPF2W55eqVRxIkWq/n6qBVDA==");return r.loop=!0,r.play().catch(console.error),r},fh=r=>{r&&(r.pause(),r.currentTime=0)},I6=()=>{new Audio("data:audio/wav;base64,UklGRigBAABXQVZFZm10IBAAAAABAAEAgD4AAIA+AAABAAgAZGF0YRAEAAB9gIGDhYaHiYqKi4yLi4qJiIyMjI2OkJGTlJaYmJqbnJ2en6ChoqOkpaanqKmqqaqqq6utrrCxsrK0tba4uru8vb7AwcLExcfIycvMzs/R0tPV1tjZ297i5ejr7fL3/f8=").play().catch(console.error)},N6=()=>{const{call:r,callAccepted:e,myVideo:n,userVideo:s,stream:o,answerCall:u,leaveCall:f,isCalling:p}=EA(),[g,y]=ne.useState(!0),[E,S]=ne.useState(!0),[w,P]=ne.useState(!1),K=ne.useRef(null),[J,Z]=ne.useState("connecting"),oe=()=>{o&&(o.getAudioTracks().forEach(se=>{se.enabled=!g}),y(!g))},le=()=>{o&&(o.getVideoTracks().forEach(se=>{se.enabled=!E}),S(!E))};return ne.useEffect(()=>(r.isReceivingCall&&!e?K.current=C6():(fh(K.current),K.current=null),()=>fh(K.current)),[r.isReceivingCall,e]),ne.useEffect(()=>{e&&(I6(),Z("connected"))},[e]),r.isReceivingCall&&!e?T.jsxs("div",{style:{position:"fixed",top:"20px",left:"50%",transform:"translateX(-50%)",backgroundColor:"var(--bg-elevated)",border:"1px solid var(--border-color)",borderRadius:"16px",boxShadow:"0 10px 40px rgba(0,0,0,0.2)",zIndex:9999,display:"flex",alignItems:"center",padding:"16px 24px",gap:"24px",minWidth:"400px",animation:"slideDown 0.3s ease-out"},children:[T.jsxs("div",{style:{position:"relative",width:"56px",height:"56px"},children:[T.jsx("div",{style:{width:"100%",height:"100%",borderRadius:"50%",backgroundColor:"var(--bg-tertiary)",animation:"pulse-ring 2s infinite"}}),T.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"20px"},children:r.name.charAt(0).toUpperCase()})]}),T.jsxs("div",{style:{flex:1},children:[T.jsx("h2",{style:{fontSize:"18px",fontWeight:600,color:"var(--text-primary)",marginBottom:"4px"},children:r.name||"Unknown Caller"}),T.jsxs("p",{style:{fontSize:"14px",color:"var(--text-secondary)"},children:["Incoming ",r.isVideo?"Video":"Voice"," Call..."]})]}),T.jsxs("div",{style:{display:"flex",gap:"12px"},children:[T.jsx("button",{onClick:()=>{fh(K.current),f()},title:"Decline",style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#ef4444",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"transform 0.2s"},children:T.jsx(u0,{size:20,color:"white"})}),T.jsx("button",{onClick:()=>{fh(K.current),u()},title:"Accept",style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#10b981",border:"none",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 4px 12px rgba(16, 185, 129, 0.3)",transform:"scale(1.1)",transition:"transform 0.2s"},children:T.jsx(Rm,{size:20,color:"white"})})]}),T.jsx("style",{children:`
                    @keyframes slideDown {
                        from { transform: translate(-50%, -100%); opacity: 0; }
                        to { transform: translate(-50%, 0); opacity: 1; }
                    }
                    @keyframes pulse-ring {
                        0% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(16, 185, 129, 0.7); }
                        70% { transform: scale(1); box-shadow: 0 0 0 10px rgba(16, 185, 129, 0); }
                        100% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(16, 185, 129, 0); }
                    }
                `})]}):e||p?T.jsxs("div",{style:w?{position:"fixed",bottom:"20px",right:"20px",width:"320px",height:"240px",backgroundColor:"#1e293b",borderRadius:"16px",boxShadow:"0 10px 30px rgba(0,0,0,0.5)",zIndex:9999,overflow:"hidden",display:"flex",flexDirection:"column",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"}:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#000",zIndex:9999,display:"flex",flexDirection:"column",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:[T.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,padding:w?"8px":"20px",display:"flex",justifyContent:"flex-end",zIndex:20,background:w?"linear-gradient(to bottom, rgba(0,0,0,0.7), transparent)":"none"},children:T.jsx("button",{onClick:()=>P(!w),style:{background:"rgba(255,255,255,0.15)",border:"none",borderRadius:"50%",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",color:"white"},children:w?T.jsx(Fw,{size:16}):T.jsx(Ww,{size:20})})}),T.jsxs("div",{style:{flex:1,position:"relative",overflow:"hidden"},children:[e?T.jsx("video",{playsInline:!0,ref:s,autoPlay:!0,style:{width:"100%",height:"100%",objectFit:"cover"}}):T.jsxs("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",color:"white"},children:[!w&&T.jsxs(T.Fragment,{children:[T.jsx("div",{style:{width:"120px",height:"120px",borderRadius:"50%",backgroundColor:"var(--bg-tertiary)",marginBottom:"24px"}}),T.jsx("h3",{style:{fontSize:"24px",marginBottom:"8px"},children:J==="connecting"?"Connecting...":"Ringing..."}),T.jsx("div",{style:{display:"flex",gap:"4px",alignItems:"center"},children:[0,1,2].map(se=>T.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:"rgba(255,255,255,0.3)",animation:`pulse 1.4s infinite ${se*.2}s`}},se))}),T.jsx("style",{children:`
                                        @keyframes pulse {
                                            0%, 100% { opacity: 0.3; transform: scale(0.8); }
                                            50% { opacity: 1; transform: scale(1.2); }
                                        }
                                    `})]}),w&&T.jsx("h3",{style:{fontSize:"16px"},children:"Calling..."})]}),!w&&T.jsx("div",{style:{position:"absolute",bottom:"120px",right:"32px",width:"180px",height:"240px",borderRadius:"16px",overflow:"hidden",backgroundColor:"#1e293b",boxShadow:"0 8px 32px rgba(0,0,0,0.5)",border:"1px solid rgba(255,255,255,0.1)"},children:T.jsx("video",{playsInline:!0,ref:n,autoPlay:!0,muted:!0,style:{width:"100%",height:"100%",objectFit:"cover",transform:"scaleX(-1)"}})})]}),T.jsxs("div",{style:{height:w?"60px":"100px",display:"flex",alignItems:"center",justifyContent:"center",gap:w?"12px":"24px",paddingBottom:w?"0":"20px",background:w?"rgba(0,0,0,0.8)":"transparent",backdropFilter:w?"blur(10px)":"none"},children:[T.jsx("button",{onClick:oe,style:{padding:w?"8px":"16px",borderRadius:"50%",backgroundColor:g?"rgba(255,255,255,0.1)":"#ef4444",border:"none",cursor:"pointer",color:"white",transition:"all 0.2s"},children:g?T.jsx(Xw,{size:w?16:24}):T.jsx(Kw,{size:w?16:24})}),T.jsx("button",{onClick:()=>f(),style:{padding:w?"8px 16px":"16px 32px",borderRadius:"32px",backgroundColor:"#ef4444",border:"none",cursor:"pointer",color:"white"},children:T.jsx(u0,{size:w?16:24})}),T.jsx("button",{onClick:le,style:{padding:w?"8px":"16px",borderRadius:"50%",backgroundColor:E?"rgba(255,255,255,0.1)":"#ef4444",border:"none",cursor:"pointer",color:"white",transition:"all 0.2s"},children:E?T.jsx(hE,{size:w?16:24}):T.jsx(N2,{size:w?16:24})})]})]}):null};function D6(){const[r,e]=ne.useState([]),[n,s]=ne.useState({}),[o,u]=ne.useState(""),[f,p]=ne.useState(!0),[g,y]=ne.useState(!1),[E,S]=ne.useState(!1),{currentUser:w,logout:P}=_f(),{isConnected:K,login:J,logout:Z,receivedMessage:oe,sendMessage:le,emitTyping:se,userTyping:pe}=RE(),xe=async()=>{try{Z(),await P(),u("")}catch(B){console.error("Failed to logout:",B)}};ne.useEffect(()=>{if(!w)return;const B=Y1(jp(Js,"users"),Zk("uid","!=",w.uid));return $1(B,ie=>{const ge=ie.docs.map(ue=>({id:ue.data().uid||ue.id,name:ue.data().name,avatar:ue.data().avatar||`https://ui-avatars.com/api/?name=${encodeURIComponent(ue.data().name)}`,status:ue.data().status||"offline",lastMessage:"Say hi!",unreadCount:0,recipientId:ue.data().uid||ue.id}));e(ue=>{const O=new Map(ue.map(te=>[te.id,te]));return ge.map(te=>{const ae=O.get(te.id);return ae?{...te,unreadCount:ae.unreadCount||0,lastMessage:ae.lastMessage!=="Say hi!"?ae.lastMessage:te.lastMessage}:te})})})},[w,o]),ne.useEffect(()=>{w?.uid&&K&&J(w.uid)},[w,J,K]),ne.useEffect(()=>{if(oe){const{senderId:B,text:ee}=oe;if(B===w?.uid)return;const ie=B;if(ie&&ie!==o){const ge=new Audio("https://assets.mixkit.co/active_storage/sfx/2358/2358-preview.mp3");ge.volume=.5,ge.play().catch(ue=>console.log("Audio play failed:",ue)),e(ue=>ue.map(O=>O.id===ie?{...O,lastMessage:ee,unreadCount:(O.unreadCount||0)+1}:O))}}},[oe,w,o]),ne.useEffect(()=>{if(!w||!o)return;const B=[w.uid,o].sort().join("_");console.log("Syncing Chat ID:",B);const ee=Y1(jp(Js,"chats",B,"messages"),eO("timestamp","asc"));return $1(ee,ge=>{const ue=ge.docs.map(O=>{const G=O.data();return console.log("Message data from Firestore:",{id:O.id,text:G.text,status:G.status,hasStatus:"status"in G}),{id:O.id,text:G.text,sender:G.senderId===w.uid?"me":"other",timestamp:G.timestamp?.toDate?.().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})||"Just now",createdAt:G.timestamp?.toMillis?.()||Date.now(),image:G.image,reactions:G.reactions,userReactions:G.userReactions,isEdited:G.isEdited,status:G.status||"sent",deliveredAt:G.deliveredAt,readAt:G.readAt}});if(s(O=>({...O,[o]:ue})),ue.length>0){const O=ue[ue.length-1];e(G=>G.map(te=>te.id===o?{...te,lastMessage:O.text}:te))}},ge=>{console.error("Firestore Snapshot Error:",ge)})},[w,o]);const me=r.find(B=>B.id===o),N=n[o]||[],x=B=>{u(B),e(ee=>ee.map(ie=>ie.id===B?{...ie,unreadCount:0}:ie))},R=(B,ee)=>{const ie=Date.now().toString(),ge={id:ie,name:B,avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${B}`,status:"online",lastMessage:"Start a conversation",unreadCount:0,recipientUsername:ee};e(ue=>[ge,...ue]),s(ue=>({...ue,[ie]:[]})),u(ie)},I=async(B,ee)=>{if(!w||!o)return;const ie=[w.uid,o].sort().join("_");try{const ge=await nO(jp(Js,"chats",ie,"messages"),{text:B,senderId:w.uid,timestamp:Eg(),image:ee||null,reactions:{},userReactions:{},isEdited:!1,status:"sent",deliveredAt:null,readAt:null});setTimeout(async()=>{await X1(pu(Js,"chats",ie,"messages",ge.id),{status:"delivered",deliveredAt:Date.now()})},1e3),setTimeout(async()=>{await X1(pu(Js,"chats",ie,"messages",ge.id),{status:"read",readAt:Date.now()})},3e3),le({text:B,senderId:w.uid,recipientId:o,timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})}catch(ge){console.error("Error sending message:",ge)}},D=(B,ee)=>{s(ie=>{const ge=ie[o]||[];return{...ie,[o]:ge.map(ue=>ue.id===B?ue.createdAt&&Date.now()-ue.createdAt>3e5?(alert("You can only edit messages within 5 minutes."),ue):{...ue,text:ee,isEdited:!0}:ue)}})},M=(B,ee)=>{s(ie=>{const ge=ie[o]||[];return ee?{...ie,[o]:ge.map(ue=>ue.id===B?ue.createdAt&&Date.now()-ue.createdAt>6e5?(alert("You can only delete for everyone within 10 minutes."),ue):{...ue,text:" This message was deleted",image:void 0,reactions:void 0}:ue)}:{...ie,[o]:ge.filter(ue=>ue.id!==B)}})},C=(B,ee)=>{if(!w)return;const ie=w.uid;s(ge=>{const ue=ge[o]||[];return{...ge,[o]:ue.map(O=>{if(O.id===B){const G=O.userReactions||{},te=G[ie],ae={...O.reactions||{}};te&&ae[te]&&(ae[te]=Math.max(0,ae[te]-1),ae[te]===0&&delete ae[te]);let Ee={...G};return te===ee?delete Ee[ie]:(Ee[ie]=ee,ae[ee]=(ae[ee]||0)+1),{...O,reactions:ae,userReactions:Ee}}return O})}})},Be=B=>{if(console.log("handleTyping called:",B,"activeConvo:",o),o&&w){const ee=w.displayName||w.email?.split("@")[0]||"User";se(o,ee,B)}},rt=pe&&pe.userId===o?pe:null;return ne.useEffect(()=>{pe&&console.log("Typing status update:",pe,"Active Chat:",o)},[pe,o]),T.jsxs(T.Fragment,{children:[T.jsx(N6,{}),T.jsxs(uw,{children:[T.jsx(O2,{isOpen:f,toggleSidebar:()=>p(!f),conversations:r,activeConversationId:o,onSelectConversation:x,isConnected:K,onNewChat:()=>y(!0),onSettings:()=>S(!0),onLogout:xe}),T.jsx(b6,{conversation:me,messages:N,onSendMessage:I,onReact:C,onEdit:D,onDelete:M,onTyping:Be,typingUser:rt})]}),T.jsx(A6,{isOpen:g,onClose:()=>y(!1),onCreateChat:R,onlineUsers:[]}),T.jsx(S6,{isOpen:E,onClose:()=>S(!1),onLogout:xe})]})}function k6(){const{currentUser:r,loading:e}=_f();return e?T.jsx("div",{style:{height:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--bg-primary)",color:"var(--accent-primary)"},children:T.jsx(fo,{className:"animate-spin",size:48})}):r?T.jsx(D6,{}):T.jsx(x6,{})}function O6(){return T.jsx(lw,{children:T.jsx(E6,{children:T.jsx(T6,{children:T.jsx(k6,{})})})})}ow.createRoot(document.getElementById("root")).render(T.jsx(ne.StrictMode,{children:T.jsx(O6,{})}));
